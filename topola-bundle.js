var TopolaLib=(()=>{var ri=Object.defineProperty;var ih=Object.getOwnPropertyDescriptor;var ah=Object.getOwnPropertyNames;var oh=Object.prototype.hasOwnProperty;var h=(t,e)=>()=>(t&&(e=t(t=0)),e);var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Er=(t,e)=>{for(var r in e)ri(t,r,{get:e[r],enumerable:!0})},sh=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ah(e))!oh.call(t,i)&&i!==r&&ri(t,i,{get:()=>e[i],enumerable:!(n=ih(e,i))||n.enumerable});return t};var rt=t=>sh(ri({},"__esModule",{value:!0}),t);var No=j(()=>{Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,function(r,n){return Array.isArray(n)?r.push.apply(r,t.call(n,e-1)):r.push(n),r},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})});var he=j(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.ChartColors=Dt.ExpanderDirection=Dt.ExpanderState=void 0;var Ao;(function(t){t[t.PLUS=0]="PLUS",t[t.MINUS=1]="MINUS"})(Ao||(Dt.ExpanderState=Ao={}));var Co;(function(t){t[t.INDI=0]="INDI",t[t.SPOUSE=1]="SPOUSE",t[t.FAMILY=2]="FAMILY"})(Co||(Dt.ExpanderDirection=Co={}));var ko;(function(t){t[t.NO_COLOR=0]="NO_COLOR",t[t.COLOR_BY_GENERATION=1]="COLOR_BY_GENERATION",t[t.COLOR_BY_SEX=2]="COLOR_BY_SEX"})(ko||(Dt.ChartColors=ko={}))});var Pr,Le,Tr=h(()=>{Pr="http://www.w3.org/1999/xhtml",Le={svg:"http://www.w3.org/2000/svg",xhtml:Pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}});function vt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Le.hasOwnProperty(e)?{space:Le[e],local:t}:t}var Fr=h(()=>{Tr()});function uh(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Pr&&e.documentElement.namespaceURI===Pr?e.createElement(t):e.createElementNS(r,t)}}function fh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rt(t){var e=vt(t);return(e.local?fh:uh)(e)}var ze=h(()=>{Fr();Tr()});function lh(){}function Lt(t){return t==null?lh:function(){return this.querySelector(t)}}var Or=h(()=>{});function Mo(t){typeof t!="function"&&(t=Lt(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],o=a.length,s=n[i]=new Array(o),u,f,l=0;l<o;++l)(u=a[l])&&(f=t.call(u,u.__data__,l,a))&&("__data__"in u&&(f.__data__=u.__data__),s[l]=f);return new U(n,this._parents)}var Eo=h(()=>{lt();Or()});function qe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}var ni=h(()=>{});function ch(){return[]}function pe(t){return t==null?ch:function(){return this.querySelectorAll(t)}}var ii=h(()=>{});function dh(t){return function(){return qe(t.apply(this,arguments))}}function Po(t){typeof t=="function"?t=dh(t):t=pe(t);for(var e=this._groups,r=e.length,n=[],i=[],a=0;a<r;++a)for(var o=e[a],s=o.length,u,f=0;f<s;++f)(u=o[f])&&(n.push(t.call(u,u.__data__,f,o)),i.push(u));return new U(n,i)}var To=h(()=>{lt();ni();ii()});function me(t){return function(){return this.matches(t)}}function Dr(t){return function(e){return e.matches(t)}}var He=h(()=>{});function ph(t){return function(){return hh.call(this.children,t)}}function mh(){return this.firstElementChild}function Fo(t){return this.select(t==null?mh:ph(typeof t=="function"?t:Dr(t)))}var hh,Oo=h(()=>{He();hh=Array.prototype.find});function vh(){return Array.from(this.children)}function xh(t){return function(){return gh.call(this.children,t)}}function Do(t){return this.selectAll(t==null?vh:xh(typeof t=="function"?t:Dr(t)))}var gh,Ro=h(()=>{He();gh=Array.prototype.filter});function Lo(t){typeof t!="function"&&(t=me(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],o=a.length,s=n[i]=[],u,f=0;f<o;++f)(u=a[f])&&t.call(u,u.__data__,f,a)&&s.push(u);return new U(n,this._parents)}var zo=h(()=>{lt();He()});function Rr(t){return new Array(t.length)}var ai=h(()=>{});function qo(){return new U(this._enter||this._groups.map(Rr),this._parents)}function $e(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}var oi=h(()=>{ai();lt();$e.prototype={constructor:$e,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}});function Ho(t){return function(){return t}}var $o=h(()=>{});function yh(t,e,r,n,i,a){for(var o=0,s,u=e.length,f=a.length;o<f;++o)(s=e[o])?(s.__data__=a[o],n[o]=s):r[o]=new $e(t,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function _h(t,e,r,n,i,a,o){var s,u,f=new Map,l=e.length,d=a.length,c=new Array(l),p;for(s=0;s<l;++s)(u=e[s])&&(c[s]=p=o.call(u,u.__data__,s,e)+"",f.has(p)?i[s]=u:f.set(p,u));for(s=0;s<d;++s)p=o.call(t,a[s],s,a)+"",(u=f.get(p))?(n[s]=u,u.__data__=a[s],f.delete(p)):r[s]=new $e(t,a[s]);for(s=0;s<l;++s)(u=e[s])&&f.get(c[s])===u&&(i[s]=u)}function wh(t){return t.__data__}function jo(t,e){if(!arguments.length)return Array.from(this,wh);var r=e?_h:yh,n=this._parents,i=this._groups;typeof t!="function"&&(t=Ho(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),f=0;f<a;++f){var l=n[f],d=i[f],c=d.length,p=bh(t.call(l,l&&l.__data__,f,n)),v=p.length,y=s[f]=new Array(v),x=o[f]=new Array(v),S=u[f]=new Array(c);r(l,d,y,x,S,p,e);for(var g=0,_=0,b,C;g<v;++g)if(b=y[g]){for(g>=_&&(_=g+1);!(C=x[_])&&++_<v;);b._next=C||null}}return o=new U(o,n),o._enter=s,o._exit=u,o}function bh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var Bo=h(()=>{lt();oi();$o()});function Go(){return new U(this._exit||this._groups.map(Rr),this._parents)}var Uo=h(()=>{ai();lt()});function Vo(t,e,r){var n=this.enter(),i=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}var Xo=h(()=>{});function Yo(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,a=n.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var f=r[u],l=n[u],d=f.length,c=s[u]=new Array(d),p,v=0;v<d;++v)(p=f[v]||l[v])&&(c[v]=p);for(;u<i;++u)s[u]=r[u];return new U(s,this._parents)}var Wo=h(()=>{lt()});function Ko(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,a=n[i],o;--i>=0;)(o=n[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}var Jo=h(()=>{});function Qo(t){t||(t=Ih);function e(d,c){return d&&c?t(d.__data__,c.__data__):!d-!c}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o=r[a],s=o.length,u=i[a]=new Array(s),f,l=0;l<s;++l)(f=o[l])&&(u[l]=f);u.sort(e)}return new U(i,this._parents).order()}function Ih(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Zo=h(()=>{lt()});function ts(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}var es=h(()=>{});function rs(){return Array.from(this)}var ns=h(()=>{});function is(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}var as=h(()=>{});function os(){let t=0;for(let e of this)++t;return t}var ss=h(()=>{});function us(){return!this.node()}var fs=h(()=>{});function ls(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}var cs=h(()=>{});function Sh(t){return function(){this.removeAttribute(t)}}function Nh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ah(t,e){return function(){this.setAttribute(t,e)}}function Ch(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kh(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Mh(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function ds(t,e){var r=vt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?Nh:Sh:typeof e=="function"?r.local?Mh:kh:r.local?Ch:Ah)(r,e))}var hs=h(()=>{Fr()});function ge(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}var Lr=h(()=>{});function Eh(t){return function(){this.style.removeProperty(t)}}function Ph(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Th(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function ps(t,e,r){return arguments.length>1?this.each((e==null?Eh:typeof e=="function"?Th:Ph)(t,e,r??"")):Nt(this.node(),t)}function Nt(t,e){return t.style.getPropertyValue(e)||ge(t).getComputedStyle(t,null).getPropertyValue(e)}var si=h(()=>{Lr()});function Fh(t){return function(){delete this[t]}}function Oh(t,e){return function(){this[t]=e}}function Dh(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function ms(t,e){return arguments.length>1?this.each((e==null?Fh:typeof e=="function"?Dh:Oh)(t,e)):this.node()[t]}var gs=h(()=>{});function vs(t){return t.trim().split(/^|\s+/)}function ui(t){return t.classList||new xs(t)}function xs(t){this._node=t,this._names=vs(t.getAttribute("class")||"")}function ys(t,e){for(var r=ui(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function _s(t,e){for(var r=ui(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function Rh(t){return function(){ys(this,t)}}function Lh(t){return function(){_s(this,t)}}function zh(t,e){return function(){(e.apply(this,arguments)?ys:_s)(this,t)}}function ws(t,e){var r=vs(t+"");if(arguments.length<2){for(var n=ui(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?zh:e?Rh:Lh)(r,e))}var bs=h(()=>{xs.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}});function qh(){this.textContent=""}function Hh(t){return function(){this.textContent=t}}function $h(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Is(t){return arguments.length?this.each(t==null?qh:(typeof t=="function"?$h:Hh)(t)):this.node().textContent}var Ss=h(()=>{});function jh(){this.innerHTML=""}function Bh(t){return function(){this.innerHTML=t}}function Gh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ns(t){return arguments.length?this.each(t==null?jh:(typeof t=="function"?Gh:Bh)(t)):this.node().innerHTML}var As=h(()=>{});function Uh(){this.nextSibling&&this.parentNode.appendChild(this)}function Cs(){return this.each(Uh)}var ks=h(()=>{});function Vh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ms(){return this.each(Vh)}var Es=h(()=>{});function Ps(t){var e=typeof t=="function"?t:Rt(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}var Ts=h(()=>{ze()});function Xh(){return null}function Fs(t,e){var r=typeof t=="function"?t:Rt(t),n=e==null?Xh:typeof e=="function"?e:Lt(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}var Os=h(()=>{ze();Or()});function Yh(){var t=this.parentNode;t&&t.removeChild(this)}function Ds(){return this.each(Yh)}var Rs=h(()=>{});function Wh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ls(t){return this.select(t?Kh:Wh)}var zs=h(()=>{});function qs(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Hs=h(()=>{});function Jh(t){return function(e){t.call(this,e,this.__data__)}}function Qh(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Zh(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,a;r<i;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function tp(t,e,r){return function(){var n=this.__on,i,a=Jh(e);if(n){for(var o=0,s=n.length;o<s;++o)if((i=n[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=e;return}}this.addEventListener(t.type,a,r),i={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(i):this.__on=[i]}}function $s(t,e,r){var n=Qh(t+""),i,a=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,f=s.length,l;u<f;++u)for(i=0,l=s[u];i<a;++i)if((o=n[i]).type===l.type&&o.name===l.name)return l.value}return}for(s=e?tp:Zh,i=0;i<a;++i)this.each(s(n[i],e,r));return this}var js=h(()=>{});function Bs(t,e,r){var n=ge(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ep(t,e){return function(){return Bs(this,t,e)}}function rp(t,e){return function(){return Bs(this,t,e.apply(this,arguments))}}function Gs(t,e){return this.each((typeof e=="function"?rp:ep)(t,e))}var Us=h(()=>{Lr()});function*Vs(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length,o;i<a;++i)(o=n[i])&&(yield o)}var Xs=h(()=>{});function U(t,e){this._groups=t,this._parents=e}function Ys(){return new U([[document.documentElement]],je)}function np(){return this}var je,xt,lt=h(()=>{Eo();To();Oo();Ro();zo();Bo();oi();Uo();Xo();Wo();Jo();Zo();es();ns();as();ss();fs();cs();hs();si();gs();bs();Ss();As();ks();Es();Ts();Os();Rs();zs();Hs();js();Us();Xs();je=[null];U.prototype=Ys.prototype={constructor:U,select:Mo,selectAll:Po,selectChild:Fo,selectChildren:Do,filter:Lo,data:jo,enter:qo,exit:Go,join:Vo,merge:Yo,selection:np,order:Ko,sort:Qo,call:ts,nodes:rs,node:is,size:os,empty:us,each:ls,attr:ds,style:ps,property:ms,classed:ws,text:Is,html:Ns,raise:Cs,lower:Ms,append:Ps,insert:Fs,remove:Ds,clone:Ls,datum:qs,on:$s,dispatch:Gs,[Symbol.iterator]:Vs};xt=Ys});function zr(t){return typeof t=="string"?new U([[document.querySelector(t)]],[document.documentElement]):new U([[t]],je)}var fi=h(()=>{lt()});function Ws(t){return zr(Rt(t).call(document.documentElement))}var Ks=h(()=>{ze();fi()});function qr(){return new li}function li(){this._="@"+(++ip).toString(36)}var ip,Js=h(()=>{ip=0;li.prototype=qr.prototype={constructor:li,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}});function Hr(t){let e;for(;e=t.sourceEvent;)t=e;return t}var ci=h(()=>{});function $r(t,e){if(t=Hr(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var di=h(()=>{ci()});function Qs(t,e){return t.target&&(t=Hr(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,r=>$r(r,e))}var Zs=h(()=>{di();ci()});function tu(t){return typeof t=="string"?new U([document.querySelectorAll(t)],[document.documentElement]):new U([qe(t)],je)}var eu=h(()=>{ni();lt()});var Be={};Er(Be,{create:()=>Ws,creator:()=>Rt,local:()=>qr,matcher:()=>me,namespace:()=>vt,namespaces:()=>Le,pointer:()=>$r,pointers:()=>Qs,select:()=>zr,selectAll:()=>tu,selection:()=>xt,selector:()=>Lt,selectorAll:()=>pe,style:()=>Nt,window:()=>ge});var it=h(()=>{Ks();ze();Js();He();Fr();Tr();di();Zs();fi();eu();lt();Or();ii();si();Lr()});var nu=j((jr,ru)=>{(function(t,e){typeof jr=="object"&&typeof ru<"u"?e(jr):typeof define=="function"&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})})(jr,function(t){"use strict";function e(w){var m=0,N=w.children,I=N&&N.length;if(!I)m=1;else for(;--I>=0;)m+=N[I].value;w.value=m}function r(){return this.eachAfter(e)}function n(w){var m=this,N,I=[m],A,T,E;do for(N=I.reverse(),I=[];m=N.pop();)if(w(m),A=m.children,A)for(T=0,E=A.length;T<E;++T)I.push(A[T]);while(I.length);return this}function i(w){for(var m=this,N=[m],I,A;m=N.pop();)if(w(m),I=m.children,I)for(A=I.length-1;A>=0;--A)N.push(I[A]);return this}function a(w){for(var m=this,N=[m],I=[],A,T,E;m=N.pop();)if(I.push(m),A=m.children,A)for(T=0,E=A.length;T<E;++T)N.push(A[T]);for(;m=I.pop();)w(m);return this}function o(w){return this.eachAfter(function(m){for(var N=+w(m.data)||0,I=m.children,A=I&&I.length;--A>=0;)N+=I[A].value;m.value=N})}function s(w){return this.eachBefore(function(m){m.children&&m.children.sort(w)})}function u(w){for(var m=this,N=f(m,w),I=[m];m!==N;)m=m.parent,I.push(m);for(var A=I.length;w!==N;)I.splice(A,0,w),w=w.parent;return I}function f(w,m){if(w===m)return w;var N=w.ancestors(),I=m.ancestors(),A=null;for(w=N.pop(),m=I.pop();w===m;)A=w,w=N.pop(),m=I.pop();return A}function l(){for(var w=this,m=[w];w=w.parent;)m.push(w);return m}function d(){var w=[];return this.each(function(m){w.push(m)}),w}function c(){var w=[];return this.eachBefore(function(m){m.children||w.push(m)}),w}function p(){var w=this,m=[];return w.each(function(N){N!==w&&m.push({source:N.parent,target:N})}),m}function v(w,m){var N=new _(w),I=+w.value&&(N.value=w.value),A,T=[N],E,P,k,G;for(m==null&&(m=x);A=T.pop();)if(I&&(A.value=+A.data.value),(P=m(A.data))&&(G=P.length))for(A.children=new Array(G),k=G-1;k>=0;--k)T.push(E=A.children[k]=new _(P[k])),E.parent=A,E.depth=A.depth+1;return N.eachBefore(g)}function y(){return v(this).eachBefore(S)}function x(w){return w.children}function S(w){w.data=w.data.data}function g(w){var m=0;do w.height=m;while((w=w.parent)&&w.height<++m)}function _(w){this.data=w,this.depth=this.height=0,this.parent=null}_.prototype=v.prototype={constructor:_,count:r,each:n,eachAfter:a,eachBefore:i,sum:o,sort:s,path:u,ancestors:l,descendants:d,leaves:c,links:p,copy:y};var b="d3-flextree",C="2.1.2",M="build/d3-flextree.js",D="index",O={name:"Chris Maloney",url:"http://chrismaloney.org"},R="Flexible tree layout algorithm that allows for variable node sizes.",H=["d3","d3-module","layout","tree","hierarchy","d3-hierarchy","plugin","d3-plugin","infovis","visualization","2d"],$="https://github.com/klortho/d3-flextree",gt="WTFPL",Ot={type:"git",url:"https://github.com/klortho/d3-flextree.git"},kr={clean:"rm -rf build demo test","build:demo":"rollup -c --environment BUILD:demo","build:dev":"rollup -c --environment BUILD:dev","build:prod":"rollup -c --environment BUILD:prod","build:test":"rollup -c --environment BUILD:test",build:"rollup -c",lint:"eslint index.js src","test:main":"node test/bundle.js","test:browser":"node test/browser-tests.js",test:"npm-run-all test:*",prepare:"npm-run-all clean build lint test"},qd={"d3-hierarchy":"^1.1.5"},Hd={"babel-plugin-external-helpers":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0",d3:"^4.13.0","d3-selection-multi":"^1.0.1",eslint:"^4.19.1",jsdom:"^11.6.2","npm-run-all":"^4.1.2",rollup:"^0.55.3","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^8.0.2","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.2","rollup-plugin-uglify":"^3.0.0","uglify-es":"^3.3.9"},$d={name:b,version:C,main:M,module:D,author:O,description:R,keywords:H,homepage:$,license:gt,repository:Ot,scripts:kr,dependencies:qd,devDependencies:Hd,"jsnext:main":"index"},xo=function(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")},yo=function(){function w(m,N){for(var I=0;I<N.length;I++){var A=N[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,N,I){return N&&w(m.prototype,N),I&&w(m,I),m}}(),_o=function(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)},wo=function(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w},bo=function(){function w(m,N){var I=[],A=!0,T=!1,E=void 0;try{for(var P=m[Symbol.iterator](),k;!(A=(k=P.next()).done)&&(I.push(k.value),!(N&&I.length===N));A=!0);}catch(G){T=!0,E=G}finally{try{!A&&P.return&&P.return()}finally{if(T)throw E}}return I}return function(m,N){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return w(m,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),jd=$d.version,Bd=Object.freeze({children:function(m){return m.children},nodeSize:function(m){return m.data.size},spacing:0});function Io(w){var m=Object.assign({},Bd,w);function N(P){var k=m[P];return typeof k=="function"?k:function(){return k}}function I(P){var k=E(T(),P,function(G){return G.children});return k.update(),k.data}function A(){var P=N("nodeSize"),k=N("spacing");return function(G){_o(W,G);function W(F){return xo(this,W),wo(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,F))}return yo(W,[{key:"copy",value:function(){var z=E(this.constructor,this,function(L){return L.children});return z.each(function(L){return L.data=L.data.data}),z}},{key:"spacing",value:function(z){return k(this,z)}},{key:"size",get:function(){return P(this)}},{key:"nodes",get:function(){return this.descendants()}},{key:"xSize",get:function(){return this.size[0]}},{key:"ySize",get:function(){return this.size[1]}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.ySize}},{key:"left",get:function(){return this.x-this.xSize/2}},{key:"right",get:function(){return this.x+this.xSize/2}},{key:"root",get:function(){var z=this.ancestors();return z[z.length-1]}},{key:"numChildren",get:function(){return this.hasChildren?this.children.length:0}},{key:"hasChildren",get:function(){return!this.noChildren}},{key:"noChildren",get:function(){return this.children===null}},{key:"firstChild",get:function(){return this.hasChildren?this.children[0]:null}},{key:"lastChild",get:function(){return this.hasChildren?this.children[this.numChildren-1]:null}},{key:"extents",get:function(){return(this.children||[]).reduce(function(z,L){return W.maxExtents(z,L.extents)},this.nodeExtents)}},{key:"nodeExtents",get:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}],[{key:"maxExtents",value:function(z,L){return{top:Math.min(z.top,L.top),bottom:Math.max(z.bottom,L.bottom),left:Math.min(z.left,L.left),right:Math.max(z.right,L.right)}}}]),W}(v.prototype.constructor)}function T(){var P=A(),k=N("nodeSize"),G=N("spacing");return function(W){_o(F,W);function F(z){xo(this,F);var L=wo(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,z));return Object.assign(L,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:L,lExtRelX:0,lThr:null,rExt:L,rExtRelX:0,rThr:null}),L}return yo(F,[{key:"spacing",value:function(L){return G(this.data,L.data)}},{key:"update",value:function(){return Gd(this),Ud(this),this}},{key:"size",get:function(){return k(this.data)}},{key:"x",get:function(){return this.data.x},set:function(L){this.data.x=L}},{key:"y",get:function(){return this.data.y},set:function(L){this.data.y=L}}]),F}(P)}function E(P,k,G){var W=function F(z,L){var ft=new P(z);Object.assign(ft,{parent:L,depth:L===null?0:L.depth+1,height:0,length:1});var ce=G(z)||[];return ft.children=ce.length===0?null:ce.map(function(de){return F(de,ft)}),ft.children&&Object.assign(ft,ft.children.reduce(function(de,Mr){return{height:Math.max(de.height,Mr.height+1),length:de.length+Mr.length}},ft)),ft};return W(k,null)}return Object.assign(I,{nodeSize:function(k){return arguments.length?(m.nodeSize=k,I):m.nodeSize},spacing:function(k){return arguments.length?(m.spacing=k,I):m.spacing},children:function(k){return arguments.length?(m.children=k,I):m.children},hierarchy:function(k,G){var W=typeof G>"u"?m.children:G;return E(A(),k,W)},dump:function(k){var G=N("nodeSize"),W=function F(z){return function(L){var ft=z+"  ",ce=z+"    ",de=L.x,Mr=L.y,rh=G(L),So=L.children||[],nh=So.length===0?" ":","+ft+"children: ["+ce+So.map(F(ce)).join(ce)+ft+"],"+z;return"{ size: ["+rh.join(", ")+"],"+ft+"x: "+de+", y: "+Mr+nh+"},"}};return W(`
`)(k)}}),I}Io.version=jd;var Gd=function w(m){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return m.y=N,(m.children||[]).reduce(function(I,A){var T=bo(I,2),E=T[0],P=T[1];w(A,m.y+m.ySize);var k=(E===0?A.lExt:A.rExt).bottom;E!==0&&Xd(m,E,P);var G=eh(k,E,P);return[E+1,G]},[0,null]),Vd(m),th(m),m},Ud=function w(m,N,I){typeof N>"u"&&(N=-m.relX-m.prelim,I=0);var A=N+m.relX;return m.relX=A+m.prelim-I,m.prelim=0,m.x=I+m.relX,(m.children||[]).forEach(function(T){return w(T,A,m.x)}),m},Vd=function(m){(m.children||[]).reduce(function(N,I){var A=bo(N,2),T=A[0],E=A[1],P=T+I.shift,k=E+P+I.change;return I.relX+=k,[P,k]},[0,0])},Xd=function(m,N,I){for(var A=m.children[N-1],T=m.children[N],E=A,P=A.relX,k=T,G=T.relX,W=!0;E&&k;){E.bottom>I.lowY&&(I=I.next);var F=P+E.prelim-(G+k.prelim)+E.xSize/2+k.xSize/2+E.spacing(k);(F>0||F<0&&W)&&(G+=F,Yd(T,F),Wd(m,N,I.index,F)),W=!1;var z=E.bottom,L=k.bottom;z<=L&&(E=Jd(E),E&&(P+=E.relX)),z>=L&&(k=Kd(k),k&&(G+=k.relX))}!E&&k?Qd(m,N,k,G):E&&!k&&Zd(m,N,E,P)},Yd=function(m,N){m.relX+=N,m.lExtRelX+=N,m.rExtRelX+=N},Wd=function(m,N,I,A){var T=m.children[N],E=N-I;if(E>1){var P=A/E;m.children[I+1].shift+=P,T.shift-=P,T.change-=A-P}},Kd=function(m){return m.hasChildren?m.firstChild:m.lThr},Jd=function(m){return m.hasChildren?m.lastChild:m.rThr},Qd=function(m,N,I,A){var T=m.firstChild,E=T.lExt,P=m.children[N];E.lThr=I;var k=A-I.relX-T.lExtRelX;E.relX+=k,E.prelim-=k,T.lExt=P.lExt,T.lExtRelX=P.lExtRelX},Zd=function(m,N,I,A){var T=m.children[N],E=T.rExt,P=m.children[N-1];E.rThr=I;var k=A-I.relX-T.rExtRelX;E.relX+=k,E.prelim-=k,T.rExt=P.rExt,T.rExtRelX=P.rExtRelX},th=function(m){if(m.hasChildren){var N=m.firstChild,I=m.lastChild,A=(N.prelim+N.relX-N.xSize/2+I.relX+I.prelim+I.xSize/2)/2;Object.assign(m,{prelim:A,lExt:N.lExt,lExtRelX:N.lExtRelX,rExt:I.rExt,rExtRelX:I.rExtRelX})}},eh=function(m,N,I){for(;I!==null&&m>=I.lowY;)I=I.next;return{lowY:m,index:N,next:I}};t.flextree=Io,Object.defineProperty(t,"__esModule",{value:!0})})});function q(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}var ht=h(()=>{});function Ge(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}var hi=h(()=>{});function ve(t){let e,r,n;t.length!==2?(e=q,r=(s,u)=>q(t(s),u),n=(s,u)=>t(s)-u):(e=t===q||t===Ge?t:ap,r=t,n=t);function i(s,u,f=0,l=s.length){if(f<l){if(e(u,u)!==0)return l;do{let d=f+l>>>1;r(s[d],u)<0?f=d+1:l=d}while(f<l)}return f}function a(s,u,f=0,l=s.length){if(f<l){if(e(u,u)!==0)return l;do{let d=f+l>>>1;r(s[d],u)<=0?f=d+1:l=d}while(f<l)}return f}function o(s,u,f=0,l=s.length){let d=i(s,u,f,l-1);return d>f&&n(s[d-1],u)>-n(s[d],u)?d-1:d}return{left:i,center:o,right:a}}function ap(){return 0}var pi=h(()=>{ht();hi()});function Wt(t){return t===null?NaN:+t}function*iu(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}var mi=h(()=>{});var au,gi,ou,su,Br,vi=h(()=>{ht();pi();mi();au=ve(q),gi=au.right,ou=au.left,su=ve(Wt).center,Br=gi});function uu(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let r=t.length;if(!((r=Math.floor(r))>=0))throw new RangeError("invalid length");if(!r||!e)return t;let n=xi(e),i=t.slice();return n(t,i,0,r,1),n(i,t,0,r,1),n(t,i,0,r,1),t}function cu(t){return function(e,r,n=r){if(!((r=+r)>=0))throw new RangeError("invalid rx");if(!((n=+n)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!r&&!n)return e;let s=r&&t(r),u=n&&t(n),f=i.slice();return s&&u?(xe(s,f,i,a,o),xe(s,i,f,a,o),xe(s,f,i,a,o),ye(u,i,f,a,o),ye(u,f,i,a,o),ye(u,i,f,a,o)):s?(xe(s,i,f,a,o),xe(s,f,i,a,o),xe(s,i,f,a,o)):u&&(ye(u,i,f,a,o),ye(u,f,i,a,o),ye(u,i,f,a,o)),e}}function xe(t,e,r,n,i){for(let a=0,o=n*i;a<o;)t(e,r,a,a+=n,1)}function ye(t,e,r,n,i){for(let a=0,o=n*i;a<n;++a)t(e,r,a,a+o,n)}function op(t){let e=xi(t);return(r,n,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(r,n,i+0,a+0,o),e(r,n,i+1,a+1,o),e(r,n,i+2,a+2,o),e(r,n,i+3,a+3,o)}}function xi(t){let e=Math.floor(t);if(e===t)return sp(t);let r=t-e,n=2*t+1;return(i,a,o,s,u)=>{if(!((s-=u)>=o))return;let f=e*a[o],l=u*e,d=l+u;for(let c=o,p=o+l;c<p;c+=u)f+=a[Math.min(s,c)];for(let c=o,p=s;c<=p;c+=u)f+=a[Math.min(s,c+l)],i[c]=(f+r*(a[Math.max(o,c-d)]+a[Math.min(s,c+d)]))/n,f-=a[Math.max(o,c-l)]}}function sp(t){let e=2*t+1;return(r,n,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*n[i],u=o*t;for(let f=i,l=i+u;f<l;f+=o)s+=n[Math.min(a,f)];for(let f=i,l=a;f<=l;f+=o)s+=n[Math.min(a,f+u)],r[f]=s/e,s-=n[Math.max(i,f-u)]}}var fu,lu,du=h(()=>{fu=cu(xi),lu=cu(op)});function At(t,e){let r=0;if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&++r;else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&++r}return r}var Ue=h(()=>{});function up(t){return t.length|0}function fp(t){return!(t>0)}function lp(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function cp(t){return e=>t(...e)}function yi(...t){let e=typeof t[t.length-1]=="function"&&cp(t.pop());t=t.map(lp);let r=t.map(up),n=t.length-1,i=new Array(n+1).fill(0),a=[];if(n<0||r.some(fp))return a;for(;;){a.push(i.map((s,u)=>t[u][s]));let o=n;for(;++i[o]===r[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}var hu=h(()=>{});function _i(t,e){var r=0,n=0;return Float64Array.from(t,e===void 0?i=>r+=+i||0:i=>r+=+e(i,n++,t)||0)}var pu=h(()=>{});function Ve(t,e){let r=0,n,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(n=o-i,i+=n/++r,a+=n*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(n=s-i,i+=n/++r,a+=n*(s-i))}if(r>1)return a/(r-1)}var wi=h(()=>{});function Xe(t,e){let r=Ve(t,e);return r&&Math.sqrt(r)}var bi=h(()=>{wi()});function Kt(t,e){let r,n;if(e===void 0)for(let i of t)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(r===void 0?a>=a&&(r=n=a):(r>a&&(r=a),n<a&&(n=a)))}return[r,n]}var Ii=h(()=>{});function mu(t,e){let r=new _e;if(e===void 0)for(let n of t)(n=+n)&&r.add(n);else{let n=-1;for(let i of t)(i=+e(i,++n,t))&&r.add(i)}return+r}function gu(t,e){let r=new _e,n=-1;return Float64Array.from(t,e===void 0?i=>r.add(+i||0):i=>r.add(+e(i,++n,t)||0))}var _e,vu=h(()=>{_e=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let r=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let a=r[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(r[n++]=s),e=o}return r[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,r=this._n,n,i,a,o=0;if(r>0){for(o=e[--r];r>0&&(n=o,i=e[--r],o=n+i,a=i-(o-n),!a););r>0&&(a<0&&e[r-1]<0||a>0&&e[r-1]>0)&&(i=a*2,n=o+i,i==n-o&&(o=n))}return o}}});function Si({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function xu({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function yu({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function _u(t){return t!==null&&typeof t=="object"?t.valueOf():t}var zt,at,qt=h(()=>{zt=class extends Map{constructor(e,r=_u){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,i]of e)this.set(n,i)}get(e){return super.get(Si(this,e))}has(e){return super.has(Si(this,e))}set(e,r){return super.set(xu(this,e),r)}delete(e){return super.delete(yu(this,e))}},at=class extends Set{constructor(e,r=_u){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let n of e)this.add(n)}has(e){return super.has(Si(this,e))}add(e){return super.add(xu(this,e))}delete(e){return super.delete(yu(this,e))}}});function Ct(t){return t}var Ni=h(()=>{});function Ye(t,...e){return we(t,Ct,Ct,e)}function Ai(t,...e){return we(t,Array.from,Ct,e)}function wu(t,e){for(let r=1,n=e.length;r<n;++r)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function bu(t,...e){return wu(Ai(t,...e),e)}function Iu(t,e,...r){return wu(Ci(t,e,...r),r)}function Gr(t,e,...r){return we(t,Ct,e,r)}function Ci(t,e,...r){return we(t,Array.from,e,r)}function Su(t,...e){return we(t,Ct,Au,e)}function Nu(t,...e){return we(t,Array.from,Au,e)}function Au(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function we(t,e,r,n){return function i(a,o){if(o>=n.length)return r(a);let s=new zt,u=n[o++],f=-1;for(let l of a){let d=u(l,++f,a),c=s.get(d);c?c.push(l):s.set(d,[l])}for(let[l,d]of s)s.set(l,i(d,o));return e(s)}(t,0)}var ki=h(()=>{qt();Ni()});function We(t,e){return Array.from(e,r=>t[r])}var Mi=h(()=>{});function be(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[r]=e;if(r&&r.length!==2||e.length>1){let n=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),n.sort((i,a)=>{for(let o of e){let s=kt(o[i],o[a]);if(s)return s}})):(r=t.map(r),n.sort((i,a)=>kt(r[i],r[a]))),We(t,n)}return t.sort(Ke(r))}function Ke(t=q){if(t===q)return kt;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{let n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function kt(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var Ie=h(()=>{ht();Mi()});function Ei(t,e,r){return(e.length!==2?be(Gr(t,e,r),([n,i],[a,o])=>q(i,o)||q(n,a)):be(Ye(t,r),([n,i],[a,o])=>e(i,o)||q(n,a))).map(([n])=>n)}var Cu=h(()=>{ht();ki();Ie()});var ku,Mu,Uy,Eu=h(()=>{ku=Array.prototype,Mu=ku.slice,Uy=ku.map});function Je(t){return()=>t}var Pu=h(()=>{});function Ur(t,e,r){let n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=dp?10:a>=hp?5:a>=pp?2:1,s,u,f;return i<0?(f=Math.pow(10,-i)/o,s=Math.round(t*f),u=Math.round(e*f),s/f<t&&++s,u/f>e&&--u,f=-f):(f=Math.pow(10,i)*o,s=Math.round(t/f),u=Math.round(e/f),s*f<t&&++s,u*f>e&&--u),u<s&&.5<=r&&r<2?Ur(t,e,r*2):[s,u,f]}function Qe(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[i,a,o]=n?Ur(e,t,r):Ur(t,e,r);if(!(a>=i))return[];let s=a-i+1,u=new Array(s);if(n)if(o<0)for(let f=0;f<s;++f)u[f]=(a-f)/-o;else for(let f=0;f<s;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<s;++f)u[f]=(i+f)/-o;else for(let f=0;f<s;++f)u[f]=(i+f)*o;return u}function Mt(t,e,r){return e=+e,t=+t,r=+r,Ur(t,e,r)[2]}function Tu(t,e,r){e=+e,t=+t,r=+r;let n=e<t,i=n?Mt(e,t,r):Mt(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}var dp,hp,pp,Vr=h(()=>{dp=Math.sqrt(50),hp=Math.sqrt(10),pp=Math.sqrt(2)});function Ze(t,e,r){let n;for(;;){let i=Mt(t,e,r);if(i===n||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),n=i}}var Pi=h(()=>{Vr()});function tr(t){return Math.max(1,Math.ceil(Math.log(At(t))/Math.LN2)+1)}var Ti=h(()=>{Ue()});function Xr(){var t=Ct,e=Kt,r=tr;function n(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,u,f=new Array(o);for(a=0;a<o;++a)f[a]=t(i[a],a,i);var l=e(f),d=l[0],c=l[1],p=r(f,d,c);if(!Array.isArray(p)){let _=c,b=+p;if(e===Kt&&([d,c]=Ze(d,c,b)),p=Qe(d,c,b),p[0]<=d&&(u=Mt(d,c,b)),p[p.length-1]>=c)if(_>=c&&e===Kt){let C=Mt(d,c,b);isFinite(C)&&(C>0?c=(Math.floor(c/C)+1)*C:C<0&&(c=(Math.ceil(c*-C)+1)/-C))}else p.pop()}for(var v=p.length,y=0,x=v;p[y]<=d;)++y;for(;p[x-1]>c;)--x;(y||x<v)&&(p=p.slice(y,x),v=x-y);var S=new Array(v+1),g;for(a=0;a<=v;++a)g=S[a]=[],g.x0=a>0?p[a-1]:d,g.x1=a<v?p[a]:c;if(isFinite(u)){if(u>0)for(a=0;a<o;++a)(s=f[a])!=null&&d<=s&&s<=c&&S[Math.min(v,Math.floor((s-d)/u))].push(i[a]);else if(u<0){for(a=0;a<o;++a)if((s=f[a])!=null&&d<=s&&s<=c){let _=Math.floor((d-s)*u);S[Math.min(v,_+(p[_]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=f[a])!=null&&d<=s&&s<=c&&S[Br(p,s,0,v)].push(i[a]);return S}return n.value=function(i){return arguments.length?(t=typeof i=="function"?i:Je(i),n):t},n.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Je([i[0],i[1]]),n):e},n.thresholds=function(i){return arguments.length?(r=typeof i=="function"?i:Je(Array.isArray(i)?Mu.call(i):i),n):r},n}var Fu=h(()=>{Eu();vi();Pu();Ii();Ni();Pi();Vr();Ti()});function Se(t,e){let r;if(e===void 0)for(let n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}var Fi=h(()=>{});function Jt(t,e){let r,n=-1,i=-1;if(e===void 0)for(let a of t)++i,a!=null&&(r<a||r===void 0&&a>=a)&&(r=a,n=i);else for(let a of t)(a=e(a,++i,t))!=null&&(r<a||r===void 0&&a>=a)&&(r=a,n=i);return n}var Yr=h(()=>{});function Ht(t,e){let r;if(e===void 0)for(let n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}var Wr=h(()=>{});function Qt(t,e){let r,n=-1,i=-1;if(e===void 0)for(let a of t)++i,a!=null&&(r>a||r===void 0&&a>=a)&&(r=a,n=i);else for(let a of t)(a=e(a,++i,t))!=null&&(r>a||r===void 0&&a>=a)&&(r=a,n=i);return n}var Kr=h(()=>{});function Zt(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?kt:Ke(i);n>r;){if(n-r>600){let u=n-r+1,f=e-r+1,l=Math.log(u),d=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*d*(u-d)/u)*(f-u/2<0?-1:1),p=Math.max(r,Math.floor(e-f*d/u+c)),v=Math.min(n,Math.floor(e+(u-f)*d/u+c));Zt(t,e,p,v,i)}let a=t[e],o=r,s=n;for(er(t,r,e),i(t[n],a)>0&&er(t,r,n);o<s;){for(er(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[r],a)===0?er(t,r,s):(++s,er(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function er(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}var Oi=h(()=>{Ie()});function rr(t,e=q){let r,n=!1;if(e.length===1){let i;for(let a of t){let o=e(a);(n?q(o,i)>0:q(o,o)===0)&&(r=a,i=o,n=!0)}}else for(let i of t)(n?e(i,r)>0:e(i,i)===0)&&(r=i,n=!0);return r}var Di=h(()=>{ht()});function $t(t,e,r){if(t=Float64Array.from(iu(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return Ht(t);if(e>=1)return Se(t);var n,i=(n-1)*e,a=Math.floor(i),o=Se(Zt(t,a).subarray(0,a+1)),s=Ht(t.subarray(a+1));return o+(s-o)*(i-a)}}function Ou(t,e,r=Wt){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),s=+r(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Jr(t,e,r=Wt){if(!isNaN(e=+e)){if(n=Float64Array.from(t,(s,u)=>Wt(r(t[u],u,t))),e<=0)return Qt(n);if(e>=1)return Jt(n);var n,i=Uint32Array.from(t,(s,u)=>u),a=n.length-1,o=Math.floor(a*e);return Zt(i,o,0,a,(s,u)=>kt(n[s],n[u])),o=rr(i.subarray(0,o+1),s=>n[s]),o>=0?o:-1}}var Qr=h(()=>{Fi();Yr();Wr();Kr();Oi();mi();Ie();Di()});function Ri(t,e,r){let n=At(t),i=$t(t,.75)-$t(t,.25);return n&&i?Math.ceil((r-e)/(2*i*Math.pow(n,-1/3))):1}var Du=h(()=>{Ue();Qr()});function Li(t,e,r){let n=At(t),i=Xe(t);return n&&i?Math.ceil((r-e)*Math.cbrt(n)/(3.49*i)):1}var Ru=h(()=>{Ue();bi()});function zi(t,e){let r=0,n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++r,n+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++r,n+=a)}if(r)return n/r}var Lu=h(()=>{});function qi(t,e){return $t(t,.5,e)}function zu(t,e){return Jr(t,.5,e)}var qu=h(()=>{Qr()});function*mp(t){for(let e of t)yield*e}function Hi(t){return Array.from(mp(t))}var Hu=h(()=>{});function $i(t,e){let r=new zt;if(e===void 0)for(let a of t)a!=null&&a>=a&&r.set(a,(r.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&r.set(o,(r.get(o)||0)+1)}let n,i=0;for(let[a,o]of r)o>i&&(i=o,n=a);return n}var $u=h(()=>{qt()});function ji(t,e=gp){let r=[],n,i=!1;for(let a of t)i&&r.push(e(n,a)),n=a,i=!0;return r}function gp(t,e){return[t,e]}var ju=h(()=>{});function Bi(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}var Bu=h(()=>{});function Gi(t,e=q){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let r=Array.from(t),n=new Float64Array(r.length);e.length!==2&&(r=r.map(e),e=q);let i=(s,u)=>e(r[s],r[u]),a,o;return t=Uint32Array.from(r,(s,u)=>u),t.sort(e===q?(s,u)=>kt(r[s],r[u]):Ke(i)),t.forEach((s,u)=>{let f=i(s,a===void 0?s:a);f>=0?((a===void 0||f>0)&&(a=s,o=u),n[s]=o):n[s]=NaN}),n}var Gu=h(()=>{ht();Ie()});function Ui(t,e=q){let r,n=!1;if(e.length===1){let i;for(let a of t){let o=e(a);(n?q(o,i)<0:q(o,o)===0)&&(r=a,i=o,n=!0)}}else for(let i of t)(n?e(i,r)<0:e(i,i)===0)&&(r=i,n=!0);return r}var Uu=h(()=>{ht()});function nr(t,e=q){if(e.length===1)return Qt(t,e);let r,n=-1,i=-1;for(let a of t)++i,(n<0?e(a,a)===0:e(a,r)<0)&&(r=a,n=i);return n}var Vi=h(()=>{ht();Kr()});function Xi(t,e=q){if(e.length===1)return Jt(t,e);let r,n=-1,i=-1;for(let a of t)++i,(n<0?e(a,a)===0:e(a,r)>0)&&(r=a,n=i);return n}var Vu=h(()=>{ht();Yr()});function Yi(t,e){let r=nr(t,e);return r<0?void 0:r}var Xu=h(()=>{Vi()});function Wi(t){return function(r,n=0,i=r.length){let a=i-(n=+n);for(;a;){let o=t()*a--|0,s=r[a+n];r[a+n]=r[o+n],r[o+n]=s}return r}}var Yu,Wu=h(()=>{Yu=Wi(Math.random)});function Ki(t,e){let r=0;if(e===void 0)for(let n of t)(n=+n)&&(r+=n);else{let n=-1;for(let i of t)(i=+e(i,++n,t))&&(r+=i)}return r}var Ku=h(()=>{});function ir(t){if(!(a=t.length))return[];for(var e=-1,r=Ht(t,vp),n=new Array(r);++e<r;)for(var i=-1,a,o=n[e]=new Array(a);++i<a;)o[i]=t[i][e];return n}function vp(t){return t.length}var Ji=h(()=>{Wr()});function Qi(){return ir(arguments)}var Ju=h(()=>{Ji()});function Zi(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let r=-1;for(let n of t)if(!e(n,++r,t))return!1;return!0}var Qu=h(()=>{});function ta(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let r=-1;for(let n of t)if(e(n,++r,t))return!0;return!1}var Zu=h(()=>{});function ea(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let r=[],n=-1;for(let i of t)e(i,++n,t)&&r.push(i);return r}var tf=h(()=>{});function ra(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(r,n)=>e(r,n,t))}var ef=h(()=>{});function na(t,e,r){if(typeof e!="function")throw new TypeError("reducer is not a function");let n=t[Symbol.iterator](),i,a,o=-1;if(arguments.length<3){if({done:i,value:r}=n.next(),i)return;++o}for(;{done:i,value:a}=n.next(),!i;)r=e(r,a,++o,t);return r}var rf=h(()=>{});function ia(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}var nf=h(()=>{});function aa(t,...e){t=new at(t);for(let r of e)for(let n of r)t.delete(n);return t}var af=h(()=>{qt()});function oa(t,e){let r=e[Symbol.iterator](),n=new at;for(let i of t){if(n.has(i))return!1;let a,o;for(;({value:a,done:o}=r.next())&&!o;){if(Object.is(i,a))return!1;n.add(a)}}return!0}var of=h(()=>{qt()});function sa(t,...e){t=new at(t),e=e.map(xp);t:for(let r of t)for(let n of e)if(!n.has(r)){t.delete(r);continue t}return t}function xp(t){return t instanceof at?t:new at(t)}var sf=h(()=>{qt()});function ar(t,e){let r=t[Symbol.iterator](),n=new Set;for(let i of e){let a=uf(i);if(n.has(a))continue;let o,s;for(;{value:o,done:s}=r.next();){if(s)return!1;let u=uf(o);if(n.add(u),Object.is(a,u))break}}return!0}function uf(t){return t!==null&&typeof t=="object"?t.valueOf():t}var ua=h(()=>{});function fa(t,e){return ar(e,t)}var ff=h(()=>{ua()});function la(...t){let e=new at;for(let r of t)for(let n of r)e.add(n);return e}var lf=h(()=>{qt()});var te={};Er(te,{Adder:()=>_e,InternMap:()=>zt,InternSet:()=>at,ascending:()=>q,bin:()=>Xr,bisect:()=>Br,bisectCenter:()=>su,bisectLeft:()=>ou,bisectRight:()=>gi,bisector:()=>ve,blur:()=>uu,blur2:()=>fu,blurImage:()=>lu,count:()=>At,cross:()=>yi,cumsum:()=>_i,descending:()=>Ge,deviation:()=>Xe,difference:()=>aa,disjoint:()=>oa,every:()=>Zi,extent:()=>Kt,fcumsum:()=>gu,filter:()=>ea,flatGroup:()=>bu,flatRollup:()=>Iu,fsum:()=>mu,greatest:()=>rr,greatestIndex:()=>Xi,group:()=>Ye,groupSort:()=>Ei,groups:()=>Ai,histogram:()=>Xr,index:()=>Su,indexes:()=>Nu,intersection:()=>sa,least:()=>Ui,leastIndex:()=>nr,map:()=>ra,max:()=>Se,maxIndex:()=>Jt,mean:()=>zi,median:()=>qi,medianIndex:()=>zu,merge:()=>Hi,min:()=>Ht,minIndex:()=>Qt,mode:()=>$i,nice:()=>Ze,pairs:()=>ji,permute:()=>We,quantile:()=>$t,quantileIndex:()=>Jr,quantileSorted:()=>Ou,quickselect:()=>Zt,range:()=>Bi,rank:()=>Gi,reduce:()=>na,reverse:()=>ia,rollup:()=>Gr,rollups:()=>Ci,scan:()=>Yi,shuffle:()=>Yu,shuffler:()=>Wi,some:()=>ta,sort:()=>be,subset:()=>fa,sum:()=>Ki,superset:()=>ar,thresholdFreedmanDiaconis:()=>Ri,thresholdScott:()=>Li,thresholdSturges:()=>tr,tickIncrement:()=>Mt,tickStep:()=>Tu,ticks:()=>Qe,transpose:()=>ir,union:()=>la,variance:()=>Ve,zip:()=>Qi});var ee=h(()=>{vi();ht();pi();du();Ue();hu();pu();hi();bi();Ii();vu();ki();Cu();Fu();Du();Ru();Ti();Fi();Yr();Lu();qu();Hu();Wr();Kr();$u();Pi();ju();Mi();Qr();Oi();Bu();Gu();Uu();Vi();Di();Vu();Xu();Wu();Ku();Vr();Ji();wi();Ju();Qu();Zu();tf();ef();rf();nf();Ie();af();of();sf();ff();ua();lf();qt()});function df(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Zr(r)}function Zr(t){this._=t}function _p(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}function wp(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function cf(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=yp,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var yp,ca,hf=h(()=>{yp={value:()=>{}};Zr.prototype=df.prototype={constructor:Zr,on:function(t,e){var r=this._,n=_p(t+"",r),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(t=n[a]).type)&&(i=wp(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=n[a]).type)r[i]=cf(r[i],t.name,e);else if(e==null)for(i in r)r[i]=cf(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Zr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,i=a.length;n<i;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};ca=df});var pf=h(()=>{hf()});function cr(){return re||(vf(bp),re=fr.now()+rn)}function bp(){re=0}function lr(){this._call=this._time=this._next=null}function nn(t,e,r){var n=new lr;return n.restart(t,e,r),n}function xf(){cr(),++Ne;for(var t=tn,e;t;)(e=re-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ne}function mf(){re=(en=fr.now())+rn,Ne=sr=0;try{xf()}finally{Ne=0,Sp(),re=0}}function Ip(){var t=fr.now(),e=t-en;e>gf&&(rn-=e,en=t)}function Sp(){for(var t,e=tn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:tn=r);ur=t,da(n)}function da(t){if(!Ne){sr&&(sr=clearTimeout(sr));var e=t-re;e>24?(t<1/0&&(sr=setTimeout(mf,t-fr.now()-rn)),or&&(or=clearInterval(or))):(or||(en=fr.now(),or=setInterval(Ip,gf)),Ne=1,vf(mf))}}var Ne,sr,or,gf,tn,ur,en,re,rn,fr,vf,ha=h(()=>{Ne=0,sr=0,or=0,gf=1e3,en=0,re=0,rn=0,fr=typeof performance=="object"&&performance.now?performance:Date,vf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};lr.prototype=nn.prototype={constructor:lr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?cr():+r)+(e==null?0:+e),!this._next&&ur!==this&&(ur?ur._next=this:tn=this,ur=this),this._call=t,this._time=r,da()},stop:function(){this._call&&(this._call=null,this._time=1/0,da())}}});function an(t,e,r){var n=new lr;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var yf=h(()=>{ha()});var pa=h(()=>{ha();yf()});function jt(t,e,r,n,i,a){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;Cp(t,r,{name:e,index:n,group:i,on:Np,tween:Ap,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:wf})}function hr(t,e){var r=X(t,e);if(r.state>wf)throw new Error("too late; already scheduled");return r}function J(t,e){var r=X(t,e);if(r.state>on)throw new Error("too late; already running");return r}function X(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Cp(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=nn(a,0,r.time);function a(f){r.state=sn,r.timer.restart(o,r.delay,r.time),r.delay<=f&&o(f-r.delay)}function o(f){var l,d,c,p;if(r.state!==sn)return u();for(l in n)if(p=n[l],p.name===r.name){if(p.state===on)return an(o);p.state===_f?(p.state=dr,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[l]):+l<e&&(p.state=dr,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[l])}if(an(function(){r.state===on&&(r.state=_f,r.timer.restart(s,r.delay,r.time),s(f))}),r.state=un,r.on.call("start",t,t.__data__,r.index,r.group),r.state===un){for(r.state=on,i=new Array(c=r.tween.length),l=0,d=-1;l<c;++l)(p=r.tween[l].value.call(t,t.__data__,r.index,r.group))&&(i[++d]=p);i.length=d+1}}function s(f){for(var l=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(u),r.state=fn,1),d=-1,c=i.length;++d<c;)i[d].call(t,l);r.state===fn&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=dr,r.timer.stop(),delete n[e];for(var f in n)return;delete t.__transition}}var Np,Ap,wf,sn,un,on,_f,fn,dr,nt=h(()=>{pf();pa();Np=ca("start","end","cancel","interrupt"),Ap=[],wf=0,sn=1,un=2,on=3,_f=4,fn=5,dr=6});function ln(t,e){var r=t.__transition,n,i,a=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((n=r[o]).name!==e){a=!1;continue}i=n.state>un&&n.state<fn,n.state=dr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]}a&&delete t.__transition}}var ma=h(()=>{nt()});function bf(t){return this.each(function(){ln(this,t)})}var If=h(()=>{ma()});function cn(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ga(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}var Sf=h(()=>{});function gr(){}function Af(){return this.rgb().formatHex()}function Dp(){return this.rgb().formatHex8()}function Rp(){return Ff(this).formatHsl()}function Cf(){return this.rgb().formatRgb()}function Bt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=kp.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?kf(e):r===3?new ot(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?dn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?dn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mp.exec(t))?new ot(e[1],e[2],e[3],1):(e=Ep.exec(t))?new ot(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Pp.exec(t))?dn(e[1],e[2],e[3],e[4]):(e=Tp.exec(t))?dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fp.exec(t))?Pf(e[1],e[2]/100,e[3]/100,1):(e=Op.exec(t))?Pf(e[1],e[2]/100,e[3]/100,e[4]):Nf.hasOwnProperty(t)?kf(Nf[t]):t==="transparent"?new ot(NaN,NaN,NaN,0):null}function kf(t){return new ot(t>>16&255,t>>8&255,t&255,1)}function dn(t,e,r,n){return n<=0&&(t=e=r=NaN),new ot(t,e,r,n)}function Lp(t){return t instanceof gr||(t=Bt(t)),t?(t=t.rgb(),new ot(t.r,t.g,t.b,t.opacity)):new ot}function Ce(t,e,r,n){return arguments.length===1?Lp(t):new ot(t,e,r,n??1)}function ot(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function Mf(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}`}function zp(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}${ne((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ef(){let t=mn(this.opacity);return`${t===1?"rgb(":"rgba("}${ie(this.r)}, ${ie(this.g)}, ${ie(this.b)}${t===1?")":`, ${t})`}`}function mn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ie(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ne(t){return t=ie(t),(t<16?"0":"")+t.toString(16)}function Pf(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new pt(t,e,r,n)}function Ff(t){if(t instanceof pt)return new pt(t.h,t.s,t.l,t.opacity);if(t instanceof gr||(t=Bt(t)),!t)return new pt;if(t instanceof pt)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,u=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new pt(o,s,u,t.opacity)}function Of(t,e,r,n){return arguments.length===1?Ff(t):new pt(t,e,r,n??1)}function pt(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function Tf(t){return t=(t||0)%360,t<0?t+360:t}function hn(t){return Math.max(0,Math.min(1,t||0))}function va(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}var pr,pn,Ae,mr,yt,kp,Mp,Ep,Pp,Tp,Fp,Op,Nf,Df=h(()=>{Sf();pr=.7,pn=1/pr,Ae="\\s*([+-]?\\d+)\\s*",mr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kp=/^#([0-9a-f]{3,8})$/,Mp=new RegExp(`^rgb\\(${Ae},${Ae},${Ae}\\)$`),Ep=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),Pp=new RegExp(`^rgba\\(${Ae},${Ae},${Ae},${mr}\\)$`),Tp=new RegExp(`^rgba\\(${yt},${yt},${yt},${mr}\\)$`),Fp=new RegExp(`^hsl\\(${mr},${yt},${yt}\\)$`),Op=new RegExp(`^hsla\\(${mr},${yt},${yt},${mr}\\)$`),Nf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cn(gr,Bt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Af,formatHex:Af,formatHex8:Dp,formatHsl:Rp,formatRgb:Cf,toString:Cf});cn(ot,Ce,ga(gr,{brighter(t){return t=t==null?pn:Math.pow(pn,t),new ot(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pr:Math.pow(pr,t),new ot(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ot(ie(this.r),ie(this.g),ie(this.b),mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mf,formatHex:Mf,formatHex8:zp,formatRgb:Ef,toString:Ef}));cn(pt,Of,ga(gr,{brighter(t){return t=t==null?pn:Math.pow(pn,t),new pt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pr:Math.pow(pr,t),new pt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new ot(va(t>=240?t-240:t+120,i,n),va(t,i,n),va(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new pt(Tf(this.h),hn(this.s),hn(this.l),mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=mn(this.opacity);return`${t===1?"hsl(":"hsla("}${Tf(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${t===1?")":`, ${t})`}`}}))});var xa=h(()=>{Df()});function ya(t,e,r,n,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*r+(1+3*t+3*a-3*o)*n+o*i)/6}function Rf(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],a=t[n+1],o=n>0?t[n-1]:2*i-a,s=n<e-1?t[n+2]:2*a-i;return ya((r-n/e)*e,o,i,a,s)}}var _a=h(()=>{});function Lf(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],a=t[n%e],o=t[(n+1)%e],s=t[(n+2)%e];return ya((r-n/e)*e,i,a,o,s)}}var zf=h(()=>{_a()});var wa,qf=h(()=>{wa=t=>()=>t});function qp(t,e){return function(r){return t+r*e}}function Hp(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Hf(t){return(t=+t)==1?gn:function(e,r){return r-e?Hp(e,r,t):wa(isNaN(e)?r:e)}}function gn(t,e){var r=e-t;return r?qp(t,r):wa(isNaN(t)?e:t)}var $f=h(()=>{qf()});function jf(t){return function(e){var r=e.length,n=new Array(r),i=new Array(r),a=new Array(r),o,s;for(o=0;o<r;++o)s=Ce(e[o]),n[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return n=t(n),i=t(i),a=t(a),s.opacity=1,function(u){return s.r=n(u),s.g=i(u),s.b=a(u),s+""}}}var vn,$p,jp,Bf=h(()=>{xa();_a();zf();$f();vn=function t(e){var r=Hf(e);function n(i,a){var o=r((i=Ce(i)).r,(a=Ce(a)).r),s=r(i.g,a.g),u=r(i.b,a.b),f=gn(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=s(l),i.b=u(l),i.opacity=f(l),i+""}}return n.gamma=t,n}(1);$p=jf(Rf),jp=jf(Lf)});function ct(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var xn=h(()=>{});function Bp(t){return function(){return t}}function Gp(t){return function(e){return t(e)+""}}function Sa(t,e){var r=Ia.lastIndex=ba.lastIndex=0,n,i,a,o=-1,s=[],u=[];for(t=t+"",e=e+"";(n=Ia.exec(t))&&(i=ba.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:ct(n,i)})),r=ba.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Gp(u[0].x):Bp(e):(e=u.length,function(f){for(var l=0,d;l<e;++l)s[(d=u[l]).i]=d.x(f);return s.join("")})}var Ia,ba,Gf=h(()=>{xn();Ia=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ba=new RegExp(Ia.source,"g")});function Na(t,e,r,n,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),t*n<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Uf,skewX:Math.atan(u)*Uf,scaleX:o,scaleY:s}}var Uf,yn,Vf=h(()=>{Uf=180/Math.PI,yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function Xf(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?yn:Na(e.a,e.b,e.c,e.d,e.e,e.f)}function Yf(t){return t==null?yn:(_n||(_n=document.createElementNS("http://www.w3.org/2000/svg","g")),_n.setAttribute("transform",t),(t=_n.transform.baseVal.consolidate())?(t=t.matrix,Na(t.a,t.b,t.c,t.d,t.e,t.f)):yn)}var _n,Wf=h(()=>{Vf()});function Kf(t,e,r,n){function i(f){return f.length?f.pop()+" ":""}function a(f,l,d,c,p,v){if(f!==d||l!==c){var y=p.push("translate(",null,e,null,r);v.push({i:y-4,x:ct(f,d)},{i:y-2,x:ct(l,c)})}else(d||c)&&p.push("translate("+d+e+c+r)}function o(f,l,d,c){f!==l?(f-l>180?l+=360:l-f>180&&(f+=360),c.push({i:d.push(i(d)+"rotate(",null,n)-2,x:ct(f,l)})):l&&d.push(i(d)+"rotate("+l+n)}function s(f,l,d,c){f!==l?c.push({i:d.push(i(d)+"skewX(",null,n)-2,x:ct(f,l)}):l&&d.push(i(d)+"skewX("+l+n)}function u(f,l,d,c,p,v){if(f!==d||l!==c){var y=p.push(i(p)+"scale(",null,",",null,")");v.push({i:y-4,x:ct(f,d)},{i:y-2,x:ct(l,c)})}else(d!==1||c!==1)&&p.push(i(p)+"scale("+d+","+c+")")}return function(f,l){var d=[],c=[];return f=t(f),l=t(l),a(f.translateX,f.translateY,l.translateX,l.translateY,d,c),o(f.rotate,l.rotate,d,c),s(f.skewX,l.skewX,d,c),u(f.scaleX,f.scaleY,l.scaleX,l.scaleY,d,c),f=l=null,function(p){for(var v=-1,y=c.length,x;++v<y;)d[(x=c[v]).i]=x.x(p);return d.join("")}}}var Aa,Ca,Jf=h(()=>{xn();Wf();Aa=Kf(Xf,"px, ","px)","deg)"),Ca=Kf(Yf,", ",")",")")});var wn=h(()=>{xn();Gf();Jf();Bf()});function Up(t,e){var r,n;return function(){var i=J(this,t),a=i.tween;if(a!==r){n=r=a;for(var o=0,s=n.length;o<s;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function Vp(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=J(this,t),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:e,value:r},u=0,f=i.length;u<f;++u)if(i[u].name===e){i[u]=s;break}u===f&&i.push(s)}a.tween=i}}function Qf(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=X(this.node(),r).tween,i=0,a=n.length,o;i<a;++i)if((o=n[i]).name===t)return o.value;return null}return this.each((e==null?Up:Vp)(r,t,e))}function ke(t,e,r){var n=t._id;return t.each(function(){var i=J(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return X(i,n).value[e]}}var vr=h(()=>{nt()});function bn(t,e){var r;return(typeof e=="number"?ct:e instanceof Bt?vn:(r=Bt(e))?(e=r,vn):Sa)(t,e)}var ka=h(()=>{xa();wn()});function Xp(t){return function(){this.removeAttribute(t)}}function Yp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wp(t,e,r){var n,i=r+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===n?a:a=e(n=o,r)}}function Kp(t,e,r){var n,i=r+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===n?a:a=e(n=o,r)}}function Jp(t,e,r){var n,i,a;return function(){var o,s=r(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===n&&u===i?a:(i=u,a=e(n=o,s)))}}function Qp(t,e,r){var n,i,a;return function(){var o,s=r(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===n&&u===i?a:(i=u,a=e(n=o,s)))}}function Zf(t,e){var r=vt(t),n=r==="transform"?Ca:bn;return this.attrTween(t,typeof e=="function"?(r.local?Qp:Jp)(r,n,ke(this,"attr."+t,e)):e==null?(r.local?Yp:Xp)(r):(r.local?Kp:Wp)(r,n,e))}var tl=h(()=>{wn();it();vr();ka()});function Zp(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function tm(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function em(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&tm(t,a)),r}return i._value=e,i}function rm(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&Zp(t,a)),r}return i._value=e,i}function el(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=vt(t);return this.tween(r,(n.local?em:rm)(n,e))}var rl=h(()=>{it()});function nm(t,e){return function(){hr(this,t).delay=+e.apply(this,arguments)}}function im(t,e){return e=+e,function(){hr(this,t).delay=e}}function nl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nm:im)(e,t)):X(this.node(),e).delay}var il=h(()=>{nt()});function am(t,e){return function(){J(this,t).duration=+e.apply(this,arguments)}}function om(t,e){return e=+e,function(){J(this,t).duration=e}}function al(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?am:om)(e,t)):X(this.node(),e).duration}var ol=h(()=>{nt()});function sm(t,e){if(typeof e!="function")throw new Error;return function(){J(this,t).ease=e}}function sl(t){var e=this._id;return arguments.length?this.each(sm(e,t)):X(this.node(),e).ease}var ul=h(()=>{nt()});function um(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;J(this,t).ease=r}}function fl(t){if(typeof t!="function")throw new Error;return this.each(um(this._id,t))}var ll=h(()=>{nt()});function cl(t){typeof t!="function"&&(t=me(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],o=a.length,s=n[i]=[],u,f=0;f<o;++f)(u=a[f])&&t.call(u,u.__data__,f,a)&&s.push(u);return new Q(n,this._parents,this._name,this._id)}var dl=h(()=>{it();Et()});function hl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var u=e[s],f=r[s],l=u.length,d=o[s]=new Array(l),c,p=0;p<l;++p)(c=u[p]||f[p])&&(d[p]=c);for(;s<n;++s)o[s]=e[s];return new Q(o,this._parents,this._name,this._id)}var pl=h(()=>{Et()});function fm(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function lm(t,e,r){var n,i,a=fm(e)?hr:J;return function(){var o=a(this,t),s=o.on;s!==n&&(i=(n=s).copy()).on(e,r),o.on=i}}function ml(t,e){var r=this._id;return arguments.length<2?X(this.node(),r).on.on(t):this.each(lm(r,t,e))}var gl=h(()=>{nt()});function cm(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function vl(){return this.on("end.remove",cm(this._id))}var xl=h(()=>{});function yl(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Lt(t));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s=n[o],u=s.length,f=a[o]=new Array(u),l,d,c=0;c<u;++c)(l=s[c])&&(d=t.call(l,l.__data__,c,s))&&("__data__"in l&&(d.__data__=l.__data__),f[c]=d,jt(f[c],e,r,c,f,X(l,r)));return new Q(a,this._parents,e,r)}var _l=h(()=>{it();Et();nt()});function wl(t){var e=this._name,r=this._id;typeof t!="function"&&(t=pe(t));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var u=n[s],f=u.length,l,d=0;d<f;++d)if(l=u[d]){for(var c=t.call(l,l.__data__,d,u),p,v=X(l,r),y=0,x=c.length;y<x;++y)(p=c[y])&&jt(p,e,r,y,c,v);a.push(c),o.push(l)}return new Q(a,o,e,r)}var bl=h(()=>{it();Et();nt()});function Il(){return new dm(this._groups,this._parents)}var dm,Sl=h(()=>{it();dm=xt.prototype.constructor});function hm(t,e){var r,n,i;return function(){var a=Nt(this,t),o=(this.style.removeProperty(t),Nt(this,t));return a===o?null:a===r&&o===n?i:i=e(r=a,n=o)}}function Nl(t){return function(){this.style.removeProperty(t)}}function pm(t,e,r){var n,i=r+"",a;return function(){var o=Nt(this,t);return o===i?null:o===n?a:a=e(n=o,r)}}function mm(t,e,r){var n,i,a;return function(){var o=Nt(this,t),s=r(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),Nt(this,t))),o===u?null:o===n&&u===i?a:(i=u,a=e(n=o,s))}}function gm(t,e){var r,n,i,a="style."+e,o="end."+a,s;return function(){var u=J(this,t),f=u.on,l=u.value[a]==null?s||(s=Nl(e)):void 0;(f!==r||i!==l)&&(n=(r=f).copy()).on(o,i=l),u.on=n}}function Al(t,e,r){var n=(t+="")=="transform"?Aa:bn;return e==null?this.styleTween(t,hm(t,n)).on("end.style."+t,Nl(t)):typeof e=="function"?this.styleTween(t,mm(t,n,ke(this,"style."+t,e))).each(gm(this._id,t)):this.styleTween(t,pm(t,n,e),r).on("end.style."+t,null)}var Cl=h(()=>{wn();it();nt();vr();ka()});function vm(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function xm(t,e,r){var n,i;function a(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&vm(t,o,r)),n}return a._value=e,a}function kl(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,xm(t,e,r??""))}var Ml=h(()=>{});function ym(t){return function(){this.textContent=t}}function _m(t){return function(){var e=t(this);this.textContent=e??""}}function El(t){return this.tween("text",typeof t=="function"?_m(ke(this,"text",t)):ym(t==null?"":t+""))}var Pl=h(()=>{vr()});function wm(t){return function(e){this.textContent=t.call(this,e)}}function bm(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&wm(i)),e}return n._value=t,n}function Tl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,bm(t))}var Fl=h(()=>{});function Ol(){for(var t=this._name,e=this._id,r=In(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o=n[a],s=o.length,u,f=0;f<s;++f)if(u=o[f]){var l=X(u,e);jt(u,t,r,f,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Q(n,this._parents,t,r)}var Dl=h(()=>{Et();nt()});function Rl(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};r.each(function(){var f=J(this,n),l=f.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),f.on=e}),i===0&&a()})}var Ll=h(()=>{nt()});function Q(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Sn(t){return xt().transition(t)}function In(){return++Im}var Im,Pt,Et=h(()=>{it();tl();rl();il();ol();ul();ll();dl();pl();gl();xl();_l();bl();Sl();Cl();Ml();Pl();Fl();Dl();vr();Ll();Im=0;Pt=xt.prototype;Q.prototype=Sn.prototype={constructor:Q,select:yl,selectAll:wl,selectChild:Pt.selectChild,selectChildren:Pt.selectChildren,filter:cl,merge:hl,selection:Il,transition:Ol,call:Pt.call,nodes:Pt.nodes,node:Pt.node,size:Pt.size,empty:Pt.empty,each:Pt.each,on:ml,attr:Zf,attrTween:el,style:Al,styleTween:kl,text:El,textTween:Tl,remove:vl,tween:Qf,delay:nl,duration:al,ease:sl,easeVarying:fl,end:Rl,[Symbol.iterator]:Pt[Symbol.iterator]}});function Nn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var zl=h(()=>{});var ql=h(()=>{zl()});function Nm(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Hl(t){var e,r;t instanceof Q?(e=t._id,t=t._name):(e=In(),(r=Sm).time=cr(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o=n[a],s=o.length,u,f=0;f<s;++f)(u=o[f])&&jt(u,t,e,f,o,r||Nm(u,e));return new Q(n,this._parents,t,e)}var Sm,$l=h(()=>{Et();nt();ql();pa();Sm={time:null,delay:0,duration:250,ease:Nn}});var jl=h(()=>{it();If();$l();xt.prototype.interrupt=bf;xt.prototype.transition=Hl});function Bl(t,e){var r=t.__transition,n,i;if(r){e=e==null?null:e+"";for(i in r)if((n=r[i]).state>sn&&n.name===e)return new Q([[t]],Am,e,+i)}return null}var Am,Gl=h(()=>{Et();nt();Am=[null]});var Ma={};Er(Ma,{active:()=>Bl,interrupt:()=>ln,transition:()=>Sn});var Ea=h(()=>{jl();Et();Gl();ma()});var xr=j(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.CompositeRenderer=void 0;ae.getFamPositionVertical=Ul;ae.getFamPositionHorizontal=Vl;ae.getVSize=Xl;var Me=(ee(),rt(te)),Cm=function(){function t(e){this.options=e}return t.prototype.getPreferredFamSize=function(e){return[0,0]},t.prototype.setPreferredIndiSize=function(e){var r;e&&(r=this.getPreferredIndiSize(e.id),e.width=r[0],e.height=r[1])},t.prototype.updateNodes=function(e){var r=this,n=new Map;e.forEach(function(i){var a;r.setPreferredIndiSize(i.data.indi),r.setPreferredIndiSize(i.data.spouse);var o=i.data.family;o&&(a=r.getPreferredFamSize(o.id),o.width=a[0],o.height=a[1]);var s=i.depth,u=(0,Me.max)([Gt(i.data,!!r.options.horizontal),n.get(s)]);n.set(s,u)}),e.forEach(function(i){var a;r.options.horizontal?(i.data.indi&&(i.data.indi.width=n.get(i.depth)),i.data.spouse&&(i.data.spouse.width=n.get(i.depth))):(i.data.indi&&(i.data.indi.height=n.get(i.depth)),i.data.spouse&&(i.data.spouse.height=n.get(i.depth)));var o=Xl(i.data,!!r.options.horizontal),s=km(i.data,!!r.options.horizontal);a=r.options.horizontal?[o,s]:[s,o],i.data.width=a[0],i.data.height=a[1]})},t.prototype.getFamilyAnchor=function(e){if(this.options.horizontal){var r=-e.width/2+Gt(e,this.options.horizontal)/2,n=e.family?(0,Me.max)([-Vl(e),0]):0,i=-(e.indi&&e.spouse?e.height/2-e.indi.height:0)+n;return[r,i]}var a=e.family?(0,Me.max)([-Ul(e),0]):0,o=-(e.indi&&e.spouse?e.width/2-e.indi.width:0)+a,s=-e.height/2+Gt(e,this.options.horizontal)/2;return[o,s]},t.prototype.getSpouseAnchor=function(e){if(this.options.horizontal){var r=-e.width/2+Gt(e,this.options.horizontal)/2,n=e.indi?e.indi.height/2:0;return[r,n]}var i=e.indi?e.indi.width/2:0,a=-e.height/2+Gt(e,!!this.options.horizontal)/2;return[i,a]},t.prototype.getIndiAnchor=function(e){if(this.options.horizontal){var r=-e.width/2+Gt(e,this.options.horizontal)/2,n=e.spouse?-e.spouse.height/2:0;return[r,n]}var i=e.spouse?-e.spouse.width/2:0,a=-e.height/2+Gt(e,!!this.options.horizontal)/2;return[i,a]},t}();ae.CompositeRenderer=Cm;function Ul(t){var e=t.indi?t.indi.width:0,r=t.spouse?t.spouse.width:0,n=t.family.width;return!t.indi||!t.spouse||e+r<=n?(e+r-n)/2:n/2>=r?e+r-n:n/2>=e?0:e-n/2}function Vl(t){var e=t.indi?t.indi.height:0,r=t.spouse?t.spouse.height:0,n=t.family.height;return!t.indi||!t.spouse?(e+r-n)/2:e-n/2}function km(t,e){if(e)return(t.indi?t.indi.height:0)+(t.spouse?t.spouse.height:0);var r=(t.indi?t.indi.width:0)+(t.spouse?t.spouse.width:0);return(0,Me.max)([r,t.family?t.family.width:0])}function Mm(t,e){return e?t.family?t.family.width:0:t.family?t.family.height:0}function Gt(t,e){return e?(0,Me.max)([t.indi?t.indi.width:0,t.spouse?t.spouse.width:0]):(0,Me.max)([t.indi?t.indi.height:0,t.spouse?t.spouse.height:0])}function Xl(t,e){return Gt(t,e)+Mm(t,e)}});var Ut=j(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ChartUtil=ut.V_SPACING=ut.H_SPACING=void 0;ut.linkId=Yl;ut.getChartInfo=Fm;ut.getChartInfoWithoutMargin=Om;var Pa=(it(),rt(Be)),An=he(),Em=nu(),mt=(ee(),rt(te));Ea();var Pm=xr();ut.H_SPACING=15;ut.V_SPACING=34;var Cn=15,st=200,_t=500;function Tm(){return`
.expander {
  fill: white;
  stroke: black;
  stroke-width: 2px;
  cursor: pointer;
}`}function Yl(t){if(!t.parent)return"".concat(t.id,":A");var e=t.data.generation>t.parent.data.generation?[t.data,t.parent.data]:[t.parent.data,t.data],r=e[0],n=e[1];return r.additionalMarriage?"".concat(r.id,":A"):"".concat(n.id,":").concat(r.id)}function Fm(t){var e=(0,mt.min)(t,function(a){return a.x-a.data.width/2})-Cn,r=(0,mt.min)(t,function(a){return a.y-a.data.height/2})-Cn,n=(0,mt.max)(t,function(a){return a.x+a.data.width/2})+Cn,i=(0,mt.max)(t,function(a){return a.y+a.data.height/2})+Cn;return{size:[n-e,i-r],origin:[-e,-r]}}function Om(t){var e=(0,mt.min)(t,function(a){return a.x-a.data.width/2}),r=(0,mt.min)(t,function(a){return a.y-a.data.height/2}),n=(0,mt.max)(t,function(a){return a.x+a.data.width/2}),i=(0,mt.max)(t,function(a){return a.y+a.data.height/2});return{size:[n-e,i-r],origin:[-e,-r]}}var Dm=function(){function t(e){this.options=e}return t.prototype.linkHorizontal=function(e,r){var n=this.options.renderer.getFamilyAnchor(e.data),i=e.id===r.data.spouseParentNodeId?this.options.renderer.getSpouseAnchor(r.data):this.options.renderer.getIndiAnchor(r.data),a=[e.x+n[0],e.y+n[1]],o=a[0],s=a[1],u=[r.x+i[0],r.y+i[1]],f=u[0],l=u[1],d=(e.x+e.data.width/2+r.x-r.data.width/2)/2;return"M ".concat(o," ").concat(s,`
            L `).concat(d," ").concat(s,`,
              `).concat(d," ").concat(l,`,
              `).concat(f," ").concat(l)},t.prototype.linkVertical=function(e,r){var n=this.options.renderer.getFamilyAnchor(e.data),i=e.id===r.data.spouseParentNodeId?this.options.renderer.getSpouseAnchor(r.data):this.options.renderer.getIndiAnchor(r.data),a=[e.x+n[0],e.y+n[1]],o=a[0],s=a[1],u=[r.x+i[0],r.y+i[1]],f=u[0],l=u[1],d=e.y+e.data.height/2+ut.V_SPACING/2;return"M ".concat(o," ").concat(s,`
            L `).concat(o," ").concat(d,`,
              `).concat(f," ").concat(d,`,
              `).concat(f," ").concat(l)},t.prototype.linkAdditionalMarriage=function(e){var r=e.parent.children.findIndex(function(c){return c.data.id===e.data.id}),n=e.parent.children[r-1],i=this.options.renderer.getIndiAnchor(e.data),a=this.options.renderer.getIndiAnchor(n.data),o=[e.x+i[0],e.y+i[1]],s=o[0],u=o[1],f=[n.x+a[0],n.y+a[1]],l=f[0],d=f[1];return"M ".concat(s,", ").concat(u,`
            L `).concat(l,", ").concat(d)},t.prototype.updateSvgDimensions=function(e){var r=(0,Pa.select)(this.options.svgSelector),n=r.select("g"),i=this.options.animate?n.transition().delay(st).duration(_t):n;i.attr("transform","translate(".concat(e.origin[0],", ").concat(e.origin[1],")"))},t.prototype.layOutChart=function(e,r){var n=this;r===void 0&&(r={});var i=(0,Pa.select)(this.options.svgSelector);i.select("style").empty()&&i.append("style").text(this.options.renderer.getCss()+Tm()),e.each(function(l){l.data.generation=l.depth*(r.flipVertically?-1:1)+(n.options.baseGeneration||0)}),this.options.renderer.updateNodes(e.descendants());var a=new Map;e.each(function(l){var d=l.depth,c=(0,mt.max)([n.options.horizontal?l.data.width:l.data.height,a.get(d)]);a.set(d,c)}),e.each(function(l){var d=a.get(l.depth);n.options.horizontal?l.data.width=d:l.data.height=d});var o=r.vSpacing!==void 0?r.vSpacing:ut.V_SPACING,s=r.hSpacing!==void 0?r.hSpacing:ut.H_SPACING,u=(0,Em.flextree)().nodeSize(function(l){if(n.options.horizontal){var d=(0,mt.max)(l.children||[],function(p){return p.data.width})||0;return[l.data.height,(d+l.data.width)/2+o]}var c=(0,mt.max)(l.children||[],function(p){return p.data.height})||0;return[l.data.width,(c+l.data.height)/2+o]}).spacing(function(l,d){return s}),f=u(e).descendants();return f.forEach(function(l){var d;r.flipVertically&&(l.y=-l.y),n.options.horizontal&&(d=[l.y,l.x],l.x=d[0],l.y=d[1])}),f},t.prototype.renderChart=function(e){var r=this.getSvgForRendering(),n=this.renderNodes(e,r),i=this.renderLinks(e,r),a=this.renderControls(e,r);return Promise.all([n,i,a])},t.prototype.renderNodes=function(e,r){var n=this,i=new Promise(function(a){var o=r.select("g").selectAll("g.node").data(e,function(d){return d.id}),s=o.enter().append("g"),u=o.exit().size()+o.size()+s.size(),f=function(){u--,u===0&&a()};(!n.options.animate||u===0)&&a(),s.merge(o).attr("class",function(d){return"node generation".concat(d.data.generation)}),s.attr("transform",function(d){return"translate(".concat(d.x-d.data.width/2,", ").concat(d.y-d.data.height/2,")")}),n.options.animate&&s.style("opacity",0).transition().delay(st+_t).duration(st).style("opacity",1).on("end",f);var l=n.options.animate?o.transition().delay(st).duration(_t).on("end",f):o;l.attr("transform",function(d){return"translate(".concat(d.x-d.data.width/2,", ").concat(d.y-d.data.height/2,")")}),n.options.renderer.render(s,o),n.options.animate?o.exit().transition().duration(st).style("opacity",0).remove().on("end",f):o.exit().remove()});return i},t.prototype.renderLinks=function(e,r){var n=this,i=new Promise(function(a){var o=function(p,v){if(v.data.additionalMarriage)return n.linkAdditionalMarriage(v);var y=p.data.generation>v.data.generation;return n.options.horizontal?y?n.linkHorizontal(v,p):n.linkHorizontal(p,v):y?n.linkVertical(v,p):n.linkVertical(p,v)},s=e.filter(function(p){return!!p.parent||p.data.additionalMarriage}),u=r.select("g").selectAll("path.link").data(s,Yl),f=u.enter().insert("path","g").attr("class",function(p){return p.data.additionalMarriage?"link additional-marriage":"link"}).attr("d",function(p){return o(p.parent,p)}),l=u.exit().size()+u.size()+f.size(),d=function(){l--,l===0&&a()};(!n.options.animate||l===0)&&a();var c=n.options.animate?u.transition().delay(st).duration(_t).on("end",d):u;c.attr("d",function(p){return o(p.parent,p)}),n.options.animate&&f.style("opacity",0).transition().delay(2*st+_t).duration(0).style("opacity",1).on("end",d),n.options.animate?u.exit().transition().duration(0).style("opacity",0).remove().on("end",d):u.exit().remove()});return i},t.prototype.renderExpander=function(e,r,n){e=e.filter(function(i){return r(i)!==void 0}),e.on("click",function(i,a){n?.(a.id)}),e.append("rect").attr("width",12).attr("height",12),e.append("line").attr("x1",3).attr("y1",6).attr("x2",9).attr("y2",6).attr("stroke","black"),e.filter(function(i){return r(i)===An.ExpanderState.PLUS}).append("line").attr("x1",6).attr("y1",3).attr("x2",6).attr("y2",9).attr("stroke","black")},t.prototype.renderFamilyControls=function(e){var r=this,n=e.selectAll("g.familyExpander").data(function(s){var u;return((u=s.data.family)===null||u===void 0?void 0:u.expander)!==void 0?[s]:[]}),i=n.enter().append("g").attr("class","familyExpander expander"),a=i.merge(n),o=this.options.animate?a.transition().delay(st).duration(_t):a;o.attr("transform",function(s){var u=r.options.renderer.getFamilyAnchor(s.data);return"translate(".concat(u[0]-6,", ").concat(-s.data.height/2+(0,Pm.getVSize)(s.data,!!r.options.horizontal),")")}),this.renderExpander(a,function(s){var u;return(u=s.data.family)===null||u===void 0?void 0:u.expander},function(s){var u,f;return(f=(u=r.options).expanderCallback)===null||f===void 0?void 0:f.call(u,s,An.ExpanderDirection.FAMILY)}),n.exit().remove()},t.prototype.renderIndiControls=function(e){var r=this,n=e.selectAll("g.indiExpander").data(function(s){var u;return((u=s.data.indi)===null||u===void 0?void 0:u.expander)!==void 0?[s]:[]}),i=n.enter().append("g").attr("class","indiExpander expander"),a=i.merge(n),o=this.options.animate?a.transition().delay(st).duration(_t):a;o.attr("transform",function(s){var u=r.options.renderer.getIndiAnchor(s.data);return"translate(".concat(u[0]-6,", ").concat(-s.data.height/2-12,")")}),this.renderExpander(a,function(s){var u;return(u=s.data.indi)===null||u===void 0?void 0:u.expander},function(s){var u,f;return(f=(u=r.options).expanderCallback)===null||f===void 0?void 0:f.call(u,s,An.ExpanderDirection.INDI)}),n.exit().remove()},t.prototype.renderSpouseControls=function(e){var r=this,n=e.selectAll("g.spouseExpander").data(function(s){var u;return((u=s.data.spouse)===null||u===void 0?void 0:u.expander)!==void 0?[s]:[]}),i=n.enter().append("g").attr("class","spouseExpander expander"),a=i.merge(n),o=this.options.animate?a.transition().delay(st).duration(_t):a;o.attr("transform",function(s){var u=r.options.renderer.getSpouseAnchor(s.data);return"translate(".concat(u[0]-6,", ").concat(-s.data.height/2-12,")")}),this.renderExpander(a,function(s){var u;return(u=s.data.spouse)===null||u===void 0?void 0:u.expander},function(s){var u,f;return(f=(u=r.options).expanderCallback)===null||f===void 0?void 0:f.call(u,s,An.ExpanderDirection.SPOUSE)}),n.exit().remove()},t.prototype.renderControls=function(e,r){var n=this;if(!this.options.expanders)return Promise.resolve();var i=new Promise(function(a){var o=r.select("g").selectAll("g.controls").data(e,function(c){return c.id}),s=o.enter().append("g").attr("class","controls");s.attr("transform",function(c){return"translate(".concat(c.x,", ").concat(c.y,")")});var u=o.exit().size()+o.size()+s.size(),f=function(){u--,u===0&&a()};(!n.options.animate||u===0)&&a();var l=n.options.animate?o.transition().delay(st).duration(_t).on("end",f):o;l.attr("transform",function(c){return"translate(".concat(c.x,", ").concat(c.y,")")}),n.options.animate&&s.style("opacity",0).transition().delay(st+_t).duration(st).style("opacity",1).on("end",f);var d=s.merge(o);n.renderFamilyControls(d),n.renderIndiControls(d),n.renderSpouseControls(d),n.options.animate?o.exit().transition().duration(st).style("opacity",0).remove().on("end",f):o.exit().remove()});return i},t.prototype.getSvgForRendering=function(){var e=(0,Pa.select)(this.options.svgSelector);return e.select("g").empty()&&e.append("g"),e},t}();ut.ChartUtil=Dm});function Rm(t,e){return t.parent===e.parent?1:2}function Lm(t){return t.reduce(zm,0)/t.length}function zm(t,e){return t+e.x}function qm(t){return 1+t.reduce(Hm,0)}function Hm(t,e){return Math.max(t,e.y)}function $m(t){for(var e;e=t.children;)t=e[0];return t}function jm(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Wl(){var t=Rm,e=1,r=1,n=!1;function i(a){var o,s=0;a.eachAfter(function(c){var p=c.children;p?(c.x=Lm(p),c.y=qm(p)):(c.x=o?s+=t(c,o):0,c.y=0,o=c)});var u=$m(a),f=jm(a),l=u.x-t(u,f)/2,d=f.x+t(f,u)/2;return a.eachAfter(n?function(c){c.x=(c.x-a.x)*e,c.y=(a.y-c.y)*r}:function(c){c.x=(c.x-l)/(d-l)*e,c.y=(1-(a.y?c.y/a.y:1))*r})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(n=!1,e=+a[0],r=+a[1],i):n?null:[e,r]},i.nodeSize=function(a){return arguments.length?(n=!0,e=+a[0],r=+a[1],i):n?[e,r]:null},i}var Kl=h(()=>{});function Bm(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function Jl(){return this.eachAfter(Bm)}var Ql=h(()=>{});function Zl(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}var tc=h(()=>{});function ec(t,e){for(var r=this,n=[r],i,a,o=-1;r=n.pop();)if(t.call(e,r,++o,this),i=r.children)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}var rc=h(()=>{});function nc(t,e){for(var r=this,n=[r],i=[],a,o,s,u=-1;r=n.pop();)if(i.push(r),a=r.children)for(o=0,s=a.length;o<s;++o)n.push(a[o]);for(;r=i.pop();)t.call(e,r,++u,this);return this}var ic=h(()=>{});function ac(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}var oc=h(()=>{});function sc(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,i=n&&n.length;--i>=0;)r+=n[i].value;e.value=r})}var uc=h(()=>{});function fc(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}var lc=h(()=>{});function cc(t){for(var e=this,r=Gm(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var i=n.length;t!==r;)n.splice(i,0,t),t=t.parent;return n}function Gm(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),i=null;for(t=r.pop(),e=n.pop();t===e;)i=t,t=r.pop(),e=n.pop();return i}var dc=h(()=>{});function hc(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}var pc=h(()=>{});function mc(){return Array.from(this)}var gc=h(()=>{});function vc(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}var xc=h(()=>{});function yc(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}var _c=h(()=>{});function*wc(){var t=this,e,r=[t],n,i,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(i=0,a=n.length;i<a;++i)r.push(n[i]);while(r.length)}var bc=h(()=>{});function yr(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Xm)):e===void 0&&(e=Vm);for(var r=new wt(t),n,i=[r],a,o,s,u;n=i.pop();)if((o=e(n.data))&&(u=(o=Array.from(o)).length))for(n.children=o,s=u-1;s>=0;--s)i.push(a=o[s]=new wt(o[s])),a.parent=n,a.depth=n.depth+1;return r.eachBefore(Ta)}function Um(){return yr(this).eachBefore(Ym)}function Vm(t){return t.children}function Xm(t){return Array.isArray(t)?t[1]:null}function Ym(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Ta(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function wt(t){this.data=t,this.depth=this.height=0,this.parent=null}var kn=h(()=>{Ql();tc();rc();ic();oc();uc();lc();dc();pc();gc();xc();_c();bc();wt.prototype=yr.prototype={constructor:wt,count:Jl,each:Zl,eachAfter:nc,eachBefore:ec,find:ac,sum:sc,sort:fc,path:cc,ancestors:hc,descendants:mc,leaves:vc,links:yc,copy:Um,[Symbol.iterator]:wc}});function Ee(t){return t==null?null:Fa(t)}function Fa(t){if(typeof t!="function")throw new Error;return t}var Mn=h(()=>{});function Tt(){return 0}function Vt(t){return function(){return t}}var Oa=h(()=>{});function Pe(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var En=h(()=>{});function Ic(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Sc(t,e){let r=t.length,n,i;for(;r;)i=e()*r--|0,n=t[r],t[r]=t[i],t[i]=n;return t}var Da=h(()=>{});function Nc(t){return La(t,Pe())}function La(t,e){for(var r=0,n=(t=Sc(Array.from(t),e)).length,i=[],a,o;r<n;)a=t[r],o&&Ac(o,a)?++r:(o=Km(i=Wm(i,a)),r=0);return o}function Wm(t,e){var r,n;if(Ra(e,t))return[e];for(r=0;r<t.length;++r)if(Pn(e,t[r])&&Ra(_r(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(Pn(_r(t[r],t[n]),e)&&Pn(_r(t[r],e),t[n])&&Pn(_r(t[n],e),t[r])&&Ra(Cc(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function Pn(t,e){var r=t.r-e.r,n=e.x-t.x,i=e.y-t.y;return r<0||r*r<n*n+i*i}function Ac(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,i=e.y-t.y;return r>0&&r*r>n*n+i*i}function Ra(t,e){for(var r=0;r<e.length;++r)if(!Ac(t,e[r]))return!1;return!0}function Km(t){switch(t.length){case 1:return Jm(t[0]);case 2:return _r(t[0],t[1]);case 3:return Cc(t[0],t[1],t[2])}}function Jm(t){return{x:t.x,y:t.y,r:t.r}}function _r(t,e){var r=t.x,n=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-r,f=o-n,l=s-i,d=Math.sqrt(u*u+f*f);return{x:(r+a+u/d*l)/2,y:(n+o+f/d*l)/2,r:(d+i+s)/2}}function Cc(t,e,r){var n=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,f=r.x,l=r.y,d=r.r,c=n-o,p=n-f,v=i-s,y=i-l,x=u-a,S=d-a,g=n*n+i*i-a*a,_=g-o*o-s*s+u*u,b=g-f*f-l*l+d*d,C=p*v-c*y,M=(v*b-y*_)/(C*2)-n,D=(y*x-v*S)/C,O=(p*_-c*b)/(C*2)-i,R=(c*S-p*x)/C,H=D*D+R*R-1,$=2*(a+M*D+O*R),gt=M*M+O*O-a*a,Ot=-(Math.abs(H)>1e-6?($+Math.sqrt($*$-4*H*gt))/(2*H):gt/$);return{x:n+M+D*Ot,y:i+O+R*Ot,r:Ot}}var za=h(()=>{Da();En()});function kc(t,e,r){var n=t.x-e.x,i,a,o=t.y-e.y,s,u,f=n*n+o*o;f?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(i=(f+u-a)/(2*f),s=Math.sqrt(Math.max(0,u/f-i*i)),r.x=t.x-i*n-s*o,r.y=t.y-i*o+s*n):(i=(f+a-u)/(2*f),s=Math.sqrt(Math.max(0,a/f-i*i)),r.x=e.x+i*n-s*o,r.y=e.y+i*o+s*n)):(r.x=e.x+r.r,r.y=e.y)}function Mc(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,i=e.y-t.y;return r>0&&r*r>n*n+i*i}function Ec(t){var e=t._,r=t.next._,n=e.r+r.r,i=(e.x*r.r+r.x*e.r)/n,a=(e.y*r.r+r.y*e.r)/n;return i*i+a*a}function Tn(t){this._=t,this.next=null,this.previous=null}function qa(t,e){if(!(a=(t=Ic(t)).length))return 0;var r,n,i,a,o,s,u,f,l,d,c;if(r=t[0],r.x=0,r.y=0,!(a>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(a>2))return r.r+n.r;kc(n,r,i=t[2]),r=new Tn(r),n=new Tn(n),i=new Tn(i),r.next=i.previous=n,n.next=r.previous=i,i.next=n.previous=r;t:for(u=3;u<a;++u){kc(r._,n._,i=t[u]),i=new Tn(i),f=n.next,l=r.previous,d=n._.r,c=r._.r;do if(d<=c){if(Mc(f._,i._)){n=f,r.next=n,n.previous=r,--u;continue t}d+=f._.r,f=f.next}else{if(Mc(l._,i._)){r=l,r.next=n,n.previous=r,--u;continue t}c+=l._.r,l=l.previous}while(f!==l.next);for(i.previous=r,i.next=n,r.next=n.previous=n=i,o=Ec(r);(i=i.next)!==n;)(s=Ec(i))<o&&(r=i,o=s);n=r.next}for(r=[n._],i=n;(i=i.next)!==n;)r.push(i._);for(i=La(r,e),u=0;u<a;++u)r=t[u],r.x-=i.x,r.y-=i.y;return i.r}function Pc(t){return qa(t,Pe()),t}var Ha=h(()=>{Da();En();za()});function Qm(t){return Math.sqrt(t.value)}function Oc(){var t=null,e=1,r=1,n=Tt;function i(a){let o=Pe();return a.x=e/2,a.y=r/2,t?a.eachBefore(Tc(t)).eachAfter($a(n,.5,o)).eachBefore(Fc(1)):a.eachBefore(Tc(Qm)).eachAfter($a(Tt,1,o)).eachAfter($a(n,a.r/Math.min(e,r),o)).eachBefore(Fc(Math.min(e,r)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Ee(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],r=+a[1],i):[e,r]},i.padding=function(a){return arguments.length?(n=typeof a=="function"?a:Vt(+a),i):n},i}function Tc(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function $a(t,e,r){return function(n){if(i=n.children){var i,a,o=i.length,s=t(n)*e||0,u;if(s)for(a=0;a<o;++a)i[a].r+=s;if(u=qa(i,r),s)for(a=0;a<o;++a)i[a].r-=s;n.r=u+s}}}function Fc(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}var Dc=h(()=>{Mn();Oa();En();Ha()});function Fn(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}var ja=h(()=>{});function bt(t,e,r,n,i){for(var a=t.children,o,s=-1,u=a.length,f=t.value&&(n-e)/t.value;++s<u;)o=a[s],o.y0=r,o.y1=i,o.x0=e,o.x1=e+=o.value*f}var Te=h(()=>{});function Rc(){var t=1,e=1,r=0,n=!1;function i(o){var s=o.height+1;return o.x0=o.y0=r,o.x1=t,o.y1=e/s,o.eachBefore(a(e,s)),n&&o.eachBefore(Fn),o}function a(o,s){return function(u){u.children&&bt(u,u.x0,o*(u.depth+1)/s,u.x1,o*(u.depth+2)/s);var f=u.x0,l=u.y0,d=u.x1-r,c=u.y1-r;d<f&&(f=d=(f+d)/2),c<l&&(l=c=(l+c)/2),u.x0=f,u.y0=l,u.x1=d,u.y1=c}}return i.round=function(o){return arguments.length?(n=!!o,i):n},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(r=+o,i):r},i}var Lc=h(()=>{ja();Te()});function tg(t){return t.id}function eg(t){return t.parentId}function Hc(){var t=tg,e=eg,r;function n(i){var a=Array.from(i),o=t,s=e,u,f,l,d,c,p,v,y,x=new Map;if(r!=null){let S=a.map((b,C)=>rg(r(b,C,i))),g=S.map(qc),_=new Set(S).add("");for(let b of g)_.has(b)||(_.add(b),S.push(b),g.push(qc(b)),a.push(Ba));o=(b,C)=>S[C],s=(b,C)=>g[C]}for(l=0,u=a.length;l<u;++l)f=a[l],p=a[l]=new wt(f),(v=o(f,l,i))!=null&&(v+="")&&(y=p.id=v,x.set(y,x.has(y)?zc:p)),(v=s(f,l,i))!=null&&(v+="")&&(p.parent=v);for(l=0;l<u;++l)if(p=a[l],v=p.parent){if(c=x.get(v),!c)throw new Error("missing: "+v);if(c===zc)throw new Error("ambiguous: "+v);c.children?c.children.push(p):c.children=[p],p.parent=c}else{if(d)throw new Error("multiple roots");d=p}if(!d)throw new Error("no root");if(r!=null){for(;d.data===Ba&&d.children.length===1;)d=d.children[0],--u;for(let S=a.length-1;S>=0&&(p=a[S],p.data===Ba);--S)p.data=null}if(d.parent=Zm,d.eachBefore(function(S){S.depth=S.parent.depth+1,--u}).eachBefore(Ta),d.parent=null,u>0)throw new Error("cycle");return d}return n.id=function(i){return arguments.length?(t=Ee(i),n):t},n.parentId=function(i){return arguments.length?(e=Ee(i),n):e},n.path=function(i){return arguments.length?(r=Ee(i),n):r},n}function rg(t){t=`${t}`;let e=t.length;return Ga(t,e-1)&&!Ga(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function qc(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Ga(t,e););return t.slice(0,e)}function Ga(t,e){if(t[e]==="/"){let r=0;for(;e>0&&t[--e]==="\\";)++r;if(!(r&1))return!0}return!1}var Zm,zc,Ba,$c=h(()=>{Mn();kn();Zm={depth:-1},zc={},Ba={}});function ng(t,e){return t.parent===e.parent?1:2}function Ua(t){var e=t.children;return e?e[0]:t.t}function Va(t){var e=t.children;return e?e[e.length-1]:t.t}function ig(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function ag(t){for(var e=0,r=0,n=t.children,i=n.length,a;--i>=0;)a=n[i],a.z+=e,a.m+=e,e+=a.s+(r+=a.c)}function og(t,e,r){return t.a.parent===e.parent?t.a:r}function On(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function sg(t){for(var e=new On(t,0),r,n=[e],i,a,o,s;r=n.pop();)if(a=r._.children)for(r.children=new Array(s=a.length),o=s-1;o>=0;--o)n.push(i=r.children[o]=new On(a[o],o)),i.parent=r;return(e.parent=new On(null,0)).children=[e],e}function jc(){var t=ng,e=1,r=1,n=null;function i(f){var l=sg(f);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),n)f.eachBefore(u);else{var d=f,c=f,p=f;f.eachBefore(function(g){g.x<d.x&&(d=g),g.x>c.x&&(c=g),g.depth>p.depth&&(p=g)});var v=d===c?1:t(d,c)/2,y=v-d.x,x=e/(c.x+v+y),S=r/(p.depth||1);f.eachBefore(function(g){g.x=(g.x+y)*x,g.y=g.depth*S})}return f}function a(f){var l=f.children,d=f.parent.children,c=f.i?d[f.i-1]:null;if(l){ag(f);var p=(l[0].z+l[l.length-1].z)/2;c?(f.z=c.z+t(f._,c._),f.m=f.z-p):f.z=p}else c&&(f.z=c.z+t(f._,c._));f.parent.A=s(f,c,f.parent.A||d[0])}function o(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function s(f,l,d){if(l){for(var c=f,p=f,v=l,y=c.parent.children[0],x=c.m,S=p.m,g=v.m,_=y.m,b;v=Va(v),c=Ua(c),v&&c;)y=Ua(y),p=Va(p),p.a=f,b=v.z+g-c.z-x+t(v._,c._),b>0&&(ig(og(v,f,d),f,b),x+=b,S+=b),g+=v.m,x+=c.m,_+=y.m,S+=p.m;v&&!Va(p)&&(p.t=v,p.m+=g-S),c&&!Ua(y)&&(y.t=c,y.m+=x-_,d=f)}return d}function u(f){f.x*=e,f.y=f.depth*r}return i.separation=function(f){return arguments.length?(t=f,i):t},i.size=function(f){return arguments.length?(n=!1,e=+f[0],r=+f[1],i):n?null:[e,r]},i.nodeSize=function(f){return arguments.length?(n=!0,e=+f[0],r=+f[1],i):n?[e,r]:null},i}var Bc=h(()=>{kn();On.prototype=Object.create(wt.prototype)});function Xt(t,e,r,n,i){for(var a=t.children,o,s=-1,u=a.length,f=t.value&&(i-r)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=n,o.y0=r,o.y1=r+=o.value*f}var wr=h(()=>{});function Ya(t,e,r,n,i,a){for(var o=[],s=e.children,u,f,l=0,d=0,c=s.length,p,v,y=e.value,x,S,g,_,b,C,M;l<c;){p=i-r,v=a-n;do x=s[d++].value;while(!x&&d<c);for(S=g=x,C=Math.max(v/p,p/v)/(y*t),M=x*x*C,b=Math.max(g/M,M/S);d<c;++d){if(x+=f=s[d].value,f<S&&(S=f),f>g&&(g=f),M=x*x*C,_=Math.max(g/M,M/S),_>b){x-=f;break}b=_}o.push(u={value:x,dice:p<v,children:s.slice(l,d)}),u.dice?bt(u,r,n,i,y?n+=v*x/y:a):Xt(u,r,n,y?r+=p*x/y:i,a),y-=x,l=d}return o}var Xa,Dn,Rn=h(()=>{Te();wr();Xa=(1+Math.sqrt(5))/2;Dn=function t(e){function r(n,i,a,o,s){Ya(e,n,i,a,o,s)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Xa)});function Gc(){var t=Dn,e=!1,r=1,n=1,i=[0],a=Tt,o=Tt,s=Tt,u=Tt,f=Tt;function l(c){return c.x0=c.y0=0,c.x1=r,c.y1=n,c.eachBefore(d),i=[0],e&&c.eachBefore(Fn),c}function d(c){var p=i[c.depth],v=c.x0+p,y=c.y0+p,x=c.x1-p,S=c.y1-p;x<v&&(v=x=(v+x)/2),S<y&&(y=S=(y+S)/2),c.x0=v,c.y0=y,c.x1=x,c.y1=S,c.children&&(p=i[c.depth+1]=a(c)/2,v+=f(c)-p,y+=o(c)-p,x-=s(c)-p,S-=u(c)-p,x<v&&(v=x=(v+x)/2),S<y&&(y=S=(y+S)/2),t(c,v,y,x,S))}return l.round=function(c){return arguments.length?(e=!!c,l):e},l.size=function(c){return arguments.length?(r=+c[0],n=+c[1],l):[r,n]},l.tile=function(c){return arguments.length?(t=Fa(c),l):t},l.padding=function(c){return arguments.length?l.paddingInner(c).paddingOuter(c):l.paddingInner()},l.paddingInner=function(c){return arguments.length?(a=typeof c=="function"?c:Vt(+c),l):a},l.paddingOuter=function(c){return arguments.length?l.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):l.paddingTop()},l.paddingTop=function(c){return arguments.length?(o=typeof c=="function"?c:Vt(+c),l):o},l.paddingRight=function(c){return arguments.length?(s=typeof c=="function"?c:Vt(+c),l):s},l.paddingBottom=function(c){return arguments.length?(u=typeof c=="function"?c:Vt(+c),l):u},l.paddingLeft=function(c){return arguments.length?(f=typeof c=="function"?c:Vt(+c),l):f},l}var Uc=h(()=>{ja();Rn();Mn();Oa()});function Vc(t,e,r,n,i){var a=t.children,o,s=a.length,u,f=new Array(s+1);for(f[0]=u=o=0;o<s;++o)f[o+1]=u+=a[o].value;l(0,s,t.value,e,r,n,i);function l(d,c,p,v,y,x,S){if(d>=c-1){var g=a[d];g.x0=v,g.y0=y,g.x1=x,g.y1=S;return}for(var _=f[d],b=p/2+_,C=d+1,M=c-1;C<M;){var D=C+M>>>1;f[D]<b?C=D+1:M=D}b-f[C-1]<f[C]-b&&d+1<C&&--C;var O=f[C]-_,R=p-O;if(x-v>S-y){var H=p?(v*R+x*O)/p:x;l(d,C,O,v,y,H,S),l(C,c,R,H,y,x,S)}else{var $=p?(y*R+S*O)/p:S;l(d,C,O,v,y,x,$),l(C,c,R,v,$,x,S)}}}var Xc=h(()=>{});function Yc(t,e,r,n,i){(t.depth&1?Xt:bt)(t,e,r,n,i)}var Wc=h(()=>{Te();wr()});var Kc,Jc=h(()=>{Te();wr();Rn();Kc=function t(e){function r(n,i,a,o,s){if((u=n._squarify)&&u.ratio===e)for(var u,f,l,d,c=-1,p,v=u.length,y=n.value;++c<v;){for(f=u[c],l=f.children,d=f.value=0,p=l.length;d<p;++d)f.value+=l[d].value;f.dice?bt(f,i,a,o,y?a+=(s-a)*f.value/y:s):Xt(f,i,a,y?i+=(o-i)*f.value/y:o,s),y-=f.value}else n._squarify=u=Ya(e,n,i,a,o,s),u.ratio=e}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Xa)});var Ln={};Er(Ln,{Node:()=>wt,cluster:()=>Wl,hierarchy:()=>yr,pack:()=>Oc,packEnclose:()=>Nc,packSiblings:()=>Pc,partition:()=>Rc,stratify:()=>Hc,tree:()=>jc,treemap:()=>Gc,treemapBinary:()=>Vc,treemapDice:()=>bt,treemapResquarify:()=>Kc,treemapSlice:()=>Xt,treemapSliceDice:()=>Yc,treemapSquarify:()=>Dn});var zn=h(()=>{Kl();kn();Dc();Ha();za();Lc();$c();Bc();Uc();Xc();Te();wr();Wc();Rn();Jc()});var br=j(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.IdGenerator=void 0;var ug=function(){function t(){this.ids=new Map}return t.prototype.getId=function(e){if(this.ids.has(e)){var r=this.ids.get(e);return this.ids.set(e,r+1),"".concat(e,":").concat(r)}return this.ids.set(e,1),e},t}();qn.IdGenerator=ug});var $n=j(oe=>{"use strict";var Wa=oe&&oe.__assign||function(){return Wa=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Wa.apply(this,arguments)};Object.defineProperty(oe,"__esModule",{value:!0});oe.AncestorChart=void 0;oe.getAncestorsTree=cg;var Hn=he(),Qc=Ut(),fg=(zn(),rt(Ln)),lg=br();function cg(t){var e=Wa({},t),r=t.startIndi?t.data.getIndi(t.startIndi).getFamiliesAsSpouse():[];if(r.length){e.startFam=r[0],delete e.startIndi;var n=t.data.getFam(r[0]);n.getMother()===t.startIndi&&(e.swapStartSpouses=!0)}var i=new Zc(e),a=i.createHierarchy();return r.length>1&&a.children&&a.children.length>1&&(a.children.pop(),delete a.data.spouseParentNodeId),a}var Zc=function(){function t(e){this.options=e,this.util=new Qc.ChartUtil(e)}return t.prototype.createHierarchy=function(){var e,r,n=[],i=[],a=this.options.idGenerator||new lg.IdGenerator;if(this.options.startIndi){var o=this.options.data.getIndi(this.options.startIndi),s=o.getFamilyAsChild(),u=s?a.getId(s):void 0;s&&i.push({id:s,parentId:this.options.startIndi,family:{id:s}});var f={id:this.options.startIndi,indi:{id:this.options.startIndi}};u&&(f.indiParentNodeId=u),n.push(f)}else i.push({id:a.getId(this.options.startFam),family:{id:this.options.startFam}});for(;i.length;){var l=i.pop(),d=this.options.data.getFam(l.family.id);if(d){var c=l.family.id===this.options.startFam&&this.options.swapStartSpouses?[d.getMother(),d.getFather()]:[d.getFather(),d.getMother()],p=c[0],v=c[1];if(!(!p&&!v)){if(v){l.spouse={id:v};var o=this.options.data.getIndi(v),s=o.getFamilyAsChild();if(s)if(!((e=this.options.collapsedSpouse)===null||e===void 0)&&e.has(l.id))l.spouse.expander=Hn.ExpanderState.PLUS;else{var u=a.getId(s);l.spouseParentNodeId=u,l.spouse.expander=Hn.ExpanderState.MINUS,i.push({id:u,parentId:l.id,family:{id:s}})}}if(p){l.indi={id:p};var o=this.options.data.getIndi(p),s=o.getFamilyAsChild();if(s)if(!((r=this.options.collapsedIndi)===null||r===void 0)&&r.has(l.id))l.indi.expander=Hn.ExpanderState.PLUS;else{var u=a.getId(s);l.indiParentNodeId=u,l.indi.expander=Hn.ExpanderState.MINUS,i.push({id:u,parentId:l.id,family:{id:s}})}}n.push(l)}}}return(0,fg.stratify)()(n)},t.prototype.render=function(){var e=this.createHierarchy(),r=this.util.layOutChart(e,{flipVertically:!0}),n=this.util.renderChart(r),i=(0,Qc.getChartInfo)(r);return this.util.updateSvgDimensions(i),Object.assign(i,{animationPromise:n})},t}();oe.AncestorChart=Zc});var td=j(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.CircleRenderer=void 0;var dg=function(){function t(e){this.options=e}return t.prototype.getFamilyAnchor=function(e){return[0,0]},t.prototype.getIndiAnchor=function(e){return[0,0]},t.prototype.getSpouseAnchor=function(e){return[0,0]},t.prototype.updateNodes=function(e){e.forEach(function(r){var n;n=r.data.family?[120,120]:[80,80],r.data.width=n[0],r.data.height=n[1]})},t.prototype.getName=function(e){if(!e)return"";var r=this.options.data.getIndi(e.id),n=r.getFirstName();return n?n.split(" ")[0]:""},t.prototype.render=function(e,r){var n=this;e=e.append("g").attr("class","circle"),r=r.select("g"),e.append("circle").attr("r",function(i){return i.data.width/2}).attr("cx",function(i){return i.data.width/2}).attr("cy",function(i){return i.data.height/2}),e.filter(function(i){return!!i.data.family}).append("text").attr("text-anchor","middle").attr("transform",function(i){return"translate(".concat(i.data.width/2,", ").concat(i.data.height/2-4,")")}).text(function(i){return n.getName(i.data.indi)}),e.filter(function(i){return!!i.data.family}).append("text").attr("text-anchor","middle").attr("transform",function(i){return"translate(".concat(i.data.width/2,", ").concat(i.data.height/2+14,")")}).text(function(i){return n.getName(i.data.spouse)}),e.filter(function(i){return!i.data.family}).append("text").attr("text-anchor","middle").attr("transform",function(i){return"translate(".concat(i.data.width/2,", ").concat(i.data.height/2+4,")")}).text(function(i){return n.getName(i.data.indi)})},t.prototype.getCss=function(){return`
    circle {
      fill: white;
      stroke: #040;
      stroke-width: 5px;
    }
    .circle text {
      font-family: verdana, arial, sans-serif;
      font-size: 12px;
    }
    .background {
      stroke: none;
    }
    `},t}();jn.CircleRenderer=dg});var Ka=j(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.JsonDataProvider=void 0;var hg=function(){function t(e){this.json=e}return t.prototype.getId=function(){return this.json.id},t.prototype.getFamiliesAsSpouse=function(){return this.json.fams||[]},t.prototype.getFamilyAsChild=function(){return this.json.famc||null},t.prototype.getFirstName=function(){return this.json.firstName||null},t.prototype.getLastName=function(){return this.json.lastName||null},t.prototype.getBirthDate=function(){return this.json.birth||null},t.prototype.getMaidenName=function(){return this.json.maidenName||null},t.prototype.getNumberOfChildren=function(){return this.json.numberOfChildren||null},t.prototype.getNumberOfMarriages=function(){return this.json.numberOfMarriages||null},t.prototype.getBirthPlace=function(){return this.json.birth&&this.json.birth.place||null},t.prototype.getDeathDate=function(){return this.json.death||null},t.prototype.getDeathPlace=function(){return this.json.death&&this.json.death.place||null},t.prototype.isConfirmedDeath=function(){return!!this.json.death&&!!this.json.death.confirmed},t.prototype.getSex=function(){return this.json.sex||null},t.prototype.getImageUrl=function(){return this.json.images&&this.json.images.length>0&&this.json.images[0].url||null},t.prototype.getImages=function(){return this.json.images||null},t.prototype.getNotes=function(){return this.json.notes||null},t.prototype.getEvents=function(){return this.json.events||null},t.prototype.showId=function(){return!this.json.hideId},t.prototype.showSex=function(){return!this.json.hideSex},t}(),pg=function(){function t(e){this.json=e}return t.prototype.getId=function(){return this.json.id},t.prototype.getFather=function(){return this.json.husb||null},t.prototype.getMother=function(){return this.json.wife||null},t.prototype.getChildren=function(){return this.json.children||[]},t.prototype.getMarriageDate=function(){return this.json.marriage||null},t.prototype.getMarriagePlace=function(){return this.json.marriage&&this.json.marriage.place||null},t}(),mg=function(){function t(e){var r=this;this.json=e,this.indis=new Map,this.fams=new Map,e.indis.forEach(function(n){return r.indis.set(n.id,new hg(n))}),e.fams.forEach(function(n){return r.fams.set(n.id,new pg(n))})}return t.prototype.getIndi=function(e){return this.indis.get(e)||null},t.prototype.getFam=function(e){return this.fams.get(e)||null},t}();Bn.JsonDataProvider=mg});var Za=j(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.formatDate=Gn;Un.formatDateOrRange=_g;var gg=new Map([[1,"Jan"],[2,"Feb"],[3,"Mar"],[4,"Apr"],[5,"May"],[6,"Jun"],[7,"Jul"],[8,"Aug"],[9,"Sep"],[10,"Oct"],[11,"Nov"],[12,"Dec"]]),vg=new Map([["bg",new Map([["cal","\u043F\u0440\u0438\u0431\u043B."],["abt","\u043E\u043A."],["est","\u043E\u0446."],["before","\u043F\u0440\u0435\u0434\u0438"],["after","\u0441\u043B\u0435\u0434"]])],["cs",new Map([["cal","vypo\u010Dt."],["abt","okolo"],["est","odhadem"],["before","p\u0159ed"],["after","po"]])],["de",new Map([["cal","errech."],["abt","etwa"],["est","gesch\xE4t."],["before","vor"],["after","nach"]])],["fr",new Map([["cal","calc."],["abt","vers"],["est","est."],["before","avant"],["after","apr\xE8s"]])],["it",new Map([["cal","calc."],["abt","circa il"],["est","stim."],["before","prima del"],["after","dopo del"]])],["pl",new Map([["cal","wyl."],["abt","ok."],["est","szac."],["before","przed"],["after","po"]])],["ru",new Map([["cal","\u0432\u044B\u0447."],["abt","\u043E\u043A."],["est","\u043E\u0446\u0435\u043D."],["before","\u0434\u043E"],["after","\u043F\u043E\u0441\u043B\u0435"]])]]),Ja=new Map;function xg(t,e){if(!Intl||!Intl.DateTimeFormat)return gg.get(t);var r="".concat(t,"|").concat(e||"");if(Ja.has(r))return Ja.get(r);var n=new Intl.DateTimeFormat(e,{month:"short"}).format(new Date(2e3,t-1));return Ja.set(r,n),n}function Qa(t,e){var r=e&&e.split(/[-_]/)[0],n=r&&vg.get(r);return n?n.get(t):t}function yg(t,e,r,n){if(!t&&!e&&!r)return"";if(!Intl||!Intl.DateTimeFormat||!n||n==="en")return[t,e&&xg(e,n),r].join(" ");var i={day:t?"numeric":void 0,month:e?"short":void 0,year:r?"numeric":void 0};return new Intl.DateTimeFormat(n,i).format(new Date(r??2e3,e?e-1:1,t??1))}function Gn(t,e){return[t.qualifier&&Qa(t.qualifier,e),yg(t.day,t.month,t.year,e),t.text].join(" ")}function _g(t,e){if(t.date)return Gn(t.date,e);if(!t.dateRange)return"";var r=t.dateRange.from&&Gn(t.dateRange.from,e),n=t.dateRange.to&&Gn(t.dateRange.to,e);return r&&n?"".concat(r," .. ").concat(n):r?"".concat(Qa("after",e)," ").concat(r):n?"".concat(Qa("before",e)," ").concat(n):""}});var Ir=j(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.DescendantChart=It.DUMMY_ROOT_NODE_ID=void 0;It.layOutDescendants=Ig;var wg=(zn(),rt(Ln)),ed=he(),to=Ut(),bg=br();It.DUMMY_ROOT_NODE_ID="DUMMY_ROOT_NODE";function Ig(t,e){e===void 0&&(e={});var r=new nd(t),n=r.createHierarchy();return rd(new to.ChartUtil(t).layOutChart(n,e))}function rd(t){if(t[0].id!==It.DUMMY_ROOT_NODE_ID)return t;var e=t.slice(1),r=-e[0].x,n=-e[0].y;return e.forEach(function(i){i.parent&&i.parent.id===It.DUMMY_ROOT_NODE_ID&&!i.data.additionalMarriage&&(i.parent=null),i.x+=r,i.y+=n,i.data.generation--}),e}function Sg(t,e){return e.getFather()===t?e.getMother():e.getFather()}var nd=function(){function t(e){this.options=e,this.util=new to.ChartUtil(e)}return t.prototype.getNodes=function(e){var r=this,n=this.options.data.getIndi(e),i=n.getFamiliesAsSpouse();if(!i.length)return[{id:e,indi:{id:e}}];var a=i.map(function(o){var s={id:o,indi:{id:e},family:{id:o}},u=r.options.data.getFam(o),f=Sg(e,u);return f&&(s.spouse={id:f}),s});return a.slice(1).forEach(function(o){o.additionalMarriage=!0}),a},t.prototype.getFamNode=function(e){var r={id:e,family:{id:e}},n=this.options.data.getFam(e),i=n.getFather();i&&(r.indi={id:i});var a=n.getMother();return a&&(r.spouse={id:a}),r},t.prototype.createHierarchy=function(){var e=this,r,n=[],i=this.options.startIndi?this.getNodes(this.options.startIndi):[this.getFamNode(this.options.startFam)],a=this.options.idGenerator||new bg.IdGenerator;if(i.forEach(function(l){return l.id=a.getId(l.id)}),i.length>1){var o={id:It.DUMMY_ROOT_NODE_ID,height:1,width:1};n.push(o),i.forEach(function(l){return l.parentId=o.id})}n.push.apply(n,i);var s=[];i.forEach(function(l){l.family&&s.push(l)});for(var u=function(){var l=s.pop(),d=f.options.data.getFam(l.family.id),c=d.getChildren(),p=(r=f.options.collapsedFamily)===null||r===void 0?void 0:r.has(l.id);c.length&&(l.family.expander=p?ed.ExpanderState.PLUS:ed.ExpanderState.MINUS),p||c.forEach(function(v){var y=e.getNodes(v);y.forEach(function(x){x.parentId=l.id,x.family&&(x.id="".concat(a.getId(x.family.id)),s.push(x))}),n.push.apply(n,y)})},f=this;s.length;)u();return(0,wg.stratify)()(n)},t.prototype.render=function(){var e=this.createHierarchy(),r=rd(this.util.layOutChart(e)),n=this.util.renderChart(r),i=(0,to.getChartInfo)(r);return this.util.updateSvgDimensions(i),Object.assign(i,{animationPromise:n})},t}();It.DescendantChart=nd});var id=j(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.FancyChart=void 0;var Ng=(ee(),rt(te)),eo=Ut(),ro=Ir();function Ag(t,e,r,n){var i=n+110;return r>t+100?`
      M `.concat(t+10,"       ").concat(e,`
      C `).concat(t+10,"       ").concat(i+25,`
        `).concat(t+45,"       ").concat(i+10,`
        `).concat((t+r)/2," ").concat(i+5,`
        `).concat(r-45,"       ").concat(i,`
        `).concat(r+2,"        ").concat(i-25,`
        `).concat(r+2,"        ").concat(n,`
      L `).concat(r-2,"        ").concat(n,`
      C `).concat(r-2,"        ").concat(i-25,`
        `).concat(r-45,"       ").concat(i-10,`
        `).concat((t+r)/2," ").concat(i-5,`
        `).concat(t+45,"       ").concat(i,`
        `).concat(t-10,"       ").concat(i+25,`
        `).concat(t-10,"       ").concat(e):r<t-100?`
      M `.concat(t-10,"       ").concat(e,`
      C `).concat(t-10,"       ").concat(i+25,`
        `).concat(t-45,"       ").concat(i+10,`
        `).concat((t+r)/2," ").concat(i+5,`
        `).concat(r+45,"       ").concat(i,`
        `).concat(r-2,"        ").concat(i-25,`
        `).concat(r-2,"        ").concat(n,`
      L `).concat(r+2,"        ").concat(n,`
      C `).concat(r+2,"        ").concat(i-25,`
        `).concat(r+45,"       ").concat(i-10,`
        `).concat((t+r)/2," ").concat(i-5,`
        `).concat(t-45,"       ").concat(i,`
        `).concat(t+10,"       ").concat(i+25,`
        `).concat(t+10,"       ").concat(e):`
    M `.concat(t+10,"       ").concat(e,`
    C `).concat(t+10,"       ").concat(i+25,`
      `).concat(r+2,"        ").concat(i-25,`
      `).concat(r+2,"        ").concat(n,`
    L `).concat(r-2,"        ").concat(n,`
    C `).concat(r-2,"        ").concat(i-25,`
      `).concat(t-10,"       ").concat(i+25,`
      `).concat(t-10,"       ").concat(e)}var Cg=function(){function t(e){this.options=e,this.util=new eo.ChartUtil(e)}return t.prototype.linkVertical=function(e,r){var n=this.options.renderer.getFamilyAnchor(e.data),i=e.id===r.data.spouseParentNodeId?this.options.renderer.getSpouseAnchor(r.data):this.options.renderer.getIndiAnchor(r.data),a=[e.x+n[0],e.y+n[1]],o=a[0],s=a[1],u=[r.x+i[0],r.y+i[1]],f=u[0],l=u[1];return Ag(f,l,o,s)},t.prototype.linkAdditionalMarriage=function(e){var r=e.parent.children.findIndex(function(c){return c.id===e.id}),n=e.parent.children[r-1],i=this.options.renderer.getIndiAnchor(e.data),a=this.options.renderer.getIndiAnchor(n.data),o=[e.x+i[0],e.y+i[1]],s=o[0],u=o[1],f=[n.x+a[0],n.y+a[1]],l=f[0],d=f[1];return"M ".concat(s,", ").concat(u+2,`
              L `).concat(l,", ").concat(d+10,`
              `).concat(l,", ").concat(d-10,`
              `).concat(s,", ").concat(u-2)},t.prototype.renderBackground=function(e,r){r.select("g").append("rect").attr("x",-e.origin[0]).attr("y",-e.origin[1]).attr("width",e.size[0]).attr("height",e.origin[1]).attr("fill","#cff"),r.select("g").append("rect").attr("x",-e.origin[0]).attr("y",0).attr("width",e.size[0]).attr("height",e.size[1]-e.origin[1]).attr("fill","#494")},t.prototype.renderLeaves=function(e,r){var n=r.select("g").append("radialGradient").attr("id","gradient");n.append("stop").attr("offset","0%").attr("stop-color","#8f8"),n.append("stop").attr("offset","80%").attr("stop-color","#8f8").attr("stop-opacity",.5),n.append("stop").attr("offset","100%").attr("stop-color","#8f8").attr("stop-opacity",0);var i=e.filter(function(l){return l.parent&&l.parent.id!==ro.DUMMY_ROOT_NODE_ID}),a=(0,Ng.min)(i,function(l){return l.data.generation})||0,o=function(l){return 280-180/Math.sqrt(1+l.data.generation-a)};{var s=r.select("g").selectAll("g.background").data(i,function(l){return l.id}),u=s.enter().append("g");u.merge(s).attr("class","background").attr("transform",function(l){return"translate(".concat(l.x-l.data.width/2,", ").concat(l.y-l.data.height/2,")")});var f=u.append("g").attr("class","background");f.append("circle").attr("class","background").attr("r",o).attr("cx",function(l){return l.data.width/2}).attr("cy",function(l){return l.data.height/2}).style("fill","#493")}{var s=r.select("g").selectAll("g.background2").data(i,function(p){return p.id}),u=s.enter().append("g");u.merge(s).attr("class","background2").attr("transform",function(p){return"translate(".concat(p.x-p.data.width/2,", ").concat(p.y-p.data.height/2,")")});var f=u.append("g").attr("class","background2");f.append("circle").attr("class","background").attr("r",o).attr("cx",function(p){return p.data.width/2}).attr("cy",function(p){return p.data.height/2}).style("fill","url(#gradient)")}},t.prototype.renderLinks=function(e,r){var n=this,i=function(o,s){return s.data.additionalMarriage?n.linkAdditionalMarriage(s):n.linkVertical(s,o)},a=e.filter(function(o){return!!o.parent});r.select("g").selectAll("path.branch").data(a,eo.linkId).enter().append("path").attr("class",function(o){return o.data.additionalMarriage?"branch additional-marriage":"branch"}).attr("d",function(o){return i(o.parent,o)})},t.prototype.renderTreeTrunk=function(e,r){var n=e.filter(function(i){return!i.parent||i.parent.id===ro.DUMMY_ROOT_NODE_ID});r.select("g").selectAll("g.trunk").data(n,function(i){return i.id}).enter().append("g").attr("class","trunk").attr("transform",function(i){return"translate(".concat(i.x,", ").concat(i.y,")")}).append("path").attr("d",`
          M 10 20
          L 10 40
          C 10 60 10 90 40 90
          L -40 90
          C -10 90 -10 60 -10 40
          L -10 20`)},t.prototype.render=function(){var e=(0,ro.layOutDescendants)(this.options,{flipVertically:!0,vSpacing:100}),r=(0,eo.getChartInfo)(e);r.origin[0]+=150,r.origin[1]+=150,r.size[0]+=300,r.size[1]+=250;var n=this.util.getSvgForRendering();return n.append("style").text(`
      .branch, .trunk {
        fill: #632;
        stroke: #632;
      }`),this.renderBackground(r,n),this.renderLeaves(e,n),this.renderLinks(e,n),this.renderTreeTrunk(e,n),this.util.renderNodes(e,n),this.util.updateSvgDimensions(r),Object.assign(r,{animationPromise:Promise.resolve()})},t}();Vn.FancyChart=Cg});var od=j(ue=>{"use strict";var kg=ue&&ue.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ue,"__esModule",{value:!0});ue.DetailedRenderer=void 0;ue.getLength=Fe;var Mg=(it(),rt(Be)),ad=ao(),no=Za(),St=(ee(),rt(te));Ea();var Sr=xr(),Eg=44,Pg=64,Xn=70,Tg=90,se=14,Fg=200,Og=500,io=new Map;function Fe(t,e){var r="".concat(t,"|").concat(e);if(io.has(r))return io.get(r);var n=(0,Mg.select)("svg").append("g").attr("class","detailed node"),i=n.append("text").attr("class",e).text(t),a=i.node().getComputedTextLength();return n.remove(),io.set(r,a),a}var Dg=new Map([["F","\u2640"],["M","\u2642"]]),Rg=function(t){kg(e,t);function e(r){var n=t.call(this,r)||this;return n.options=r,n}return e.prototype.getColoringClass=function(){switch(this.options.colors){case ad.ChartColors.NO_COLOR:return"nocolor";case ad.ChartColors.COLOR_BY_SEX:return"bysex";default:return"bygeneration"}},e.prototype.getIndiDetails=function(r){var n=[],i=r.getBirthDate()&&(0,no.formatDateOrRange)(r.getBirthDate(),this.options.locale),a=r.getBirthPlace(),o=r.getDeathDate()&&(0,no.formatDateOrRange)(r.getDeathDate(),this.options.locale),s=r.getDeathPlace();i&&n.push({symbol:"",text:i}),a&&n.push({symbol:"",text:a}),(i||a)&&(n[0].symbol="*");var u=n.length;return o&&n.push({symbol:"",text:o}),s&&n.push({symbol:"",text:s}),o||s?n[u].symbol="+":r.isConfirmedDeath()&&n.push({symbol:"+",text:""}),n},e.prototype.getFamDetails=function(r){var n=[],i=r.getMarriageDate()&&(0,no.formatDateOrRange)(r.getMarriageDate(),this.options.locale),a=r.getMarriagePlace();return i&&n.push({symbol:"",text:i}),a&&n.push({symbol:"",text:a}),(i||a)&&(n[0].symbol="\u26AD"),n},e.prototype.getPreferredIndiSize=function(r){var n=this.options.data.getIndi(r),i=this.getIndiDetails(n),a=n.showId()||n.showSex()?se:0,o=(0,St.max)([Eg+i.length*se+a,n.getImageUrl()?Tg:0]),s=(0,St.max)(i.map(function(f){return Fe(f.text,"details")})),u=(0,St.max)([s+22,Fe(n.getFirstName()||"","name")+8,Fe(n.getLastName()||"","name")+8,Fe(r,"id")+32,Pg])+(n.getImageUrl()?Xn:0);return[u,o]},e.prototype.getPreferredFamSize=function(r){var n=this.options.data.getFam(r),i=this.getFamDetails(n);if(!i.length)return[0,0];var a=10+i.length*se,o=(0,St.max)(i.map(function(u){return Fe(u.text,"details")})),s=o+22;return[s,a]},e.prototype.render=function(r,n){var i=this;r=r.append("g").attr("class","detailed"),n=n.select("g");var a=r.merge(n).selectAll("g.indi").data(function(f){var l=[],d=!i.options.horizontal&&f.data.family?(0,St.max)([-(0,Sr.getFamPositionVertical)(f.data),0]):0,c=i.options.horizontal&&f.data.family?(0,St.max)([-(0,Sr.getFamPositionHorizontal)(f.data),0]):0;return f.data.indi&&l.push({indi:f.data.indi,generation:f.data.generation,xOffset:d,yOffset:0}),f.data.spouse&&l.push({indi:f.data.spouse,generation:f.data.generation,xOffset:!i.options.horizontal&&f.data.indi?f.data.indi.width+d:0,yOffset:i.options.horizontal&&f.data.indi?f.data.indi.height+c:0}),l},function(f){return f.indi.id}),o=a.enter().append("g").attr("class","indi");this.transition(o.merge(a)).attr("transform",function(f){return"translate(".concat(f.xOffset,", ").concat(f.yOffset,")")}),this.renderIndi(o,a);var s=r.select(function(f){return f.data.family?this:null}).append("g").attr("class","family"),u=n.select(function(f){return f.data.family?this:null}).select("g.family");this.transition(s.merge(u)).attr("transform",function(f){return i.getFamTransform(f.data)}),this.renderFamily(s,u)},e.prototype.getCss=function(){return`
.detailed text {
  font-family: verdana, arial, sans-serif;
  fill: black;
}

.detailed .name {
  font-size: 12px;
  font-weight: bold;
}

.link {
  fill: none;
  stroke: #000;
  stroke-width: 1px;
}

.additional-marriage {
  stroke-dasharray: 2;
}

.detailed rect {
  stroke: black;
}

.detailed {
  stroke-width: 2px;
}

.detailed .details {
  font-size: 10px;
}

.detailed .id {
  font-size: 10px;
  font-style: italic;
}

.detailed rect.nocolor {
  fill: #ffffff;
}

.detailed rect.bysex {
  fill: #eeeeee;
}

.detailed rect.bysex.male {
  fill: #dbffff;
}

.detailed rect.bysex.female {
  fill: #ffdbed;
}

.detailed rect.bygeneration {
  fill: #ffffdd;
}

.generation-11 .detailed rect.bygeneration, .generation1 .detailed rect.bygeneration {
  fill: #edffdb;
}

.generation-10 .detailed rect.bygeneration, .generation2 .detailed rect.bygeneration {
  fill: #dbffdb;
}

.generation-9 .detailed rect.bygeneration, .generation3 .detailed rect.bygeneration {
  fill: #dbffed;
}

.generation-8 .detailed rect.bygeneration, .generation4 .detailed rect.bygeneration {
  fill: #dbffff;
}

.generation-7 .detailed rect.bygeneration, .generation5 .detailed rect.bygeneration {
  fill: #dbedff;
}

.generation-6 .detailed rect.bygeneration, .generation6 .detailed rect.bygeneration {
  fill: #dbdbff;
}

.generation-5 .detailed rect.bygeneration, .generation7 .detailed rect.bygeneration {
  fill: #eddbff;
}

.generation-4 .detailed rect.bygeneration, .generation8 .detailed rect.bygeneration {
  fill: #ffdbff;
}

.generation-3 .detailed rect.bygeneration, .generation9 .detailed rect.bygeneration {
  fill: #ffdbed;
}

.generation-2 .detailed rect.bygeneration, .generation10 .detailed rect.bygeneration {
  fill: #ffdbdb;
}

.generation-1 .detailed rect.bygeneration, .generation11 .detailed rect.bygeneration {
  fill: #ffeddb;
}`},e.prototype.transition=function(r){return this.options.animate?r.transition().delay(Fg).duration(Og):r},e.prototype.getFamTransform=function(r){return this.options.horizontal?"translate(".concat(r.indi&&r.indi.width||r.spouse.width,", ").concat((0,St.max)([(0,Sr.getFamPositionHorizontal)(r),0]),")"):"translate(".concat((0,St.max)([(0,Sr.getFamPositionVertical)(r),0]),", ").concat(r.indi&&r.indi.height||r.spouse.height,")")},e.prototype.getSexClass=function(r){var n,i=(n=this.options.data.getIndi(r))===null||n===void 0?void 0:n.getSex();switch(i){case"M":return"male";case"F":return"female";default:return""}},e.prototype.renderIndi=function(r,n){var i=this;this.options.indiHrefFunc&&(r=r.append("a").attr("href",function(g){return i.options.indiHrefFunc(g.indi.id)}),n=n.select("a")),this.options.indiCallback&&r.on("click",function(g,_){return i.options.indiCallback({id:_.indi.id,generation:_.generation})});var a=r.append("rect").attr("rx",5).attr("stroke-width",0).attr("class",function(g){return"background ".concat(i.getColoringClass()," ").concat(i.getSexClass(g.indi.id))}).merge(n.select("rect.background")),o=this.transition(a);o.attr("width",function(g){return g.indi.width}),o.attr("height",function(g){return g.indi.height});var s=function(g){return"clip-".concat(g)};r.append("clipPath").attr("id",function(g){return s(g.indi.id)}).append("rect").attr("rx",5).merge(n.select("clipPath rect")).attr("width",function(g){return g.indi.width}).attr("height",function(g){return g.indi.height});var u=function(g){return i.options.data.getIndi(g.indi.id)},f=function(g){return g.indi.width-(u(g).getImageUrl()?Xn:0)};r.append("text").attr("text-anchor","middle").attr("class","name").attr("transform",function(g){return"translate(".concat(f(g)/2,", 17)")}).text(function(g){return u(g).getFirstName()}),r.append("text").attr("text-anchor","middle").attr("class","name").attr("transform",function(g){return"translate(".concat(f(g)/2,", 33)")}).text(function(g){return u(g).getLastName()});var l=new Map;r.each(function(g){var _=u(g),b=i.getIndiDetails(_);l.set(g.indi.id,b)});for(var d=(0,St.max)(Array.from(l.values(),function(g){return g.length})),c=function(g){var _=r.filter(function(b){return l.get(b.indi.id).length>g});_.append("text").attr("text-anchor","middle").attr("class","details").attr("transform","translate(9, ".concat(49+g*se,")")).text(function(b){return l.get(b.indi.id)[g].symbol}),_.append("text").attr("class","details").attr("transform","translate(15, ".concat(49+g*se,")")).text(function(b){return l.get(b.indi.id)[g].text})},p=0;p<d;++p)c(p);var v=r.append("text").attr("class","id").text(function(g){return u(g).showId()?g.indi.id:""}).merge(n.select("text.id"));this.transition(v).attr("transform",function(g){return"translate(9, ".concat(g.indi.height-5,")")});var y=r.append("text").attr("class","details sex").attr("text-anchor","end").text(function(g){var _=Dg.get(u(g).getSex()||"")||"";return u(g).showSex()?_:""}).merge(n.select("text.sex"));this.transition(y).attr("transform",function(g){return"translate(".concat(f(g)-5,", ").concat(g.indi.height-5,")")}),r.filter(function(g){return!!u(g).getImageUrl()}).append("image").attr("width",Xn).attr("height",function(g){return g.indi.height}).attr("preserveAspectRatio","xMidYMin").attr("transform",function(g){return"translate(".concat(g.indi.width-Xn,", 0)")}).attr("clip-path",function(g){return"url(#".concat(s(g.indi.id),")")}).attr("href",function(g){return u(g).getImageUrl()});var x=r.append("rect").attr("rx",5).attr("fill-opacity",0).attr("class","border").merge(n.select("rect.border")),S=this.transition(x);S.attr("width",function(g){return g.indi.width}),S.attr("height",function(g){return g.indi.height})},e.prototype.renderFamily=function(r,n){var i=this;this.options.famHrefFunc&&(r=r.append("a").attr("href",function(f){return i.options.famHrefFunc(f.data.family.id)})),this.options.famCallback&&r.on("click",function(f,l){return i.options.famCallback({id:l.data.family.id,generation:l.data.generation})});var a=new Map;r.each(function(f){var l=f.data.family.id,d=i.options.data.getFam(l),c=i.getFamDetails(d);a.set(l,c)});var o=(0,St.max)(Array.from(a.values(),function(f){return f.length}));r.filter(function(f){var l=a.get(f.data.family.id);return 0<l.length}).append("rect").attr("class",this.getColoringClass()).attr("rx",5).attr("ry",5).attr("width",function(f){return f.data.family.width}).attr("height",function(f){return f.data.family.height});for(var s=function(f){var l=r.filter(function(d){return a.get(d.data.family.id).length>f});l.append("text").attr("text-anchor","middle").attr("class","details").attr("transform","translate(9, ".concat(16+f*se,")")).text(function(d){return a.get(d.data.family.id)[f].symbol}),l.append("text").attr("text-anchor","start").attr("class","details").attr("transform","translate(15, ".concat(16+f*se,")")).text(function(d){return a.get(d.data.family.id)[f].text})},u=0;u<o;++u)s(u)},e}(Sr.CompositeRenderer);ue.DetailedRenderer=Rg});var sd=j((oo,so)=>{(function(t,e){typeof oo=="object"&&typeof so<"u"?so.exports=e():typeof define=="function"&&define.amd?define(e):t.crawl=e()})(oo,function(){"use strict";function t(_,b){this.flags=_,this.cursor=b}t.prototype={skip:function(){this.flags.skip=!0},break:function(){this.flags.break=!0},remove:function(){this.flags.remove=!0},replace:function(b){this.flags.replace=b},get parent(){return this.cursor.parent},get depth(){return this.cursor.depth},get level(){return this.cursor.depth+1},get index(){return this.cursor.index}};function e(_,b){return new t(_,b)}function r(_){this.xs=[_],this.top=0}r.prototype={push:function(b){this.top++,this.top<this.xs.length?this.xs[this.top]=b:this.xs.push(b)},pushArrayReverse:function(b){for(var C=b.length-1;C>=0;C--)this.push(b[C])},pop:function(){var b=this.peek();return this.top--,b},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===-1}};function n(_){return new r(_)}function i(){this.depth=0,this.stack=n({node:null,index:-1})}i.prototype={moveDown:function(b){this.depth++,this.stack.push({node:b,index:0})},moveUp:function(){this.depth--,this.stack.pop()},moveNext:function(){this.stack.peek().index++},get parent(){return this.stack.peek().node},get index(){return this.stack.peek().index}};function a(){return new i}function o(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}o.prototype={reset:function(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}};function s(){return new o}function u(_){return _&&_.length!==0}function f(_,b,C){for(var M=s(),D=a(),O=e(M,D),R=n(_),H=Object.assign({},_);!R.isEmpty();){var $=R.pop();if($===H){D.moveUp();continue}if(M.reset(),b($,O),M.break)break;if(!M.remove&&(D.moveNext(),!M.skip)){M.replace&&($=M.replace);var gt=C($);u(gt)&&(R.push(H),R.pushArrayReverse(gt),D.moveDown($))}}}function l(_,b,C){for(var M=s(),D=a(),O=e(M,D),R=n(_),H=n(null);!R.isEmpty();){var $=R.peek(),gt=H.peek(),Ot=C($);if(M.reset(),$===gt||!u(Ot)){if($===gt&&(H.pop(),D.moveUp()),R.pop(),b($,O),M.break)break;if(M.remove)continue;D.moveNext()}else H.push($),D.moveDown($),R.pushArrayReverse(Ot)}}var d=32768;function c(_){this.xs=[_],this.top=0,this.maxLength=0}c.prototype={enqueue:function(b){this.xs.push(b)},enqueueMultiple:function(b){for(var C=0,M=b.length;C<M;C++)this.enqueue(b[C])},dequeue:function(){var b=this.peek();return this.top++,this.top===d&&(this.xs=this.xs.slice(this.top),this.top=0),b},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===this.xs.length}};function p(_){return new c(_)}function v(){this.depth=0,this.index=-1,this.queue=p({node:null,arity:1}),this.levelNodes=1,this.nextLevelNodes=0}v.prototype={store:function(b,C){this.queue.enqueue({node:b,arity:C}),this.nextLevelNodes+=C},moveNext:function(){this.index++},moveForward:function(){this.queue.peek().arity--,this.levelNodes--,this.queue.peek().arity===0&&(this.index=0,this.queue.dequeue()),this.levelNodes===0&&(this.depth++,this.levelNodes=this.nextLevelNodes,this.nextLevelNodes=0)},get parent(){return this.queue.peek().node}};function y(){return new v}function x(_,b,C){for(var M=s(),D=y(),O=e(M,D),R=p(_);!R.isEmpty();){var H=R.dequeue();if(M.reset(),b(H,O),M.break)break;if(!M.remove&&(D.moveNext(),M.replace&&(H=M.replace),!M.skip)){var $=C(H);u($)&&(R.enqueueMultiple($),D.store(H,$.length))}D.moveForward()}}var S=function(b){return b.children};function g(_,b,C){if(_!=null){C=C||{};var M=C.order||"pre",D=C.getChildren||S;M==="pre"?f(_,b,D):M==="post"?l(_,b,D):M==="bfs"&&x(_,b,D)}}return g})});var ld=j((U2,fd)=>{function uo(t){return function(e){return e.tag===t}}function Lg(t){var e=t.filter(uo("INDI")).map(ud),r=t.filter(uo("FAM")),n=r.map(ud),i=r.reduce(function(s,u){return s.concat(Hg(u))},[]),a=e.concat(n),o=a.reduce(function(s,u,f){return s[u.id]=f,s},{});return i=i.map(qg(o)),{nodes:a,links:i}}function zg(t){if(t.tag==="INDI"){var e=(t.tree.filter(uo("NAME"))||[])[0];return e?e.data.replace(/\//g,""):"?"}else return"Family"}function ud(t){return t.id=t.pointer,t.name=zg(t),t}function qg(t){return function(e){function r(n){return t[n]}return{source:r(e.source),target:r(e.target)}}}function Hg(t){var e=t.tree.filter(function(r){return r.data&&r.data[0]==="@"}).map(function(r){return{source:t.pointer,target:r.data}});return e}fd.exports=Lg});var cd=j((V2,fo)=>{var $g=sd(),jg=/\s*(0|[1-9]+[0-9]*) (@[^@]+@ |)([A-Za-z0-9_]+)( [^\n\r]*|)/;function Bg(t){var e={root:{tree:[]},level:0};e.pointer=e.root;var r=t.split(`
`).map(i).filter(function(s){return s}).reduce(n,e).root;return $g(r,a,{getChildren:o}),r.tree;function n(s,u){if(u.level===s.level)s.pointer.tree.push(u);else if(u.level>s.level){var f=s.pointer;s.pointer=s.pointer.tree[s.pointer.tree.length-1],s.pointer.tree.push(u),s.pointer.up=f,s.level=u.level}else if(u.level<s.level){for(;u.level<=s.pointer.level&&s.pointer.up;)s.pointer=s.pointer.up;s.pointer.tree.push(u),s.level=u.level}return s}function i(s){var u=s.match(jg);return u?{level:parseInt(u[1],10),pointer:u[2].trim(),tag:u[3].trim(),data:u[4].trimLeft(),tree:[]}:null}function a(s){delete s.up,delete s.level}function o(s){return s.tree}}fo.exports.parse=Bg;fo.exports.d3ize=ld()});var vd=j(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getDate=pd;Nr.gedcomToJson=Yg;Nr.gedcomEntriesToJson=gd;var Gg=cd();function Z(t,e){return t.find(function(r){return r.tag===e})}function Ft(t,e){return t.filter(function(r){return r.tag===e})}function dt(t){return t.substring(1,t.length-1)}function dd(t){var e=t.split("/");return e.length===1?{firstName:e[0].trim()}:{firstName:e[0].trim(),lastName:e[1].trim()}}var hd=new Map([["jan",1],["feb",2],["mar",3],["apr",4],["may",5],["jun",6],["jul",7],["aug",8],["sep",9],["oct",10],["nov",11],["dec",12]]);function Yn(t){if(!(!t||!t.length)){var e={};if(t[0].startsWith("(")&&t[t.length-1].endsWith(")")){t[0]=t[0].substring(1);var r=t[t.length-1];t[t.length-1]=r.substring(0,r.length-1)}var n=t.join(" "),i=t[0].toLowerCase();if((i==="cal"||i==="abt"||i==="est")&&(e.qualifier=i,t=t.slice(1)),t.length&&t[t.length-1].match(/^\d{1,4}$/)&&(e.year=Number(t[t.length-1]),t=t.slice(0,t.length-1)),t.length){var r=t[t.length-1].toLowerCase();hd.has(r)&&(e.month=hd.get(r),t=t.slice(0,t.length-1))}return t.length&&t[0].match(/^\d\d?$/)&&(e.day=Number(t[0]),t=t.slice(0,t.length-1)),t.length?{text:n}:e}}function pd(t){var e=t.replace(/@.*@/,"").trim().split(" "),r=e[0].toLowerCase();if(r.startsWith("bet")){var n=e.findIndex(function(f){return f.toLowerCase()==="and"}),i=Yn(e.slice(1,n)),a=Yn(e.slice(n+1)),o={};return i&&(o.from=i),a&&(o.to=a),{dateRange:o}}if(r.startsWith("bef")||r.startsWith("aft")){var s=Yn(e.slice(1));return s?r.startsWith("bef")?{dateRange:{to:s}}:{dateRange:{from:s}}:void 0}var u=Yn(e);if(u)return{date:u}}function md(t){if(!(!t||t.tag!=="NOTE"))return Ft(t.tree,"CONT").filter(function(e){return e.data}).reduce(function(e,r){return e.concat(r.data)},[t.data])}function Wn(t){if(t){var e=Z(t.tree,"TYPE"),r=Z(t.tree,"DATE"),n=Z(t.tree,"PLAC"),i=r&&r.data&&pd(r.data),a=n&&n.data;if(i||a){var o=i||{};a&&(o.place=a),o.confirmed=!0,e&&(o.type=e.data);var s=md(Z(t.tree,"NOTE"));return s&&(o.notes=s),o}if(t.data&&t.data.toLowerCase()==="y")return{confirmed:!0}}}function Ug(t,e,r){var n=dt(t.pointer),i=Ft(t.tree,"FAMS").map(function(O){return dt(O.data)}).filter(function(O){return r.has(O)}),a={id:n,fams:i},o=Ft(t.tree,"NAME"),s=function(O){var R=Z(O.tree,"TYPE");return R!==void 0&&R.data==="maiden"},u=o.find(function(O){return!s(O)}),f=o.find(s);if(u){var l=dd(u.data),d=l.firstName,c=l.lastName;d&&(a.firstName=d),c&&(a.lastName=c)}if(f){var p=dd(f.data),d=p.firstName,c=p.lastName;c&&(a.maidenName=c),d&&!a.firstName&&(a.firstName=d)}var v=Z(t.tree,"NCHI");v&&(a.numberOfChildren=+v.data);var y=Z(t.tree,"NMR");y&&(a.numberOfMarriages=+y.data);var x=Z(t.tree,"SEX");x&&(a.sex=x.data);var S=Z(t.tree,"FAMC");if(S){var g=dt(S.data);r.has(g)&&(a.famc=g)}var _=Ft(t.tree,"OBJE");if(_.length>0){var b=function(O){var R=O.data?e.get(dt(O.data)):O;if(R){var H=Z(R.tree,"FILE"),$=Z(R.tree,"TITL");if(H)return{url:H.data,title:$&&$.data}}};a.images=_.map(b).filter(function(O){return O!==void 0})}var C=Wn(Z(t.tree,"BIRT"));C&&(a.birth=C);var M=Wn(Z(t.tree,"DEAT"));M&&(a.death=M);var D=md(Z(t.tree,"NOTE"));return D&&(a.notes=D),a.events=Ft(t.tree,"EVEN").map(Wn).filter(function(O){return O!==null}),a}function Vg(t,e){var r=dt(t.pointer),n=Ft(t.tree,"CHIL").map(function(l){return dt(l.data)}).filter(function(l){return e.has(l)}),i={id:r,children:n},a=Z(t.tree,"HUSB");if(a){var o=dt(a.data);e.has(o)&&(i.husb=dt(a.data))}var s=Z(t.tree,"WIFE");if(s){var u=dt(s.data);e.has(u)&&(i.wife=dt(s.data))}var f=Wn(Z(t.tree,"MARR"));return f&&(i.marriage=f),i}function Xg(t){return new Map(t.map(function(e){return[dt(e.pointer),e]}))}function Yg(t){return gd((0,Gg.parse)(t))}function gd(t){var e=Xg(Ft(t,"OBJE")),r=new Set(t.map(function(a){return dt(a.pointer)}).filter(function(a){return!!a})),n=Ft(t,"INDI").map(function(a){return Ug(a,e,r)}),i=Ft(t,"FAM").map(function(a){return Vg(a,r)});return{indis:n,fams:i}}});var yd=j(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.HourglassChart=void 0;var Wg=$n(),xd=Ut(),Kg=Ir(),Jg=function(){function t(e){this.options=e,this.util=new xd.ChartUtil(e)}return t.prototype.render=function(){var e,r,n,i,a=(0,Wg.getAncestorsTree)(this.options),o=this.util.layOutChart(a,{flipVertically:!0}),s=(0,Kg.layOutDescendants)(this.options);((e=o[0].data.indi)===null||e===void 0?void 0:e.expander)!==void 0&&(s[0].data.indi.expander=(r=o[0].data.indi)===null||r===void 0?void 0:r.expander),((n=o[0].data.spouse)===null||n===void 0?void 0:n.expander)!==void 0&&(s[0].data.spouse.expander=(i=o[0].data.spouse)===null||i===void 0?void 0:i.expander);var u=o.slice(1).concat(s),f=this.util.renderChart(u),l=(0,xd.getChartInfo)(u);return this.util.updateSvgDimensions(l),Object.assign(l,{animationPromise:f})},t}();Kn.HourglassChart=Jg});var lo=j(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.LinkType=fe.ChildNodes=void 0;fe.otherSideLinkType=Zg;var Qg=function(){function t(e){e===void 0&&(e={}),this.indiParents=[],this.indiSiblings=[],this.spouseParents=[],this.spouseSiblings=[],this.children=[],Object.assign(this,e)}return t.prototype.get=function(e){switch(e){case tt.IndiParents:return this.indiParents;case tt.IndiSiblings:return this.indiSiblings;case tt.SpouseParents:return this.spouseParents;case tt.SpouseSiblings:return this.spouseSiblings;case tt.Children:return this.children}},t.prototype.getAll=function(){return[].concat(this.indiSiblings,this.indiParents,this.children,this.spouseParents,this.spouseSiblings)},t.EMPTY=new t,t}();fe.ChildNodes=Qg;var tt;(function(t){t[t.IndiParents=0]="IndiParents",t[t.IndiSiblings=1]="IndiSiblings",t[t.SpouseParents=2]="SpouseParents",t[t.SpouseSiblings=3]="SpouseSiblings",t[t.Children=4]="Children"})(tt||(fe.LinkType=tt={}));function Zg(t){switch(t){case tt.IndiParents:return tt.Children;case tt.IndiSiblings:return tt.IndiSiblings;case tt.SpouseParents:return tt.Children;case tt.SpouseSiblings:return tt.IndiSiblings;case tt.Children:return tt.IndiParents}}});var co=j(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.nonEmpty=tv;Oe.last=ev;Oe.zip=rv;Oe.points2pathd=nv;function tv(t){return!!(t&&t.length)}function ev(t){return t[t.length-1]}function rv(t,e){return t.map(function(r,n){return[r,e[n]]})}function nv(t){for(var e="M ".concat(t[0].x," ").concat(t[0].y," L"),r=0,n=t.slice(1);r<n.length;r++){var i=n[r];e+=" ".concat(i.x," ").concat(i.y)}return e}});var Sd=j(De=>{"use strict";var Ar=De&&De.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(De,"__esModule",{value:!0});De.KinshipChartRenderer=void 0;var _d=(ee(),rt(te)),Y=lo(),wd=Ut(),Cr=co(),iv=17,bd=15,av=5,ho=7,Id=6,po=3,ov=function(){function t(e){this.options=e,this.util=new wd.ChartUtil(this.options)}return t.prototype.layOut=function(e,r){var n=this.util.getSvgForRendering();return n.select("style").empty()&&n.append("style").text(this.options.renderer.getCss()),[this.util.layOutChart(e,{flipVertically:!0}),this.util.layOutChart(r)]},t.prototype.render=function(e,r,n){var i=this,a=e.concat(r),o=a.slice(1);e.forEach(function(f){return i.setLinkYs(f,!0)}),r.forEach(function(f){return i.setLinkYs(f,!1)});var s=this.util.renderNodes(o,this.util.getSvgForRendering());this.renderLinks(a),n>1&&this.renderRootDummyAdditionalMarriageLinkStub(a[0]);var u=(0,wd.getChartInfo)(o);return this.util.updateSvgDimensions(u),Object.assign(u,{animationPromise:s})},t.prototype.renderLinks=function(e){var r=this,n=this.util.getSvgForRendering().select("g"),i=function(f){return f.data.id},a=n.selectAll("path.internode-link").data(e.filter(function(f){return!!f.parent}),i);a.enter().insert("path","g").attr("class",function(f){return r.cssClassForLink(f)}).merge(a).attr("d",function(f){var l=f.data.primaryMarriage?r.additionalMarriageLinkPoints(f):r.linkPoints(f.parent,f,f.data.linkFromParentType);return(0,Cr.points2pathd)(l)}),a.exit().remove();var o=n.selectAll("g.link-stubs").data(e.filter(function(f){return f.data.duplicateOf||f.data.duplicated||f.data.primaryMarriage}),i),s=o.enter().insert("g","g").attr("class","link-stubs");o.exit().remove();var u=s.merge(o).selectAll("g").data(function(f){return r.nodeToLinkStubRenderInfos(f)},function(f){return f.linkType.toString()});u.enter().append("g").call(function(f){return f.append("path").attr("class",function(l){return r.cssClassForLinkStub(l.linkType)}).merge(u.select("path.link-stub")).attr("d",function(l){return(0,Cr.points2pathd)(l.points)})}).call(function(f){return f.append("circle").attr("r",po).style("stroke","black").style("fill","none").merge(u.select("circle")).attr("transform",function(l){return"translate(".concat((0,Cr.last)(l.points).x,", ").concat((0,Cr.last)(l.points).y+po*l.treeDir,")")})}),u.exit().remove()},t.prototype.cssClassForLink=function(e){return e.data.primaryMarriage?"link internode-link additional-marriage":"link internode-link "+this.cssClassForLinkType(e.data.linkFromParentType)},t.prototype.cssClassForLinkStub=function(e){return"link link-stub "+this.cssClassForLinkType(e)},t.prototype.cssClassForLinkType=function(e){switch(e){case Y.LinkType.IndiParents:case Y.LinkType.SpouseParents:return"parents-link";case Y.LinkType.IndiSiblings:case Y.LinkType.SpouseSiblings:return"siblings-link";case Y.LinkType.Children:return"children-link"}},t.prototype.nodeToLinkStubRenderInfos=function(e){var r=this;return e.data.linkStubs.map(function(n){var i=e.y<e.parent.y,a=i?-1:1,o=r.linkAnchorPoints(e,n,i),s=e.data.linkYs.children-(2*Id+2*po)*a;return{treeDir:a,linkType:n,points:Ar(Ar([],o,!0),[{x:(0,Cr.last)(o).x,y:s}],!1)}})},t.prototype.getLinkY=function(e,r){switch(r){case Y.LinkType.IndiParents:return e.data.linkYs.indi;case Y.LinkType.IndiSiblings:return e.data.linkYs.indi;case Y.LinkType.SpouseParents:return e.data.linkYs.spouse;case Y.LinkType.SpouseSiblings:return e.data.linkYs.spouse;case Y.LinkType.Children:return e.data.linkYs.children}},t.prototype.setLinkYs=function(e,r){var n=r?-1:1,i=e.y+(e.data.height/2+iv)*n,a=Id*n,o=this.calcLinkOffsetDirs(e),s=o[0],u=o[1];e.data.linkYs={indi:i+a*s,spouse:i+a*u,children:i}},t.prototype.calcLinkOffsetDirs=function(e){var r=e.data.childNodes;if(r.children.length){var n=this.linkAnchorPoints(e,Y.LinkType.IndiParents,!0)[0].x,i=this.linkAnchorPoints(e,Y.LinkType.SpouseParents,!0)[0].x,a={min:this.findMinXOfChildNodesAnchors(e,r.children),max:this.findMaxXOfChildNodesAnchors(e,r.children)};if(a.min<n&&a.max>i)return[-1,-1];if(a.min<n)return[-1,1];if(a.max>i)return[1,-1]}else if((r.indiParents.length||r.indiSiblings.length)&&(r.spouseParents.length||r.spouseSiblings.length)){var n=this.linkAnchorPoints(e,Y.LinkType.IndiParents,!0)[0].x,o=this.findMinXOfChildNodesAnchors(e,r.spouseSiblings.concat(r.spouseParents));if(o<n)return[-1,1]}return[1,-1]},t.prototype.findMinXOfChildNodesAnchors=function(e,r){return this.findExtremeXOfChildNodesAnchors(e,r,!0)},t.prototype.findMaxXOfChildNodesAnchors=function(e,r){return this.findExtremeXOfChildNodesAnchors(e,r,!1)},t.prototype.findExtremeXOfChildNodesAnchors=function(e,r,n){var i=n?_d.min:_d.max,a=n?-1:1,o=new Set(r);return i(e.children.filter(function(s){return o.has(s.data)}),function(s){return s.x+a*s.data.width/2})+a*ho},t.prototype.linkPoints=function(e,r,n){var i=e.y>r.y,a=this.linkAnchorPoints(e,n,i),o=this.linkAnchorPoints(r,(0,Y.otherSideLinkType)(n),!i).reverse(),s=this.getLinkY(e,n);return Ar(Ar(Ar([],a,!0),[{x:a[a.length-1].x,y:s},{x:o[0].x,y:s}],!1),o,!0)},t.prototype.additionalMarriageLinkPoints=function(e){var r=e.parent.children.findIndex(function(a){return a.data.id===e.data.id}),n=e.parent.children[r-1],i=this.indiMidY(e);return[{x:n.x,y:i},{x:e.x,y:i}]},t.prototype.linkAnchorPoints=function(e,r,n){var i=[e.x,e.y],a=i[0],o=i[1],s=[e.data.width,e.data.height],u=s[0],f=s[1],l=a-u/2,d=a+u/2,c=[e.data.indi,e.data.spouse,e.data.family].map(function(b){return b?b.width:0}),p=c[0],v=c[1],y=c[2],x=p+v,S=a-u/2+(y>x?(y-x)/2:0),g=S+x,_=this.indiMidY(e)+av*(n?-1:1);switch(r){case Y.LinkType.IndiParents:return[{x:S+bd,y:o-f/2}];case Y.LinkType.SpouseParents:return[{x:g-bd,y:o-f/2}];case Y.LinkType.IndiSiblings:return[{x:S,y:_},{x:(y>x&&!n?l:S)-ho,y:_}];case Y.LinkType.SpouseSiblings:return[{x:g,y:_},{x:(y>x&&!n?d:g)+ho,y:_}];case Y.LinkType.Children:return[{x:S+(e.data.spouse?p:p/2),y:o}]}},t.prototype.indiMidY=function(e){return e.y-e.data.height/2+e.data.indi.height/2},t.prototype.renderRootDummyAdditionalMarriageLinkStub=function(e){var r=this.util.getSvgForRendering().select("g"),n=this.indiMidY(e),i=e.data.width/2+20,a=3;r.selectAll(".root-dummy-additional-marriage").remove(),r.insert("g","g").attr("class","root-dummy-additional-marriage").call(function(o){return o.append("path").attr("d","M 0 ".concat(n," L ").concat(i," ").concat(n)).attr("class","link additional-marriage")}).call(function(o){return o.append("circle").attr("transform","translate(".concat(i+a,", ").concat(n,")")).attr("r",a).style("stroke","black").style("fill","black")})},t}();De.KinshipChartRenderer=ov});var Nd=j(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.HierarchyFilter=void 0;var sv=function(){function t(e){e===void 0&&(e={}),this.indiParents=!0,this.indiSiblings=!0,this.spouseParents=!0,this.spouseSiblings=!0,this.children=!0,this.modify(e)}return t.allAccepting=function(){return new t},t.allRejecting=function(){return new t().modify({indiParents:!1,indiSiblings:!1,spouseParents:!1,spouseSiblings:!1,children:!1})},t.prototype.modify=function(e){return Object.assign(this,e),this},t}();Jn.HierarchyFilter=sv});var Cd=j(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.EntryId=le.HierarchyCreator=void 0;le.getRootsCount=cv;var B=lo(),Ad=(zn(),rt(Ln)),mo=Nd(),uv=br(),fv=co(),lv=function(){function t(e,r){var n;this.data=e,this.queuedNodesById=new Map,this.idGenerator=new uv.IdGenerator,n=this.expandStartId(r),this.startEntryId=n[0],this.startFamIndi=n[1]}return t.createHierarchy=function(e,r){return new t(e,r).createHierarchy()},t.prototype.expandStartId=function(e){if(e.isFam)return[e,null];var r=this.data.getIndi(e.id);if(!r)throw new Error("Invalid startId");var n=r.getFamiliesAsSpouse();return n.length?[Qn.fam(n[0]),e.id]:[e,null]},t.prototype.createHierarchy=function(){var e=this.idToNode(this.startEntryId,null,null,!1),r=this.idToNode(this.startEntryId,null,null,!1);if(!e||!r)throw new Error("Invalid root node");this.startFamIndi&&(e.indi={id:this.startFamIndi},r.indi={id:this.startFamIndi});for(var n=[e,r];n.length;){var i=n.shift(),a=i===e?t.UP_FILTER:i===r?t.DOWN_FILTER:t.ALL_ACCEPTING_FILTER;this.fillNodeData(i,a);for(var o=0,s=i.childNodes.getAll();o<s.length;o++){var u=s[o];n.push(u)}}var f=function(l){var d=l.childNodes.getAll();return d.length?d:null};return{upRoot:(0,Ad.hierarchy)(e,f),downRoot:(0,Ad.hierarchy)(r,f)}},t.prototype.fillNodeData=function(e,r){if(this.isFamNode(e)){var n=this.data.getFam(e.id),i=e.indi&&e.indi.id===n.getMother()?[n.getMother(),n.getFather()]:[n.getFather(),n.getMother()],a=i[0],o=i[1];Object.assign(e,{id:this.idGenerator.getId(e.id),indi:a&&{id:a},spouse:o&&{id:o}}),!e.duplicateOf&&!e.duplicated&&(e.childNodes=this.childNodesForFam(n,e,r))}else{var s=this.data.getIndi(e.id);Object.assign(e,{id:this.idGenerator.getId(e.id),indi:{id:s.getId()}}),!e.duplicateOf&&!e.duplicated&&(e.childNodes=this.childNodesForIndi(s,e,r))}e.linkStubs=this.createLinkStubs(e)},t.prototype.childNodesForFam=function(e,r,n){var i=r.indi?this.data.getIndi(r.indi.id):null,a=r.spouse?this.data.getIndi(r.spouse.id):null,o=this.getParentsAndSiblings(i),s=o[0],u=o[1],f=this.getParentsAndSiblings(a),l=f[0],d=f[1],c=e.getChildren();return new B.ChildNodes({indiParents:n.indiParents?this.famAsSpouseIdsToNodes(s,r,B.LinkType.IndiParents):[],indiSiblings:n.indiSiblings?this.indiIdsToFamAsSpouseNodes(u,r,B.LinkType.IndiSiblings):[],spouseParents:n.spouseParents?this.famAsSpouseIdsToNodes(l,r,B.LinkType.SpouseParents):[],spouseSiblings:n.spouseSiblings?this.indiIdsToFamAsSpouseNodes(d,r,B.LinkType.SpouseSiblings):[],children:n.children?this.indiIdsToFamAsSpouseNodes(c,r,B.LinkType.Children):[]})},t.prototype.childNodesForIndi=function(e,r,n){var i=this.getParentsAndSiblings(e),a=i[0],o=i[1];return new B.ChildNodes({indiParents:n.indiParents?this.famAsSpouseIdsToNodes(a,r,B.LinkType.IndiParents):[],indiSiblings:n.indiSiblings?this.indiIdsToFamAsSpouseNodes(o,r,B.LinkType.IndiSiblings):[]})},t.prototype.areParentsAndSiblingsPresent=function(e){var r=e&&this.data.getIndi(e),n=r&&r.getFamilyAsChild(),i=n&&this.data.getFam(n);return i?[!!(i.getFather()||i.getMother()),i.getChildren().length>1]:[!1,!1]},t.prototype.getParentsAndSiblings=function(e){var r=e&&e.getFamilyAsChild(),n=this.data.getFam(r);if(!n)return[[],[]];var i=this.data.getIndi(n.getFather()),a=this.data.getIndi(n.getMother()),o=[].concat(i?i.getFamiliesAsSpouse():[],a?a.getFamiliesAsSpouse():[]).filter(function(u){return u!==r});o.unshift(r);var s=Array.from(n.getChildren());return s.splice(s.indexOf(e.getId()),1),[o,s]},t.prototype.indiIdsToFamAsSpouseNodes=function(e,r,n){var i=this;return e.flatMap(function(a){return i.indiIdToFamAsSpouseNodes(a,r,n)})},t.prototype.indiIdToFamAsSpouseNodes=function(e,r,n){var i=this;if(this.isChildNodeTypeForbidden(n,r))return[];var a=this.data.getIndi(e).getFamiliesAsSpouse();if(!a.length){var o=this.idToNode(Qn.indi(e),r,n);return o?[o]:[]}var s=a.map(function(u){return{id:u,indi:{id:e},family:{id:u},parentNode:r,linkFromParentType:n,childNodes:B.ChildNodes.EMPTY,linkStubs:[]}});return s.forEach(function(u,f){f!==0&&(u.primaryMarriage=s[0]);var l=i.queuedNodesById.get(u.id);l?(u.duplicateOf=l,l.duplicated=!0):i.queuedNodesById.set(u.id,u)}),s},t.prototype.famAsSpouseIdsToNodes=function(e,r,n){var i=this.idsToNodes(e.map(Qn.fam),r,n);return i.slice(1).forEach(function(a){return a.primaryMarriage=i[0]}),i},t.prototype.idsToNodes=function(e,r,n,i){var a=this;return i===void 0&&(i=!0),e.map(function(o){return a.idToNode(o,r,n,i)}).filter(function(o){return o!=null})},t.prototype.idToNode=function(e,r,n,i){if(i===void 0&&(i=!0),this.isChildNodeTypeForbidden(n,r))return null;var a=e.id,o=e.isFam;if(o){var s=this.data.getFam(a);if(!s||!s.getFather()&&!s.getMother())return null}var u=this.queuedNodesById.get(a),f={id:a,parentNode:r,linkFromParentType:n,childNodes:B.ChildNodes.EMPTY,linkStubs:[]};return o&&(f.family={id:a}),i&&u&&(f.duplicateOf=u,u.duplicated=!0),u||this.queuedNodesById.set(a,f),f},t.prototype.createLinkStubs=function(e){var r=this;if(!this.isFamNode(e)||!e.duplicateOf&&!e.duplicated&&!e.primaryMarriage)return[];var n=this.data.getFam(e.family.id),i=this.areParentsAndSiblingsPresent(e.indi?e.indi.id:null),a=i[0],o=i[1],s=this.areParentsAndSiblingsPresent(e.spouse?e.spouse.id:null),u=s[0],f=s[1],l=(0,fv.nonEmpty)(n.getChildren());return[a?[B.LinkType.IndiParents]:[],o?[B.LinkType.IndiSiblings]:[],u?[B.LinkType.SpouseParents]:[],f?[B.LinkType.SpouseSiblings]:[],l?[B.LinkType.Children]:[]].flat().filter(function(d){return!r.isChildNodeTypeForbidden(d,e)&&!e.childNodes.get(d).length})},t.prototype.isChildNodeTypeForbidden=function(e,r){if(e===null||!r)return!1;switch((0,B.otherSideLinkType)(r.linkFromParentType)){case B.LinkType.IndiParents:case B.LinkType.IndiSiblings:if(e===B.LinkType.IndiParents||e===B.LinkType.IndiSiblings)return!0;break;case B.LinkType.Children:if(!r.primaryMarriage&&e===B.LinkType.Children)return!0;break}if(r.primaryMarriage){var n=r.indi.id,i=r.spouse.id,a=r.primaryMarriage.indi.id,o=r.primaryMarriage.spouse.id;if(n===a||n===o){if(e===B.LinkType.IndiParents||e===B.LinkType.IndiSiblings)return!0}else if((i===a||i===o)&&(e===B.LinkType.SpouseParents||e===B.LinkType.SpouseSiblings))return!0}return!1},t.prototype.isFamNode=function(e){return!!e.family},t.UP_FILTER=mo.HierarchyFilter.allRejecting().modify({indiParents:!0,spouseParents:!0,indiSiblings:!0,spouseSiblings:!0}),t.DOWN_FILTER=mo.HierarchyFilter.allRejecting().modify({children:!0}),t.ALL_ACCEPTING_FILTER=mo.HierarchyFilter.allAccepting(),t}();le.HierarchyCreator=lv;var Qn=function(){function t(e,r){if(!e&&!r)throw new Error("Invalid EntryId");this.id=e||r,this.isFam=!!r}return t.indi=function(e){return new t(e,null)},t.fam=function(e){return new t(null,e)},t}();le.EntryId=Qn;function cv(t,e){var r=t.data.indi&&e.getIndi(t.data.indi.id),n=t.data.spouse&&e.getIndi(t.data.spouse.id);return(r?r.getFamiliesAsSpouse().length:0)+(n?n.getFamiliesAsSpouse().length-1:0)}});var kd=j(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.KinshipChart=void 0;var dv=Sd(),go=Cd(),hv=function(){function t(e){this.options=e,this.renderer=new dv.KinshipChartRenderer(this.options)}return t.prototype.render=function(){var e=this,r=go.HierarchyCreator.createHierarchy(this.options.data,new go.EntryId(this.options.startIndi||null,this.options.startFam||null)),n=this.renderer.layOut(r.upRoot,r.downRoot),i=n[0],a=n[1];return i.concat(a).forEach(function(o){e.setChildNodesGenerationNumber(o)}),this.renderer.render(i,a,(0,go.getRootsCount)(r.upRoot,this.options.data))},t.prototype.setChildNodesGenerationNumber=function(e){var r=this.getChildNodesByType(e),n=function(i,a){return i.forEach(function(o){return o.data.generation=e.data.generation+a})};n(r.indiParents,-1),n(r.indiSiblings,0),n(r.spouseParents,-1),n(r.spouseSiblings,0),n(r.children,1)},t.prototype.getChildNodesByType=function(e){if(!e||!e.children)return pv;var r=new Map(e.children.map(function(a){return[a.data.id,a]})),n=function(a){return r.get(a.id)},i=e.data.childNodes;return{indiParents:i.indiParents.map(n),indiSiblings:i.indiSiblings.map(n),spouseParents:i.spouseParents.map(n),spouseSiblings:i.spouseSiblings.map(n),children:i.children.map(n)}},t}();Zn.KinshipChart=hv;var pv={indiParents:[],indiSiblings:[],spouseParents:[],spouseSiblings:[],children:[]}});var Ed=j(Yt=>{"use strict";var ei=Yt&&Yt.__assign||function(){return ei=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ei.apply(this,arguments)},mv=Yt&&Yt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.RelativesChart=void 0;var gv=$n(),vv=br(),Md=Ir(),ti=(ee(),rt(te)),K=Ut(),xv=function(){function t(e,r){this.fam=e,this.childId=r}return t.prototype.getId=function(){return this.fam.getId()},t.prototype.getFather=function(){return this.fam.getFather()},t.prototype.getMother=function(){return this.fam.getMother()},t.prototype.getChildren=function(){var e=mv([],this.fam.getChildren(),!0),r=e.indexOf(this.childId);return r!==-1&&e.splice(r,1),e},t}(),yv=function(){function t(e,r){this.data=e,this.childId=r}return t.prototype.getIndi=function(e){return this.data.getIndi(e)},t.prototype.getFam=function(e){return new xv(this.data.getFam(e),this.childId)},t}(),_v=function(){function t(e){this.options=ei({},e),this.options.idGenerator=this.options.idGenerator||new vv.IdGenerator,this.util=new K.ChartUtil(this.options)}return t.prototype.layOutAncestorDescendants=function(e,r){var n=this,i=new Map;return e.eachAfter(function(a){var o,s;if(a.parent){var u=ei({},n.options);u.startFam=a.data.family.id,delete u.startIndi;var f=a.id===a.parent.data.spouseParentNodeId?a.parent.data.spouse.id:a.parent.data.indi.id;u.data=new yv(u.data,f),u.baseGeneration=(n.options.baseGeneration||0)-a.depth;var l=(0,Md.layOutDescendants)(u);a.data.id=l[0].id,((o=a.data.indi)===null||o===void 0?void 0:o.expander)!==void 0&&(l[0].data.indi.expander=a.data.indi.expander),((s=a.data.spouse)===null||s===void 0?void 0:s.expander)!==void 0&&(l[0].data.spouse.expander=a.data.spouse.expander);var d=(0,K.getChartInfoWithoutMargin)(l),c=(a.children||[]).map(function(y){return i.get(y.data.id)}),p=c.map(function(y){return y.height}).reduce(function(y,x){return y+x+K.V_SPACING},0),v={descendantNodes:l,width:d.size[0],height:d.size[1]+p,x:d.origin[0],y:d.origin[1]+p};i.set(a.data.id,v)}}),e.each(function(a){if(a.parent){var o=i.get(a.data.id),s=i.get(a.parent.data.id);o.left=s&&!s.middle?!!s.left:a.parent.data.indiParentNodeId===a.id,o.middle=(!s||!!s.middle)&&a.parent.children.length===1}}),e.each(function(a){var o=i.get(a.data.id),s=o?o.descendantNodes[0]:r;(a.children||[]).forEach(function(u){var f=i.get(u.data.id).descendantNodes[0];f.parent=s}),a.data.indiParentNodeId&&a.children&&(s.data.indiParentNodeId=a.children.find(function(u){return u.id===a.data.indiParentNodeId}).data.id),a.data.spouseParentNodeId&&a.children&&(s.data.spouseParentNodeId=a.children.find(function(u){return u.id===a.data.spouseParentNodeId}).data.id)}),e.each(function(a){var o=i.get(a.data.id),s=o?o.descendantNodes[0]:r,u=a.children&&a.children.find(function(H){return H.id===a.data.indiParentNodeId}),f=a.children&&a.children.find(function(H){return H.id===a.data.spouseParentNodeId}),l=s.x,d=s.y,c=s.data.width,p=s.data.height,v=s.data.indi?s.data.indi.width:0,y=s.data.spouse?s.data.spouse.width:0;if(u){var x=i.get(u.data.id),S=x.descendantNodes[0],g=S.data,_=f?i.get(f.data.id).height+K.V_SPACING:0,b=l+x.x-c/2+v/2+(x.left?-x.width-K.H_SPACING:K.H_SPACING),C=d+x.y-p/2-x.height+(x.left?-K.V_SPACING:-_-K.V_SPACING);x.descendantNodes.forEach(function(H){H.x+=b,H.y+=C});var M=v/2-c/2+g.width/2-(g.indi?g.indi.width:g.spouse.width);x.middle?S.x=0:!o||o.middle?S.x=-c/2-g.width/2+v-K.H_SPACING/2:x.left?S.x=l+(0,ti.min)([c/2-g.width/2-y/2-K.H_SPACING,M]):S.x=l+(0,ti.max)([g.width/2-c/2,M])}if(f){var x=i.get(f.data.id),S=x.descendantNodes[0],g=S.data,D=u?i.get(u.data.id).height+K.V_SPACING:0,O=l+x.x+c/2-y/2+(x.left?-x.width-K.H_SPACING:K.H_SPACING),R=d+x.y-p/2-x.height+(x.left?-D-K.V_SPACING:-K.V_SPACING);x.descendantNodes.forEach(function(kr){kr.x+=O,kr.y+=R});var M=c/2-y/2+g.width/2-(g.indi?g.indi.width:g.spouse.width);x.middle?S.x=0:!o||o.middle?S.x=c/2+g.width/2-y+K.H_SPACING/2:x.left?S.x=l+(0,ti.min)([c/2-g.width/2,M]):S.x=l+(0,ti.max)([g.width/2-c/2+v/2+K.H_SPACING,M])}}),Array.from(i.values()).map(function(a){return a.descendantNodes}).reduce(function(a,o){return a.concat(o)},[])},t.prototype.render=function(){var e,r,n,i,a=(0,Md.layOutDescendants)(this.options),o=Object.assign({},this.options,{idGenerator:void 0}),s=(0,gv.getAncestorsTree)(o);((e=s.data.indi)===null||e===void 0?void 0:e.expander)!==void 0&&(a[0].data.indi.expander=(r=s.data.indi)===null||r===void 0?void 0:r.expander),((n=s.data.spouse)===null||n===void 0?void 0:n.expander)!==void 0&&(a[0].data.spouse.expander=(i=s.data.spouse)===null||i===void 0?void 0:i.expander);var u=this.layOutAncestorDescendants(s,a[0]),f=a.concat(u),l=this.util.renderChart(f),d=(0,K.getChartInfo)(f);return this.util.updateSvgDimensions(d),Object.assign(d,{animationPromise:l})},t}();Yt.RelativesChart=_v});var Td=j(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.createChart=Av;var wv=(it(),rt(Be)),Pd=he(),bv=Ka(),Iv="svg";function Sv(t,e,r){var n=new bv.JsonDataProvider(t.json),i=t.indiUrl?function(l){return t.indiUrl.replace("${id}",l)}:void 0,a=t.famUrl?function(l){return t.famUrl.replace("${id}",l)}:void 0;!e.startIndi&&!e.startFam&&(e.startIndi=t.json.indis[0].id);var o=!r.initialRender&&t.animate,s={data:n};i&&(s.indiHrefFunc=i),a&&(s.famHrefFunc=a),t.indiCallback&&(s.indiCallback=t.indiCallback),t.famCallback&&(s.famCallback=t.famCallback),t.horizontal!==void 0&&(s.horizontal=t.horizontal),t.colors&&(s.colors=t.colors),o!==void 0&&(s.animate=o),t.locale&&(s.locale=t.locale);var u=new t.renderer(s),f={data:n,renderer:u,svgSelector:t.svgSelector||Iv};return e.startIndi&&(f.startIndi=e.startIndi),e.startFam&&(f.startFam=e.startFam),t.horizontal!==void 0&&(f.horizontal=t.horizontal),e.baseGeneration!==void 0&&(f.baseGeneration=e.baseGeneration),o!==void 0&&(f.animate=o),t.expanders!==void 0&&(f.expanders=t.expanders),f}var Nv=function(){function t(e){this.options=e,this.initialRender=!0,this.collapsedIndi=new Set,this.collapsedSpouse=new Set,this.collapsedFamily=new Set}return t.prototype.render=function(e){var r=this;e===void 0&&(e={}),this.chartOptions=Sv(this.options,e,{initialRender:this.initialRender}),this.chartOptions.collapsedFamily=this.collapsedFamily,this.chartOptions.collapsedIndi=this.collapsedIndi,this.chartOptions.collapsedSpouse=this.collapsedSpouse,this.chartOptions.expanderCallback=function(a,o){return r.expanderCallback(a,o,e)},this.initialRender=!1;var n=new this.options.chartType(this.chartOptions),i=n.render();return this.options.updateSvgSize!==!1&&(0,wv.select)(this.chartOptions.svgSelector).attr("width",i.size[0]).attr("height",i.size[1]),i},t.prototype.expanderCallback=function(e,r,n){var i=r===Pd.ExpanderDirection.FAMILY?this.collapsedFamily:r===Pd.ExpanderDirection.INDI?this.collapsedIndi:this.collapsedSpouse;i.has(e)?i.delete(e):i.add(e),this.render(n)},t.prototype.setData=function(e){this.options.json=e},t}();function Av(t){return new Nv(t)}});var Ld=j(Re=>{"use strict";var Cv=Re&&Re.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Re,"__esModule",{value:!0});Re.SimpleRenderer=void 0;var kv=(it(),rt(Be)),Mv=xr(),Fd=27,Ev=50;function Od(t){var e=(0,kv.select)("svg").append("g").attr("class","simple node"),r=e.append("text").attr("class","name").text(t),n=r.node().getComputedTextLength();return e.remove(),n}function Dd(t){return[t.getFirstName()||"",t.getLastName()||""].join(" ")}function Rd(t){var e=t.getBirthDate(),r=e&&e.date&&e.date.year,n=t.getDeathDate(),i=n&&n.date&&n.date.year;return!r&&!i?"":"".concat(r||""," \u2013 ").concat(i||"")}var Pv=function(t){Cv(e,t);function e(r){var n=t.call(this,r)||this;return n.options=r,n}return e.prototype.getPreferredIndiSize=function(r){var n=this.options.data.getIndi(r),i=Rd(n),a=Math.max(Od(Dd(n))+8,Od(i),Ev),o=i?Fd+14:Fd;return[a,o]},e.prototype.render=function(r,n){var i=this,a=r.merge(n).append("g").attr("class","simple");this.renderIndi(a,function(s){return s.indi});var o=a.filter(function(s){return!!s.data.spouse}).append("g").attr("transform",function(s){return i.options.horizontal?"translate(0, ".concat(s.data.indi.height,")"):"translate(".concat(s.data.indi.width,", 0)")});this.renderIndi(o,function(s){return s.spouse})},e.prototype.getCss=function(){return`
.simple text {
  font: 12px sans-serif;
}

.simple .name {
  font-weight: bold;
}

.simple rect {
  fill: #fff;
  stroke: black;
}

.link {
  fill: none;
  stroke: #000;
  stroke-width: 1px;
}

.additional-marriage {
  stroke-dasharray: 2;
}`},e.prototype.renderIndi=function(r,n){var i=this,a=this.options.indiHrefFunc?r.append("a").attr("href",function(o){return i.options.indiHrefFunc(n(o.data).id)}):r;a.append("rect").attr("width",function(o){return n(o.data).width}).attr("height",function(o){return n(o.data).height}),a.append("text").attr("text-anchor","middle").attr("class","name").attr("transform",function(o){return"translate(".concat(n(o.data).width/2,", 17)")}).text(function(o){return Dd(i.options.data.getIndi(n(o.data).id))}),a.append("text").attr("text-anchor","middle").attr("class","details").attr("transform",function(o){return"translate(".concat(n(o.data).width/2,", 33)")}).text(function(o){return Rd(i.options.data.getIndi(n(o.data).id))})},e}(Mv.CompositeRenderer);Re.SimpleRenderer=Pv});var ao=j(V=>{"use strict";var Tv=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),et=V&&V.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tv(e,t,r)};Object.defineProperty(V,"__esModule",{value:!0});No();et($n(),V);et(he(),V);et(Ut(),V);et(td(),V);et(xr(),V);et(Ka(),V);et(Za(),V);et(id(),V);et(Ir(),V);et(od(),V);et(vd(),V);et(yd(),V);et(kd(),V);et(Ed(),V);et(Td(),V);et(Ld(),V)});var Ov=j((aN,zd)=>{var Fv=ao();zd.exports=Fv});return Ov();})();
