/* ═══════════════════════════════════════════════════════════════════════════
   myLineage — Design System v2
   Theme: Deep Dark (GitHub Dark inspired)
   ═══════════════════════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* ── Design tokens ─────────────────────────────────────────────────────── */
:root {
  /* surfaces */
  --bg-base:       #0d1117;
  --bg-surface:    #161b22;
  --bg-surface-2:  #21262d;

  /* borders */
  --border:        rgba(255,255,255,0.08);
  --border-subtle: rgba(255,255,255,0.04);
  --border-accent: rgba(68,147,248,0.30);

  /* text */
  --text-main:      #e6edf3;
  --text-secondary: #8b949e;
  --text-disabled:  #484f58;

  /* accents */
  --accent:       #4493f8;
  --accent-soft:  rgba(68,147,248,0.12);
  --accent-hover: rgba(68,147,248,0.18);
  --green:        #3fb950;
  --green-soft:   rgba(63,185,80,0.12);
  --red:          #f85149;
  --red-soft:     rgba(248,81,73,0.12);
  --amber:        #d29922;
  --amber-soft:   rgba(210,153,34,0.12);
  --purple:       #bc8cff;
  --purple-soft:  rgba(188,140,255,0.12);

  /* legacy aliases */
  --accent-blue:   var(--accent);
  --accent-purple: var(--purple);
  --accent-green:  var(--green);
  --accent-coral:  var(--red);
  --bg-card:       var(--bg-surface);
  --bg-main:       var(--bg-base);
  --menu-text:        var(--text-secondary);
  --menu-text-active: var(--text-main);

  /* sizing */
  --radius:     12px;
  --radius-lg:  16px;
  --radius-sm:   8px;
  --shadow:     0 4px 16px rgba(0,0,0,0.4), 0 1px 3px rgba(0,0,0,0.3);
  --shadow-lg:  0 8px 32px rgba(0,0,0,0.5), 0 2px 8px rgba(0,0,0,0.3);
  --transition: 0.18s ease;

  --rail-w:       64px;
  --rail-w-open: 210px;
  --drawer-w:    420px;

  /* legacy */
  --border-radius: var(--radius-lg);
  --card-shadow:   var(--shadow);
  --font-main:     'Inter', 'Segoe UI', Arial, sans-serif;
}

/* ── Reset / base ─────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; }
body {
  margin: 0;
  background: var(--bg-base);
  color: var(--text-main);
  font-family: var(--font-main);
  font-size: 14px;
  line-height: 1.5;
  min-height: 100vh;
}
a { color: var(--text-main); text-decoration: none; }
a:hover { color: var(--accent); }
p { color: var(--text-secondary); margin: 0 0 12px; }
h1 { font-size: 1.35rem; font-weight: 700; margin: 0 0 8px; color: var(--text-main); }
h2 { font-size: 1.1rem;  font-weight: 700; margin: 0 0 6px;  color: var(--text-main); }
h3 { font-size: 0.95rem; font-weight: 600; margin: 0 0 6px;  color: var(--text-secondary); }

/* ── App shell ────────────────────────────────────────────────────────── */
.app-shell {
  display: flex;
  min-height: 100vh;
}

/* ══════════════════════════════════════════════════════════════════════════
   NAV RAIL  (icon only, expands on hover)
   ══════════════════════════════════════════════════════════════════════════ */
.sidebar {
  position: fixed;
  top: 0; left: 0; bottom: 0;
  z-index: 80;
  width: var(--rail-w);
  background: var(--bg-surface);
  border-right: 1px solid var(--border-subtle);
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 12px 10px 14px;
  overflow: hidden;
  white-space: nowrap;
  transition: width 0.22s cubic-bezier(0.25,0.8,0.25,1);
}
.sidebar:hover { width: var(--rail-w-open); }

/* Logo */
.sidebar .logo {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 4px 12px;
  font-weight: 800;
  font-size: 0.95rem;
  color: var(--text-main);
  text-decoration: none !important;
  border-bottom: 1px solid var(--border-subtle);
  margin-bottom: 6px;
  flex-shrink: 0;
  overflow: hidden;
}
.sidebar .logo .mdi {
  font-size: 1.4rem;
  color: var(--green);
  flex-shrink: 0;
  /* same calc as nav icons: fill collapsed rail so text is always hidden */
  min-width: calc(var(--rail-w) - 2 * 10px - 2 * 4px);
  text-align: center;
}
.logo, .logo * { text-decoration: none !important; }

/* Nav links */
.sidebar nav {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  overflow: hidden;
}
.sidebar a,
.sidebar .sidebar-footer a {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 9px 8px;
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  font-weight: 500;
  font-size: 0.875rem;
  text-decoration: none !important;
  transition: background var(--transition), color var(--transition);
  overflow: hidden;
  flex-shrink: 0;
}
.sidebar a .mdi,
.sidebar .sidebar-footer a .mdi {
  font-size: 1.15rem;
  flex-shrink: 0;
  /* fill the collapsed rail so text is always clipped */
  min-width: calc(var(--rail-w) - 2 * 10px - 2 * 8px);
  text-align: center;
  transition: color var(--transition);
}
.sidebar a:hover,
.sidebar .sidebar-footer a:hover {
  background: var(--accent-hover);
  color: var(--text-main);
}
.sidebar a:hover .mdi,
.sidebar .sidebar-footer a:hover .mdi { color: var(--accent); }
.sidebar a.active,
.sidebar .sidebar-footer a.active {
  background: var(--accent-soft);
  color: var(--text-main);
}
.sidebar a.active .mdi,
.sidebar .sidebar-footer a.active .mdi { color: var(--accent); }

/* Sidebar footer */
.sidebar .sidebar-footer {
  margin-top: auto;
  padding-top: 8px;
  border-top: 1px solid var(--border-subtle);
  display: flex;
  flex-direction: column;
}

/* ══════════════════════════════════════════════════════════════════════════
   PAGE CONTENT
   ══════════════════════════════════════════════════════════════════════════ */
.content {
  margin-left: var(--rail-w);
  flex: 1;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  /* reserve space for the fixed topbar */
  padding-top: 52px;
}

/* Topbar — fixed so it's always flush at viewport top */
.topbar {
  position: fixed;
  top: 0;
  left: var(--rail-w);
  right: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 0 24px;
  height: 52px;
  background: var(--bg-surface);
  border-bottom: 1px solid var(--border-subtle);
}
.topbar h1 { font-size: 0.95rem; font-weight: 600; margin: 0; }

/* ── Cards ────────────────────────────────────────────────────────────── */
.card {
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.card #cy { border-radius: var(--radius-sm); overflow: hidden; }
.centered-panel { margin: 24px auto; }
/* Universal spacing for non-grid page content (import, export, config, indicadores) */
body:not(.page-tree) .content > *:not(.topbar):not(.main-grid) {
  padding: 0 24px;
}
body:not(.page-tree) .content > *:not(.topbar):not(.main-grid):last-child {
  padding-bottom: 24px;
}
body:not(.page-tree) .content > *:not(.topbar):not(.main-grid):first-of-type {
  margin-top: 24px;
}

/* ── Buttons ──────────────────────────────────────────────────────────── */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: var(--radius-sm);
  padding: 7px 16px;
  font-size: 0.875rem;
  font-weight: 600;
  cursor: pointer;
  transition: filter var(--transition), transform var(--transition), box-shadow var(--transition);
  outline: none;
  line-height: 1.5;
  white-space: nowrap;
}
.btn:hover, .btn:focus {
  filter: brightness(1.15);
  box-shadow: 0 0 0 3px var(--accent-soft);
  transform: translateY(-1px);
}
.btn:active { filter: brightness(0.95); transform: translateY(0); }
.btn.btn-ghost { background: transparent; color: var(--text-main); border: 1px solid var(--border); }
.btn.btn-ghost:hover { background: var(--bg-surface-2); box-shadow: none; }
.btn.btn-danger { background: var(--red); }
.btn.btn-sm { padding: 5px 12px; font-size: 0.8rem; }
/* legacy aliases */
.btn::after { display: none; }
.lc-toggle { padding: 6px 14px; font-size: 0.85rem; }

.icon-btn {
  background: transparent;
  border: none;
  padding: 6px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  color: var(--text-secondary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background var(--transition), color var(--transition);
  font-size: 1rem;
}
.icon-btn:hover { background: var(--bg-surface-2); color: var(--text-main); }
.icon-btn[disabled] { opacity: 0.4; cursor: not-allowed; }
#paginationControls .icon-btn { padding: 4px 6px; margin: 0 2px; }

/* ── Forms / Inputs ───────────────────────────────────────────────────── */
form { display: flex; flex-direction: column; gap: 10px; }
form .full { width: 100%; }
.form-row { display: flex; gap: 14px; margin-bottom: 6px; }
.form-row > div { flex: 1; display: flex; flex-direction: column; }
label { font-size: 0.8rem; margin-bottom: 4px; color: var(--text-secondary); font-weight: 500; }
input[type=text], input[type=search], input[type=date], input[type=number],
select, textarea {
  width: 100%;
  padding: 8px 10px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--bg-surface-2);
  color: var(--text-main);
  font-size: 0.875rem;
  font-family: var(--font-main);
  outline: none;
  transition: border-color var(--transition), box-shadow var(--transition);
}
input:focus, select:focus, textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-soft);
}
textarea { min-height: 64px; resize: vertical; }
input[type=checkbox] { accent-color: var(--accent); }

/* ── Tables ───────────────────────────────────────────────────────────── */
table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
th {
  text-align: left; font-weight: 600; color: var(--text-secondary);
  padding: 8px 10px; border-bottom: 1px solid var(--border);
  white-space: nowrap; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;
}
td {
  padding: 9px 10px; border-bottom: 1px solid var(--border-subtle);
  color: var(--text-main); vertical-align: middle;
}
tr:last-child td { border-bottom: none; }
tr:hover td { background: rgba(255,255,255,0.02); }
.deleted, .deleted td { color: var(--red) !important; background: var(--red-soft) !important; }
.table-panel { overflow-x: auto; }
.table-panel .mdi { color: var(--text-secondary); }
.table-panel button.detail .mdi,
.table-panel button.del .mdi,
.table-panel .actions .mdi { color: var(--text-secondary); }
.table-panel table tbody td { color: var(--text-secondary); }
.table-panel table tbody td a,
.table-panel table tbody td button,
.table-panel table tbody td .mdi { color: var(--text-secondary); }
.actions button { margin-right: 4px; }

/* Non-tree pages: padding handled by .content padding-top (for fixed topbar)
   and per-component padding below */
body:not(.page-tree) .content {
  overflow-y: auto;
}
/* Tree page — canvas fills height, no overflow */
body.page-tree .content {
  height: 100vh;
  overflow: hidden;
  padding-top: 0; /* tree page has its own topbar inside flow */
}
body.page-tree .topbar {
  position: relative;
  left: auto; right: auto; top: auto;
}

/* ── Main Grid (Cadastro) ─────────────────────────────────────────────── */
.main-grid {
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 24px;
  padding: 24px;
  width: 100%;
  max-width: 1400px;
  margin: 0;
}
.form-panel { min-width: 0; }

/* ── Accordion ────────────────────────────────────────────────────────── */
.accordion { display: flex; flex-direction: column; gap: 8px; }
.accordion-card {
  background: var(--bg-surface-2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  overflow: hidden;
}
.accordion-header {
  width: 100%; padding: 10px 14px;
  background: transparent; border: none;
  color: var(--text-main); display: flex; align-items: center;
  justify-content: space-between; cursor: pointer;
  font-weight: 600; font-size: 0.875rem;
}
.accordion-header:focus { outline: none; }
.accordion-arrow { color: var(--text-secondary); transition: transform 0.18s ease; }
.accordion-card.open .accordion-arrow { transform: rotate(180deg); }
.accordion-content {
  display: none; padding: 10px 14px 16px;
  border-top: 1px solid var(--border-subtle);
}
.accordion-content > form > div { margin-bottom: 8px; }

/* ══════════════════════════════════════════════════════════════════════════
   TREE PAGE — full-viewport canvas
   ══════════════════════════════════════════════════════════════════════════ */
body.page-tree .tree-canvas-wrap {
  flex: 1;
  min-height: 0;
  padding: 12px 16px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
  overflow: hidden;
}
body.page-tree #cy {
  flex: 1;
  min-height: 0;
  width: 100%;
  border-radius: var(--radius);
  background: #0a0c12;
  border: 1px solid var(--border);
}
body.page-tree .legend {
  display: flex; gap: 16px; align-items: center; flex-shrink: 0;
  color: var(--text-secondary); font-size: 0.78rem;
}
.legend .avatar { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 4px; }

/* ══════════════════════════════════════════════════════════════════════════
   RIGHT DRAWER — person detail / edit panel
   ══════════════════════════════════════════════════════════════════════════ */
.drawer-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.55);
  z-index: 200;
  opacity: 0; pointer-events: none;
  transition: opacity var(--transition);
}
.drawer-overlay.open { opacity: 1; pointer-events: auto; }

.drawer {
  position: fixed;
  top: 0; right: 0; bottom: 0;
  width: var(--drawer-w);
  max-width: 96vw;
  background: var(--bg-surface);
  border-left: 1px solid var(--border);
  box-shadow: var(--shadow-lg);
  z-index: 210;
  display: flex;
  flex-direction: column;
  transform: translateX(100%);
  transition: transform 0.26s cubic-bezier(0.25,0.8,0.25,1);
  overflow: hidden;
}
.drawer.open { transform: translateX(0); }

.drawer-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 13px 16px;
  border-bottom: 1px solid var(--border-subtle);
  flex-shrink: 0;
  background: var(--bg-surface-2);
}
.drawer-header h2 { margin: 0; font-size: 0.95rem; font-weight: 700; }
.drawer-close {
  background: transparent; border: none;
  color: var(--text-secondary); cursor: pointer;
  font-size: 1.2rem; padding: 4px 6px;
  border-radius: var(--radius-sm);
  display: flex; align-items: center;
  transition: background var(--transition), color var(--transition);
}
.drawer-close:hover { background: var(--bg-surface); color: var(--text-main); }

.drawer-person-header {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 16px;
  background: var(--bg-surface-2);
  border-bottom: 1px solid var(--border-subtle);
  flex-shrink: 0;
}
.drawer-person-header img,
.drawer-avatar {
  width: 52px; height: 52px; border-radius: 9px;
  object-fit: cover; background: var(--bg-base);
  border: 1px solid var(--border); flex-shrink: 0;
}
.drawer-person-name { font-size: 0.95rem; font-weight: 700; color: var(--text-main); }
.drawer-person-sub  { font-size: 0.8rem; color: var(--text-secondary); margin-top: 2px; }
.drawer-person-actions { margin-left: auto; display: flex; gap: 6px; }

.drawer-body {
  flex: 1; overflow-y: auto;
  padding: 14px 16px;
  display: flex; flex-direction: column; gap: 12px;
}
.drawer-body::-webkit-scrollbar { width: 5px; }
.drawer-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.drawer-footer {
  padding: 10px 16px;
  border-top: 1px solid var(--border-subtle);
  display: flex; gap: 8px; justify-content: flex-end;
  flex-shrink: 0;
  background: var(--bg-surface-2);
}

.drawer-section-label {
  font-size: 0.7rem; font-weight: 700; color: var(--text-disabled);
  text-transform: uppercase; letter-spacing: 0.08em;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border-subtle);
  margin-bottom: 2px;
}

/* ── Indicadores ──────────────────────────────────────────────────────── */
.indicadores-cards { display: flex; gap: 14px; flex-wrap: wrap; }
.indicador-card {
  flex: 1 1 200px; min-width: 180px; max-width: 260px;
  padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 5px;
  border-radius: var(--radius); background: var(--bg-surface);
  border: 1px solid var(--border); box-shadow: var(--shadow);
}
.indicador-group { display: flex; flex-direction: column; gap: 8px; min-width: 240px; }
.indicador-group-title { margin: 0; color: var(--text-secondary); font-weight: 700; font-size: 0.875rem; }
.indicador-group-row { display: flex; gap: 10px; align-items: flex-start; }
.indicador-subcards { display: flex; gap: 10px; flex-wrap: wrap; align-items: stretch; }
.indicador-group-total {
  flex: 0 0 150px; min-width: 150px;
  background: var(--accent-soft); border: 1px solid var(--border-accent);
  padding: 14px; border-radius: var(--radius);
}
.indicador-group-total .indicador-num { font-size: 2rem; }
.indicador-chart { min-width: 260px; width: 460px; max-width: 100%; height: 130px; display: block; background: var(--bg-surface-2); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); padding: 8px; box-sizing: border-box; }
.indicador-chart svg { width: 100%; height: 100%; }
.indicador-icon { font-size: 2rem; }
.indicador-num { font-size: 1.9rem; font-weight: 700; color: var(--text-main); }
.indicador-label { color: var(--text-secondary); font-weight: 600; font-size: 0.85rem; }

/* ── Pagination ───────────────────────────────────────────────────────── */
#paginationControls { color: var(--text-secondary); margin-top: 10px; display: flex; gap: 4px; align-items: center; font-size: 0.8rem; }

/* ── Age badge ──────────────────────────────────────────────────────── */
#ageInfo {
  display: inline-block; margin-top: 6px; padding: 5px 10px;
  border-radius: var(--radius-sm); background: var(--accent-soft);
  color: var(--text-main); font-weight: 700; font-size: 0.875rem;
  border: 1px solid var(--border-accent);
}

/* ── Person / relation cards (pessoa-detalhe) ─────────────────────────── */
.person-focus { display: flex; justify-content: center; align-items: center; margin: 8px 0 12px; position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%); z-index: 80; }
.person-card {
  width: 310px; height: 96px; background: var(--bg-surface-2);
  border: 1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); display: flex; flex-direction: row;
  align-items: center; padding: 10px; box-sizing: border-box; overflow: hidden;
}
.person-avatar { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; flex: 0 0 50px; margin-right: 10px; }
.person-name { font-weight: 700; font-size: 0.9rem; color: var(--text-main); margin: 0 0 3px; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.person-dates { display: flex; gap: 6px; align-items: center; justify-content: space-between; width: 100%; }
.person-date { display: flex; gap: 5px; align-items: center; color: var(--text-secondary); font-size: 0.8rem; min-width: 68px; }
.person-date svg { color: var(--text-secondary); display: block; }
.date-text { font-size: 0.8rem; color: var(--text-secondary); }
.person-date:last-child { justify-content: flex-end; }

.relations-container { position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%); width: 0; height: 0; pointer-events: none; }
.relations-container .relation-card { pointer-events: auto; position: absolute; left: 0; top: 0; transform-origin: center; transition: transform 0.22s ease, box-shadow 0.18s; width: 230px; height: 90px; padding: 8px; background: var(--bg-surface-2); border: 1px solid var(--border); border-radius: var(--radius); display: flex; flex-direction: row; align-items: center; color: var(--text-main); box-shadow: var(--shadow); cursor: pointer; box-sizing: border-box; overflow: hidden; }
.relation-card:hover { transform: scale(1.04) !important; box-shadow: var(--shadow-lg); }
.relation-name { font-weight: 700; font-size: 0.875rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 0 6px; }
.relation-type { font-size: 0.7rem; color: var(--text-secondary); margin-top: 3px; }
.relation-avatar { width: 56px; height: 56px; border-radius: 7px; object-fit: cover; flex: 0 0 56px; margin-right: 8px; }

/* ── Mini cards (events & relations) ─────────────────────────────────── */
.mini-list { display: flex; gap: 10px; flex-wrap: wrap; }
.mini-card {
  flex: 1 1 250px; min-width: 210px; max-width: 100%;
  background: var(--bg-surface-2); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 12px; box-sizing: border-box;
  box-shadow: var(--shadow); color: var(--text-main);
  display: flex; flex-direction: column; gap: 5px;
}
.mini-card .mc-header { display: flex; justify-content: space-between; gap: 8px; align-items: center; }
.mc-type  { font-weight: 700; color: var(--text-main); }
.mc-meta  { color: var(--text-secondary); font-size: 0.83rem; }
.mc-notes { color: var(--text-secondary); font-size: 0.85rem; white-space: pre-wrap; }
.mc-actions { display: flex; justify-content: flex-end; gap: 5px; }
.mc-actions button { background: transparent; border: none; color: var(--text-secondary); cursor: pointer; padding: 5px; border-radius: var(--radius-sm); }
.mc-actions button:hover { background: var(--bg-surface); color: var(--text-main); }
.relation-mini { display: flex; gap: 8px; align-items: center; }
.relation-mini .rel-name { font-weight: 700; color: var(--text-main); }
.relation-mini .rel-type { font-size: 0.8rem; color: var(--text-secondary); }
@media (max-width: 600px) { .mini-card { flex-basis: 100%; min-width: 0; } }

/* ── Layout controls (tree) ──────────────────────────────────────────── */
.layout-controls {
  position: fixed; right: 14px; top: 64px;
  width: 270px; background: var(--bg-surface);
  border: 1px solid var(--border); border-radius: var(--radius);
  padding: 12px; z-index: 120; box-shadow: var(--shadow-lg);
}
.layout-controls.hidden { display: none !important; }
.layout-controls .lc-header { color: var(--text-main); font-weight: 700; margin-bottom: 8px; font-size: 0.875rem; }
.layout-controls .lc-row { display: flex; gap: 8px; align-items: center; margin-bottom: 8px; }
.layout-controls .lc-row label { flex: 0 0 110px; color: var(--text-secondary); font-size: 0.83rem; }
.layout-controls .lc-row input[type=range] { flex: 1; }
.layout-controls .lc-row.buttons { justify-content: flex-end; }

/* ── Misc ─────────────────────────────────────────────────────────────── */
.highlight { color: var(--green); font-weight: 600; }
.disabled { opacity: 0.4; cursor: not-allowed; pointer-events: none; }
.text-secondary { color: var(--text-secondary); }
.text-small { font-size: 0.8rem; }

/* ── Scrollbar ────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.14); }

/* ── Responsive ───────────────────────────────────────────────────────── */
@media (max-width: 900px) {
  :root { --drawer-w: 360px; }
  .main-grid { grid-template-columns: 1fr; gap: 16px; padding: 16px; }
}
@media (max-width: 600px) {
  :root { --drawer-w: 100vw; }
  .sidebar { width: var(--rail-w) !important; }
  .main-grid { padding: 10px; }
  .topbar { padding: 0 12px; }
  body.page-tree .tree-canvas-wrap { padding: 8px; }
}
