<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastro de Pessoas</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar">
        <div class="logo">XPTO</div>
        <nav>
          <a href="index.html" class="active">Cadastro</a>
          <a href="indicadores.html">Indicadores</a>
          <a href="pessoas.html">Pessoas</a>
          <a href="import.html">Importar</a>
          <a href="export.html">Exportar</a>
        </nav>
      </aside>
      <main class="content">
        <div class="topbar">
          <div style="display:flex;align-items:center;gap:12px"><h1 style="margin:0;font-size:1.25rem;">Cadastro de Pessoas</h1></div>
          <div><button class="btn" id="addPersonBtn">Adicionar Pessoa</button></div>
        </div>
        <div class="main-grid">
          <div class="table-panel card">
              <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:0;">
                <div style="display:flex;gap:12px;align-items:center;">
                  <input type="text" id="nameFilter" placeholder="Filtrar por nome..." style="padding:8px 10px;border-radius:8px;border:1px solid rgba(163,163,255,0.06);background:transparent;color:var(--text-main);" />
                  <div id="paginationControls" style="color:var(--text-secondary);"></div>
                </div>
              </div>
          <div>
            <label><input type="checkbox" id="hideDeleted" checked /> Ocultar registros exclu√≠dos</label>
          </div>
          <table id="peopleTable">
          <thead>
            <tr>
              <th></th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Data Nascimento</th>
              <th>Data √ìbito</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="form-panel card" id="formPanel" style="display:none;">
        <div class="accordion">
          <div class="accordion-card" id="cardDados">
            <button type="button" class="accordion-header" data-target="contentDados"><span>Dados Pessoais</span><span class="accordion-arrow">‚ñæ</span></button>
            <div class="accordion-content" id="contentDados">
              <form id="personForm">
                <input type="hidden" id="id" name="id" />
                <input type="hidden" id="createdAt" name="createdAt" />
                <input type="hidden" id="updatedAt" name="updatedAt" />
                <input type="hidden" id="deletedAt" name="deletedAt" />
                <div>
                  <label for="firstName">First Name</label>
                  <input type="text" id="firstName" name="firstName" required />
                </div>
                <div>
                  <label for="lastName">Last Name</label>
                  <input type="text" id="lastName" name="lastName" required />
                </div>
                <div>
                  <label for="gender">Gender</label>
                  <select id="gender" name="gender">
                    <option value="">-- selecione --</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                  </select>
                </div>
                <div class="full">
                  <label for="notes">Notes</label>
                  <textarea id="notes" name="notes"></textarea>
                </div>
                <div class="full">
                  <button type="submit" id="saveBtn">Salvar</button>
                  <button type="button" id="resetBtn">Limpar</button>
                </div>
              </form>
            </div>
          </div>

          <div class="accordion-card" id="cardEventos">
            <button type="button" class="accordion-header" data-target="contentEventos"><span>Eventos</span><span class="accordion-arrow">‚ñæ</span></button>
            <div class="accordion-content" id="contentEventos">
              <form id="eventForm">
                <div>
                  <label for="eventType">Tipo de evento</label>
                  <select id="eventType" name="eventType" required>
                    <option value="">-- selecione --</option>
                    <option value="BIRTH">Nascimento</option>
                    <option value="BAPTISM">Batismo</option>
                    <option value="DEATH">√ìbito</option>
                    <option value="MARRIAGE">Casamento</option>
                    <option value="DIVORCE">Div√≥rcio</option>
                    <option value="ADOPTION">Ado√ß√£o</option>
                    <option value="CUSTOM">Outro</option>
                  </select>
                </div>
                <div>
                  <label for="eventDate">Data</label>
                  <input type="date" id="eventDate" name="eventDate" />
                </div>
                <div>
                  <label for="eventLocation">Local</label>
                  <input type="text" id="eventLocation" name="eventLocation" />
                </div>
                <div>
                  <label for="eventNotes">Notas</label>
                  <textarea id="eventNotes" name="eventNotes"></textarea>
                </div>
                <div class="full">
                  <button type="button" id="addEventBtn">Adicionar Evento</button>
                </div>
              </form>
              <div id="eventsList"></div>
            </div>
          </div>

          <div class="accordion-card" id="cardRelacoes">
            <button type="button" class="accordion-header" data-target="contentRelacoes"><span>Rela√ß√µes</span><span class="accordion-arrow">‚ñæ</span></button>
            <div class="accordion-content" id="contentRelacoes">
              <form id="relationForm">
                <div>
                  <label for="relationType">Tipo de rela√ß√£o</label>
                  <select id="relationType" name="relationType">
                    <option value="">-- selecione --</option>
                    <option value="siblin">Siblin</option>
                    <option value="ancestor">Ancestor</option>
                    <option value="child">Child</option>
                    <option value="mate">Mate</option>
                  </select>
                </div>
                <div>
                  <label for="relationPerson">Pessoa relacionada</label>
                  <select id="relationPerson" name="relationPerson">
                    <option value="">-- selecione --</option>
                  </select>
                </div>
                <div class="full">
                  <button type="button" id="addRelationBtn">Adicionar Rela√ß√£o</button>
                </div>
              </form>
              <div id="relationsList"></div>
            </div>
          </div>
        </div>
        <div id="datesInfo" style="font-size:0.85em;color:#666;margin-top:16px;text-align:right;"></div>
      </div>
        </div>
      </main>
    </div>

    <script>
            // Novo controle de exibi√ß√£o da ficha
            const formPanel = document.getElementById('formPanel');
            const addPersonBtn = document.getElementById('addPersonBtn');
            function showFormPanel(show = true) {
              formPanel.style.display = show ? 'block' : 'none';
            }
            // Accordion helpers
            function openAccordion(id) {
              const el = document.getElementById(id);
              if (!el) return;
              el.style.display = 'block';
              if (el.parentElement) el.parentElement.classList.add('open');
            }
            function closeAccordion(id) {
              const el = document.getElementById(id);
              if (!el) return;
              el.style.display = 'none';
              if (el.parentElement) el.parentElement.classList.remove('open');
            }
            function toggleAccordion(id) {
              const el = document.getElementById(id);
              if (!el) return;
              if (el.style.display === 'block') closeAccordion(id); else openAccordion(id);
            }
            // Wire accordion headers
            document.addEventListener('click', function(e){
              const btn = e.target.closest && e.target.closest('.accordion-header');
              if (btn && btn.dataset && btn.dataset.target) {
                toggleAccordion(btn.dataset.target);
              }
            });
            addPersonBtn.addEventListener('click', function() {
              resetForm();
              showFormPanel(true);
              // Fecha Events/Relations e abre Dados ao criar nova pessoa
              closeAccordion('contentEventos');
              closeAccordion('contentRelacoes');
              openAccordion('contentDados');
              // Limpa listas de eventos e rela√ß√µes para nova ficha
              if (typeof renderEventsList === 'function') renderEventsList('');
              if (typeof renderRelationsList === 'function') renderRelationsList('');
              // Limpa a √°rea de datas (n√£o mostrar datas para novo registro)
              if (typeof showDatesInfo === 'function') showDatesInfo();
            });
            // Modifica editPerson para mostrar ficha e folders
            const originalEditPerson = editPerson;
            editPerson = function(id) {
              const people = loadPeople();
              const p = people.find(x => x.id === id);
              if (!p) return alert('Registro n√£o encontrado');
              document.getElementById('id').value = p.id;
              document.getElementById('firstName').value = p.firstName || '';
              document.getElementById('lastName').value = p.lastName || '';
              document.getElementById('gender').value = p.gender || '';
              document.getElementById('notes').value = p.notes || '';
              // Exibe datas no rodap√©
              showDatesInfo(p);
              showFormPanel(true);
              // Abre panels de rela√ß√µes e eventos na edi√ß√£o
              openAccordion('contentRelacoes');
              openAccordion('contentEventos');
              openAccordion('contentDados');
              // Preenche pessoas para rela√ß√£o
              fillRelationPersonSelect(id);
              // Renderiza lista de rela√ß√µes
              renderRelationsList(id);
              // Renderiza lista de eventos
              renderEventsList(id);
            }
            // Oculta ficha ao salvar ou limpar
            document.getElementById('personForm').addEventListener('submit', function(e){
              e.preventDefault();
              const id = document.getElementById('id').value || generateUUID();
              const firstName = document.getElementById('firstName').value.trim();
              const lastName = document.getElementById('lastName').value.trim();
              const gender = document.getElementById('gender').value;
              const notes = document.getElementById('notes').value;
              const people = loadPeople();
              const existingIndex = people.findIndex(x => x.id === id);
              const now = nowISO();
              let createdAt = now;
              let deletedAt = null;
              if (existingIndex >= 0) {
                createdAt = people[existingIndex].createdAt || now;
                deletedAt = people[existingIndex].deletedAt || null;
                people[existingIndex] = {
                  ...people[existingIndex],
                  firstName, lastName, gender, notes,
                  updatedAt: now
                };
              } else {
                people.push({
                  id,
                  firstName,
                  lastName,
                  gender,
                  notes,
                  createdAt: now,
                  updatedAt: now,
                  deletedAt: null
                });
              }
              savePeople(people);
              renderTable();
              resetForm();
              showDatesInfo();
              showFormPanel(false);
              closeAccordion('contentRelacoes');
              closeAccordion('contentEventos');
              closeAccordion('contentDados');
            });
            document.getElementById('resetBtn').addEventListener('click', function(){
              resetForm();
              showDatesInfo();
              showFormPanel(false);
              closeAccordion('contentRelacoes');
              closeAccordion('contentEventos');
              closeAccordion('contentDados');
            });
            // Oculta ficha ao iniciar
            showFormPanel(false);
            closeAccordion('contentRelacoes');
            closeAccordion('contentEventos');
            closeAccordion('contentDados');
            // Eventos
            function getEvents() {
              try {
                const raw = localStorage.getItem('events:xpto');
                return raw ? JSON.parse(raw) : [];
              } catch (e) { return []; }
            }
            function saveEvents(events) {
              localStorage.setItem('events:xpto', JSON.stringify(events));
            }
            function renderEventsList(personId) {
              const events = getEvents();
              const list = document.getElementById('eventsList');
              const evs = events.filter(ev => ev.personId === personId && !ev.deletedAt);
              if (evs.length === 0) {
                list.innerHTML = '<div style="color:#888">Nenhum evento cadastrado.</div>';
                return;
              }
              let html = '<ul>';
              evs.forEach((ev, idx) => {
                html += `<li><b>${ev.type}</b> - ${ev.date || 'Sem data'}${ev.location ? ', ' + ev.location : ''} <br><small>${ev.notes || ''}</small> <button class="remove-event" data-index="${idx}" title="Remover evento" style="background:none;border:none;cursor:pointer;padding:0;margin-left:8px;"><span style="font-size:1.2em;">üóëÔ∏è</span></button></li>`;
              });
              html += '</ul>';
              list.innerHTML = html;
              // Adiciona handler para remover evento
              document.querySelectorAll('.remove-event').forEach(btn => {
                btn.addEventListener('click', function(){
                  const idx = parseInt(this.getAttribute('data-index'));
                  let events = getEvents();
                  const evs = events.filter(ev => ev.personId === personId && !ev.deletedAt);
                  const eventToRemove = evs[idx];
                  events = events.map(ev => {
                    if (ev.id === eventToRemove.id) {
                      return { ...ev, deletedAt: nowISO(), updatedAt: nowISO() };
                    }
                    return ev;
                  });
                  saveEvents(events);
                  renderEventsList(personId);
                  renderTable(); // Atualiza tabela
                });
              });
            }
            document.getElementById('addEventBtn').addEventListener('click', function(){
              const personId = document.getElementById('id').value;
              if (!personId) return alert('Pessoa n√£o selecionada');
              const type = document.getElementById('eventType').value;
              const date = document.getElementById('eventDate').value || null;
              const location = document.getElementById('eventLocation').value || null;
              const notes = document.getElementById('eventNotes').value || '';
              if (!type) return alert('Tipo de evento obrigat√≥rio');
              const events = getEvents();
              const now = nowISO();
              events.push({
                id: generateUUID(),
                personId,
                type,
                date,
                location,
                notes,
                createdAt: now,
                updatedAt: now,
                deletedAt: null
              });
              saveEvents(events);
              renderEventsList(personId);
              renderTable(); // Atualiza tabela
              document.getElementById('eventForm').reset();
            });

            // Rela√ß√µes
            function fillRelationPersonSelect(currentId) {
              const people = loadPeople();
              const select = document.getElementById('relationPerson');
              select.innerHTML = '<option value="">-- selecione --</option>';
              people.forEach(p => {
                if (p.id !== currentId && !p.deletedAt) {
                  select.innerHTML += `<option value="${p.id}">${escapeHtml(p.firstName)} ${escapeHtml(p.lastName)}</option>`;
                }
              });
            }

            function getRelations() {
              try {
                const raw = localStorage.getItem('relations:xpto');
                return raw ? JSON.parse(raw) : [];
              } catch (e) { return []; }
            }
            function saveRelations(relations) {
              localStorage.setItem('relations:xpto', JSON.stringify(relations));
            }
            function renderRelationsList(personId) {
              const relations = getRelations();
              const people = loadPeople();
              const list = document.getElementById('relationsList');
              const rels = relations.filter(r => r.from === personId);
              if (rels.length === 0) {
                list.innerHTML = '<div style="color:#888">Nenhuma rela√ß√£o cadastrada.</div>';
                return;
              }
              const typeDesc = {
                siblin: 'Irm√£o / Irm√£',
                ancestor: 'Pai / M√£e',
                child: 'Filho(a)',
                mate: 'Companheiro(a)'
              };
              let html = '<ul>';
              rels.forEach((r, idx) => {
                const p = people.find(x => x.id === r.to);
                const desc = typeDesc[r.type] || r.type;
                html += `<li>${desc}: ${p ? escapeHtml(p.firstName + ' ' + p.lastName) : r.to} <button class="remove-relation" data-index="${idx}" title="Remover rela√ß√£o" style="background:none;border:none;cursor:pointer;padding:0;margin-left:8px;"><span style="font-size:1.2em;">üóëÔ∏è</span></button></li>`;
              });
              html += '</ul>';
              list.innerHTML = html;
              // Adiciona handler para remover rela√ß√£o
              document.querySelectorAll('.remove-relation').forEach(btn => {
                btn.addEventListener('click', function(){
                  const idx = parseInt(this.getAttribute('data-index'));
                  let relations = getRelations();
                  const rels = relations.filter(r => r.from === personId);
                  const relToRemove = rels[idx];
                  relations = relations.filter(r => !(r.from === personId && r.to === relToRemove.to && r.type === relToRemove.type));
                  saveRelations(relations);
                  renderRelationsList(personId);
                });
              });
            }
            document.getElementById('addRelationBtn').addEventListener('click', function(){
              const type = document.getElementById('relationType').value;
              const to = document.getElementById('relationPerson').value;
              const from = document.getElementById('id').value;
              if (!type || !to || !from) return alert('Selecione tipo e pessoa relacionada.');
              const relations = getRelations();
              relations.push({ from, to, type });
              saveRelations(relations);
              renderRelationsList(from);
              document.getElementById('relationType').value = '';
              document.getElementById('relationPerson').value = '';
            });
      const STORAGE_KEY = 'people:xpto';

      function nowISO() { return new Date().toISOString(); }

      function generateUUID() {
        if (crypto && crypto.randomUUID) return crypto.randomUUID();
        const bytes = crypto.getRandomValues(new Uint8Array(16));
        bytes[6] = (bytes[6] & 0x0f) | 0x40;
        bytes[8] = (bytes[8] & 0x3f) | 0x80;
        const b2h = b => Array.from(b).map(x => x.toString(16).padStart(2,'0')).join('');
        const s = b2h(bytes);
        return s.slice(0,8)+'-'+s.slice(8,12)+'-'+s.slice(12,16)+'-'+s.slice(16,20)+'-'+s.slice(20);
      }

      function loadPeople() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          console.error('Erro ao ler storage', e);
          return [];
        }
      }

      function savePeople(people) { localStorage.setItem(STORAGE_KEY, JSON.stringify(people)); }

      // Pagination + filter state
      let currentPage = 1;
      const PAGE_SIZE = 20;

      function renderPagination(totalPages) {
        const ctrl = document.getElementById('paginationControls');
        if (!ctrl) return;
        if (totalPages <= 1) { ctrl.innerHTML = ''; return; }
        const prevDisabled = currentPage <= 1 ? 'disabled' : '';
        const nextDisabled = currentPage >= totalPages ? 'disabled' : '';
        ctrl.innerHTML = `<button id="prevPage" ${prevDisabled} style="margin-right:6px;">‚óÄ</button><span style="margin-right:6px;">P√°gina ${currentPage} de ${totalPages}</span><button id="nextPage" ${nextDisabled}>‚ñ∂</button>`;
        const prev = document.getElementById('prevPage');
        const next = document.getElementById('nextPage');
        if (prev) prev.addEventListener('click', function(){ if (currentPage>1) { currentPage--; renderTable(); } });
        if (next) next.addEventListener('click', function(){ if (currentPage<totalPages) { currentPage++; renderTable(); } });
      }

      function renderTable() {
        const tbody = document.querySelector('#peopleTable tbody');
        tbody.innerHTML = '';
        const all = loadPeople();
        const hideDeleted = document.getElementById('hideDeleted').checked;
        const events = getEvents();
        const filter = (document.getElementById('nameFilter') && document.getElementById('nameFilter').value || '').toLowerCase().trim();

        // Apply hidden and filter
        const filtered = all.filter(p => {
          if (hideDeleted && p.deletedAt) return false;
          if (!filter) return true;
          const full = ((p.firstName||'') + ' ' + (p.lastName||'')).toLowerCase();
          return full.indexOf(filter) !== -1;
        });

        const totalPages = Math.max(1, Math.ceil(filtered.length / PAGE_SIZE));
        if (currentPage > totalPages) currentPage = totalPages;
        const start = (currentPage - 1) * PAGE_SIZE;
        const pageItems = filtered.slice(start, start + PAGE_SIZE);

        pageItems.forEach(p => {
          const tr = document.createElement('tr');
          if (p.deletedAt) tr.classList.add('deleted');
          let genderIcon = '';
          if (p.gender === 'male') genderIcon = '<span title="Masculino" style="font-size:1.2em">&#9794;</span>';
          else if (p.gender === 'female') genderIcon = '<span title="Feminino" style="font-size:1.2em">&#9792;</span>';
          else genderIcon = '<span title="Outro" style="font-size:1.2em">&#9893;</span>';
          const birthEv = events.find(ev => ev.personId === p.id && ev.type === 'BIRTH' && !ev.deletedAt);
          const deathEv = events.find(ev => ev.personId === p.id && ev.type === 'DEATH' && !ev.deletedAt);
          const birthDate = birthEv && birthEv.date ? formatDate(birthEv.date) : '';
          const deathDate = deathEv && deathEv.date ? formatDate(deathEv.date) : '';
          tr.innerHTML = `
            <td style="width:32px;text-align:center;">${genderIcon}</td>
            <td>${escapeHtml(p.firstName)}</td>
            <td>${escapeHtml(p.lastName)}</td>
            <td>${birthDate}</td>
            <td>${deathDate}</td>
            <td class="actions">
              <button data-id="${p.id}" class="edit" title="Editar" style="background:none;border:none;cursor:pointer;padding:0 6px 0 0;"><span style="font-size:1.2em;">‚úèÔ∏è</span></button>
              <button data-id="${p.id}" class="del" title="Excluir" style="background:none;border:none;cursor:pointer;padding:0;"><span style="font-size:1.2em;">üóëÔ∏è</span></button>
            </td>
          `;
          tbody.appendChild(tr);
        });

        renderPagination(totalPages);
      }

      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

      function resetForm() {
        document.getElementById('personForm').reset();
        document.getElementById('id').value = '';
        // Limpa campos de datas que s√≥ existem ap√≥s salvar (cria√ß√£o deve deixar em branco)
        if (document.getElementById('createdAt')) document.getElementById('createdAt').value = '';
        if (document.getElementById('updatedAt')) document.getElementById('updatedAt').value = '';
        if (document.getElementById('deletedAt')) document.getElementById('deletedAt').value = '';
      }

      function formatDate(dateStr) {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        if (isNaN(d)) return escapeHtml(dateStr);
        const pad = n => n.toString().padStart(2, '0');
        const day = pad(d.getDate());
        const month = pad(d.getMonth() + 1);
        const year = d.getFullYear();
        return `${day}-${month}-${year}`;
      }

      function showDatesInfo(person) {
        const el = document.getElementById('datesInfo');
        if (!el) return;
        if (!person) {
          el.innerHTML = '';
          return;
        }
        let html = '';
        if (person.createdAt) html += `<div>Criado em: <span>${formatDate(person.createdAt)}</span></div>`;
        if (person.updatedAt) html += `<div>Atualizado em: <span>${formatDate(person.updatedAt)}</span></div>`;
        if (person.deletedAt) html += `<div>Exclu√≠do em: <span>${formatDate(person.deletedAt)}</span></div>`;
        el.innerHTML = html;
      }

      document.getElementById('personForm').addEventListener('submit', function(e){
        e.preventDefault();
        const id = document.getElementById('id').value || generateUUID();
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const gender = document.getElementById('gender').value;
        const notes = document.getElementById('notes').value;
        const createdAtField = document.getElementById('createdAt').value;
        const deletedAtField = document.getElementById('deletedAt').value || null;

        const people = loadPeople();
        const existingIndex = people.findIndex(x => x.id === id);
        const now = nowISO();

        if (existingIndex >= 0) {
          people[existingIndex] = {
            ...people[existingIndex],
            firstName, lastName, gender, notes,
            updatedAt: now,
            deletedAt: deletedAtField || null
          };
        } else {
          people.push({
            id,
            firstName,
            lastName,
            gender,
            notes,
            createdAt: createdAtField || now,
            updatedAt: now,
            deletedAt: deletedAtField || null
          });
        }

        savePeople(people);
        renderTable();
        resetForm();
      });

      document.getElementById('resetBtn').addEventListener('click', function(){ resetForm(); });

      document.getElementById('peopleTable').addEventListener('click', function(e){
        // Garante que o clique no √≠cone dentro do bot√£o tamb√©m funcione
        let btn = e.target;
        // Se clicou no <span>, sobe para o <button>
        if (btn.tagName === 'SPAN' && btn.parentElement && btn.parentElement.tagName === 'BUTTON') {
          btn = btn.parentElement;
        }
        const id = btn.getAttribute('data-id');
        if (!id) return;
        if (btn.classList.contains('edit')) {
          editPerson(id);
        } else if (btn.classList.contains('del')) {
          softDeletePerson(id);
        }
      });

      document.getElementById('hideDeleted').addEventListener('change', renderTable);

      function editPerson(id) {
        const people = loadPeople();
        const p = people.find(x => x.id === id);
        if (!p) return alert('Registro n√£o encontrado');
        document.getElementById('id').value = p.id;
        document.getElementById('firstName').value = p.firstName || '';
        document.getElementById('lastName').value = p.lastName || '';
        document.getElementById('gender').value = p.gender || '';
        document.getElementById('notes').value = p.notes || '';
        document.getElementById('createdAt').value = p.createdAt || '';
        document.getElementById('updatedAt').value = p.updatedAt || '';
        document.getElementById('deletedAt').value = p.deletedAt || '';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      function softDeletePerson(id) {
        if (!confirm('Confirmar exclus√£o (soft delete)?')) return;
        const people = loadPeople();
        const i = people.findIndex(x => x.id === id);
        if (i < 0) return alert('Registro n√£o encontrado');
        people[i].deletedAt = nowISO();
        people[i].updatedAt = nowISO();
        savePeople(people);
        renderTable();
      }

      renderTable();
    </script>
  </body>
</html>
